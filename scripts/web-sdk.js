
/*!
 * Copyright (c) 2025 Oracle and/or its affiliates.
 * All rights reserved. Oracle Digital Assistant Client Web SDK, Release: 25.04
 */
(function(M,ee){typeof exports=="object"&&typeof module!="undefined"?module.exports=ee():typeof define=="function"&&define.amd?define(ee):(M=typeof globalThis!="undefined"?globalThis:M||self,M.WebSDK=ee())})(this,function(){"use strict";var cg=Object.defineProperty;var Yo=Object.getOwnPropertySymbols;var pg=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable;var Ko=(M,ee,me)=>ee in M?cg(M,ee,{enumerable:!0,configurable:!0,writable:!0,value:me}):M[ee]=me,vt=(M,ee)=>{for(var me in ee||(ee={}))pg.call(ee,me)&&Ko(M,me,ee[me]);if(Yo)for(var me of Yo(ee))lg.call(ee,me)&&Ko(M,me,ee[me]);return M};const M={Connecting:0,Open:1,Closing:2,Closed:3},ee=(o,e,s={})=>{const t=e.getContext("2d");if(!t)return;const{color:a="#161513",barCount:r=31,isMirrored:i=!0,scale:n=1,barWidth:p=2,aggregator:l=Ca}=s,c=e.height,m=e.width,h=Math.floor(c/2),d=r*p,u=r<=1?0:Math.floor(m-d)/(r-1);t.clearRect(0,0,m,c),t.fillStyle=a;const b=me(o,r,l,i),v=Xo(b,c*n);let k=0;v.forEach(x=>{const _=Math.floor(x/2)+1,C=h-_;t.fillRect(k,C,p,x),k+=p+u})},me=(o,e,s,t=!0)=>{const a=Array.from(o),r=Math.max(...a),i=Math.ceil(e/(t?2:1)),n=Math.max(Math.floor(a.length/i),1),p=[];for(let l=0;l<a.length;l+=n){const c=a.slice(l,l+n),m=s(c)/r;p.unshift(m)}if(t){const l=e%2?i-1:i,c=p.slice(0,i),m=p.slice(0,l).reverse();return[...c,...m]}return p},Xo=(o,e)=>o.map(s=>Math.max(s*e,1)),Ca=o=>Math.sqrt(o.map(e=>e*e).reduce((e,s)=>e+s,0)/o.length),js={AuthExpiredToken:"AuthExpiredToken",AuthNoToken:"AuthNoToken",AuthNoChannelId:"AuthNoChannelId",AuthNoUserId:"AuthNoUserId",AuthNoExp:"AuthNoExp",AuthNoIat:"AuthNoIat",AuthInvalidChannelId:"AuthInvalidChannelId",AuthInvalidUserId:"AuthInvalidUserId",AuthInvalidExp:"AuthInvalidExp",AuthInvalidIat:"AuthInvalidIat",AuthEmptyChannelIdClaim:"AuthInvalidChannelId",AuthEmptyUserIdClaim:"AuthInvalidUserId",AuthNegativeExp:"AuthNegativeExp",AuthNegativeIat:"AuthNegativeIat",AuthExpLessThanIat:"AuthExpLessThanIat"};class Zo{constructor(e){this.token=e;const s=this.token.split(".");this.header=JSON.parse(atob(s[0])),this.payload=JSON.parse(atob(s[1]))}getClaim(e){return this.payload[e]}}const Te=o=>typeof o=="object"&&o!==null,H=o=>o instanceof Function,Jo=o=>ArrayBuffer.isView(o)&&!(o instanceof DataView),$e=o=>{if(!Te(o)||Jo(o)||o instanceof ArrayBuffer||o instanceof Event)return o;if(o instanceof Blob)return o.slice(0,o.size,o.type);if(o instanceof Error){const e=new o.constructor(o.message);return e.stack=o.stack,e.name=o.name,e}return o instanceof Array?o.map(e=>$e(e)):o instanceof Date?new Date(o):Object.fromEntries(Object.entries(o).map(([e,s])=>[e,$e(s)]))},Ta=o=>{if(!Te(o))return o;for(const e of Object.values(o))Te(e)&&Ta(e);return Object.freeze(o)},Qo=o=>{const e={};return Object.keys(o).forEach(s=>{Object.defineProperty(e,s,{get:()=>o[s],enumerable:!0,configurable:!0})}),e},Ea=(o,...e)=>e.reduce((s,t)=>t(s),o),Xe=o=>(o.lastIndex=0,o);var ei=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class Ze{static getInstance(){return this._service||(this._service=new Ze),this._service}get(){return ei(this,void 0,void 0,function*(){if(this._jws&&Ma(this._jws))return this._jws;const e=yield this._fetch();this._jws=new Zo(e);try{if(si(this._jws),Ma(this._jws))return this._jws;throw Error(js.AuthExpiredToken)}catch(s){throw s}})}reset(){this._jws=void 0}setFetch(e){if(!H(e))throw new Error("'generateAuthToken' is not a function. Create a function that returns a Promise that resolves to a new JWT when called.");this._fetch=e,this.reset()}}const Aa="string",Ia="number",_t="exp";function si(o){o||ns(js.AuthNoToken);const e="iat",s=o.getClaim(e);Gs(e,Ia,s);const t=o.getClaim(_t);Gs(_t,Ia,t),t<=s&&ns(js.AuthExpLessThanIat);const a="channelId",r=o.getClaim(a);Gs(a,Aa,r);const i="userId",n=o.getClaim(i);Gs(i,Aa,n)}function Ma(o){const t=Math.floor((Date.now()+2e4)/1e3);return o.getClaim(_t)>t}function Gs(o,e,s){s==null&&ns(`AuthNo${o}`),typeof s!==e&&ns(`AuthInvalid${o}`),typeof s=="number"?s<=0&&ns(`AuthNegative${o}`):s.length||ns(`AuthEmpty${o}`)}function ns(o){throw Error(o)}class cs{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s}),Object.freeze(this)}}const La=()=>/Android/i.test(navigator.userAgent),Da=()=>/iPhone|iPad/i.test(navigator.userAgent)&&!window.MSStream,ti=()=>La()||Da(),ai=()=>La()?"android":Da()?"ios":"desktop",ri=o=>o.replace(/>\s+</g,"><"),oi=o=>o.replace(/\r\n|\n|\r/g,"<br/>"),ii=o=>{var e;const s=document.createElement("div");s.style.display="none",document.body.append(s),s.innerHTML=o,Pa(s);const t=(e=s.textContent)!==null&&e!==void 0?e:"";return s.remove(),t},Pa=o=>{for(let e=o.childElementCount-1;e>=0;e--){const s=o.children[e],t=window.getComputedStyle(s);t.display==="none"||t.visibility==="hidden"?s.remove():Pa(s)}},xt=o=>{const e=ri(o),s=oi(e),t=new DOMParser().parseFromString(s,"text/html");return t==null?void 0:t.body},ni=o=>{const e=xt(o);return e.querySelectorAll("script, iframe, link, object, embed, meta").forEach(a=>{a.remove()}),e.querySelectorAll("*").forEach(a=>{const r=[];for(const i of a.attributes)ci(i)&&r.push(i);for(const i of r)a.removeAttribute(i.name)}),e.innerHTML},ci=o=>{const e=o.name.toLowerCase(),s=o.value.toLowerCase();return e.startsWith("on")||e==="style"||s.startsWith("javascript")},pi=o=>{const e=document.createElement("template");return e.innerHTML=o.trim(),e.content.firstChild},za=o=>{const e=document.createElement("textarea");return e.innerHTML=o,e.value},qs=o=>{if(!o)return!1;const e=window.getComputedStyle(o);return e.display==="none"||e.visibility==="hidden"||e.opacity==="0"||!o.offsetHeight||!o.offsetWidth||!o.getClientRects().length?!1:o.offsetParent!==null},li=o=>{const e=new ClipboardItem({"text/html":new Blob([o.outerHTML],{type:"text/html"}),"text/plain":new Blob([o.innerText],{type:"text/plain"})});return navigator.clipboard.write([e])},Ra=o=>{var e;return((e=o.querySelectorAll("button"))!==null&&e!==void 0?e:[]).forEach(t=>{var a,r;const i=t.querySelector("a");if(i){const p=document.createElement("a");mi(i,p),p.innerHTML=i.innerHTML,(a=t.parentElement)===null||a===void 0||a.replaceChild(p,t);return}const n=document.createElement("div");(r=t.parentElement)===null||r===void 0||r.replaceChild(n,t)}),o},mi=(o,e)=>{Array.from(o.attributes).forEach(s=>{e.setAttribute(s.name,s.value)})},T={Return:"Enter",Esc:"Escape",Space:"Space",Up:"ArrowUp",Down:"ArrowDown",Tab:"Tab",PageDown:"PageDown",PageUp:"PageUp",Home:"Home",End:"End",Backspace:"Backspace"},ps=()=>{const o=new Map;return{bind:(a,r)=>{var i;!a||!H(r)||o.set(a,((i=o.get(a))!==null&&i!==void 0?i:new Set).add(r))},trigger:(a,...r)=>{const i=o.get(a);i&&i.forEach(n=>{try{n($e(r[0]))}catch(p){console.error(`${String(a)} listener error`,p)}})},unbind:(a,r)=>{if(!a)o.clear();else if(!r)o.delete(a);else{const i=o.get(a);i&&(i.delete(r),i.size===0&&o.delete(a))}}}},Ys=(o,{pattern:e,locale:s})=>{const t=new Date(o);if(typeof e=="string")try{return ui(t,e)}catch(a){}else if(Te(e))return new Intl.DateTimeFormat(s,e).format(t);return bi(t,s)},gi=(o,e)=>{var s,t;const a=(s=e==null?void 0:e.locale)!==null&&s!==void 0?s:"en",r=new Date(o),n=hi(new Date,r);if(n===0||n===-1)return fi(r,n,a);const p=(t=e==null?void 0:e.pattern)!==null&&t!==void 0?t:{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return Ys(r,{pattern:p,locale:a})},di=24*60*60*1e3,hi=(o,e)=>{const s=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),t=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((t-s)/di)},ui=(o,e)=>{const s=o.getDate(),t=o.getDay(),a=wi[t],r=o.getMonth()+1,i=vi[r-1],n=`${o.getFullYear()}`,p=o.getHours(),l=o.getMinutes(),c=o.getSeconds(),m=o.getMilliseconds(),h=p>=kt?"PM":"AM",d=_i(o),u=p%kt||kt,b={DD:Ne(s),Do:`${s}${xi(s)}`,D:`${s}`,dddd:a,ddd:a.substring(0,3),d:`${t}`,MMMM:i,MMM:i.substring(0,3),MM:Ne(r),M:`${r}`,YYYY:n,YY:n.slice(-2),HH:Ne(p),H:`${p}`,hh:Ne(u),h:`${u}`,mm:Ne(l),m:`${l}`,ss:Ne(c),s:`${c}`,SSS:`${m}`,SS:`${m%100}`,S:`${m%1e3}`,A:h,a:h.toLowerCase(),ZZ:d.replace(":",""),Z:d};return e.replace(/DD|Do|D|dddd|ddd|d|MMMM|MMM|MM|M|YYYY|YY|HH|H|hh|h|mm|m|ss|s|SSS|SS|S|A|a|ZZ|Z/g,v=>b[v])},bi=(o,e)=>{const s={weekday:"short",month:"short",day:"numeric"},t={hour:"numeric",minute:"numeric",hour12:!0},a=e!=null?e:"en";return`${o.toLocaleDateString(a,s).replace(/,/g,"")}, ${o.toLocaleTimeString(a,t)}`},fi=(o,e,s)=>{const t=s!=null?s:"en",r=new Intl.RelativeTimeFormat(t,{numeric:"auto"}).format(e,"day"),i={hour:"numeric",minute:"numeric",hour12:!0},n=o.toLocaleTimeString(t,i);return`${r}, ${n}`},wi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],vi=["January","February","March","April","May","June","July","August","September","October","November","December"],Oa=60,kt=12,_i=o=>{const e=o.getTimezoneOffset(),s=Math.abs(e),t=Ne(Math.floor(s/Oa)),a=Ne(s%Oa);return`${s===e?"+":"-"}${t}:${a}`},xi=o=>{let e="th";if(o>=11&&o<=13)return e;switch(o%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},Ne=o=>`${o}`.padStart(2,"0"),ki=(o,e)=>{const s=new Date(o),t=new Date(e);return s.getDate()===t.getDate()&&s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()},ls=(o={})=>{if(o===null)return"";const{prefix:e="",randomPartLength:s=5,separator:t="-",alphanumeric:a=!1}=o,r=36,i=10,n=a?r:i,p=Date.now().toString(n);let l="";if(a)l=Math.random().toString(n).replace("0.","").substring(0,s);else{const c=Math.pow(i,s);l=Math.floor(Math.random()*c).toString(n).padStart(s,"0")}return`${e}${e?t:""}${p}${t}${l}`};function Fa(o,e,s){return o>=e&&o<=s}function Ba(o){return typeof o=="number"}function Ks(o,e,s){o.addEventListener(e,s)}function Je(o,e,s){o.setRequestHeader(e,s)}const yt=o=>typeof o=="string"&&o.length>0,yi=o=>o.replace(/&#x([0-9a-f]+);/gi,(e,s)=>String.fromCharCode(parseInt(s,16))),ys=(o,e,s,t)=>{const a=`${o}${e}${t}`;return Si(a,s)},Va=(o,e,s=!0,t="websdk")=>ys(`ws${s?"s":""}://`,o,e,`/chat/v1/chats/sockets/${t}`),$a=(o,e,s=!0)=>ys(`http${s?"s":""}://`,o,e,"/chat/v1/chats/message"),Si=(o,e)=>{const s=Object.keys(e).map(t=>`${t}=${e[t]}`).join("&");return s.length?`${o}?${s}`:o},St=o=>o.replace(/^https?:\/\//i,""),X={RecognitionNotAvailable:"RecognitionNotAvailable",RecognitionNotReady:"RecognitionNotReady",RecognitionNoAPI:"RecognitionNoAPI",RecognitionProcessingFailure:"RecognitionProcessingFailure",RecognitionTooMuchSpeechTimeout:"RecognitionTooMuchSpeechTimeout",RecognitionNoResponse:"RecognitionNoResponse",RecognitionNoSpeechTimeout:"RecognitionNoSpeechTimeout",RecognitionNoWebServer:"RecognitionNoWebServer",RecognitionMultipleConnection:"RecognitionMultipleConnection"},Ee={DE_DE:"de-de",EN_AU:"en-au",EN_GB:"en-gb",EN_IN:"en-in",EN_US:"en-us",ES_ES:"es-es",FR_FR:"fr-fr",HI_IN:"hi-in",IT_IT:"it-it",PT_BR:"pt-br"},Qe={ASRStart:"asr:start",ASRStop:"asr:stop",ASRError:"asr:error",ASRResponse:"asr:response",ASRVisualData:"asr:visualdata",Silence:"mic:silence"},Ci=Object.keys(Ee).map(o=>Ee[o]);function Na(o){return Ci.includes(o)}const ge={TTSStart:"tts:start",TTSStop:"tts:stop"},A=Object.assign(Object.assign(Object.assign({},{ConnectionNone:"ConnectionNone",ConnectionExplicitClose:"ConnectionExplicitClose",MessageInvalid:"MessageInvalid",NetworkFailure:"NetworkFailure",NetworkOffline:"NetworkOffline",ProfileInvalid:"ProfileInvalid",TtsNotAvailable:"TtsNotAvailable",TTSNoWebAPI:"TTSNoWebAPI",SuggestionsEmptyRequest:"SuggestionsEmptyRequest",SuggestionsInvalidRequest:"SuggestionsInvalidRequest",SuggestionsTimeout:"SuggestionsTimeout",UploadBadFile:"UploadBadFile",UploadMaxSize:"UploadMaxSize",UploadNetworkFail:"UploadNetworkFail",UploadNotAvailable:"UploadNotAvailable",UploadUnauthorized:"UploadUnauthorized",UploadZeroSize:"UploadZeroSize",LocationNoAPI:"LocationNoAPI",LocationNotAvailable:"LocationNotAvailable",LocationTimeout:"LocationTimeout",LocationInvalid:"LocationInvalid"}),js),X),R={Call:"call",Client:"client",Location:"location",Popup:"popup",Postback:"postback",Share:"share",SubmitForm:"submitForm",Url:"url",Webview:"webview"},Ct={Primary:"primary",Danger:"danger"},Ha={Icon:"icon",Link:"link"},de={Image:"image",Video:"video",Audio:"audio",File:"file"},Ss={Text:"text",Link:"link",Action:"action",Media:"media"},$=Object.assign(Object.assign({},Ss),{SingleSelect:"singleSelect",MultiSelect:"multiSelect",DatePicker:"datePicker",TimePicker:"timePicker",Toggle:"toggle",TextInput:"textInput",NumberInput:"numberInput"}),Tt={CUSTOM:"custom",NAVIGATE:"navigate",QUERY:"query",UPDATE_FIELDS:"updateFields"},f={Attachment:"attachment",Card:"card",Location:"location",Postback:"postback",Raw:"raw",Suggest:"suggest",Text:"text",CloseSession:"closeSession",SessionClosed:"sessionClosed",Table:"table",Form:"form",TableForm:"tableForm",Status:"status",EditForm:"editForm",FormSubmission:"formSubmission",InboundEvent:"inboundEvent",OutboundEvent:"outboundEvent",TextStream:"textStream",Command:"command",Error:"error",UpdateApplicationContextCommand:"updateApplicationContextCommand",ExecuteApplicationActionCommand:"executeApplicationActionCommand",GetDebugInfoCommand:"getDebugInfoCommand"},Cs={ChatWindow:"chatWindow",CompactChat:"compactChat",UIWidget:"UIWidget",Skill:"skill"},Ts=Object.assign(Object.assign({},Tt),{COPY_MESSAGE_TEXT:"copyMessageText"}),Xs={Auth:"auth",Ping:"ping",Pong:"pong"},Ti={JWT:"jwt"},Ua={state:{type:Xs.Ping}},Ae={Skill:"bot",User:"user"},we={Agent:"AGENT",Bot:"BOT"},Ei=o=>Te(o)&&"messagePayload"in o,ms=o=>Te(o)&&"type"in o,Et=o=>ms(o)&&o.type===f.Postback,Ai=o=>ms(o)&&(o.type===f.InboundEvent||o.type===f.OutboundEvent),At=o=>o.fields!==void 0,Wa=o=>o.formRows!==void 0,It=o=>o.fields!==void 0,ja=o=>Te(o)&&"state"in o,Ii=o=>ja(o)&&o.state.type===Xs.Ping,Mi=o=>ja(o)&&o.state.type===Xs.Pong;function Li(o){const e=o.split("/")[0].toLowerCase();switch(e){case de.Audio:case de.Image:case de.Video:return e;default:return de.File}}function Di(o,e,s){const t=Li(o),a={type:f.Attachment,attachment:{type:t,url:e,title:s}};return ve(a)}function Es(o,e){const s={text:o,type:f.Text},t=ve(s);return e&&(t.sdkMetadata?t.sdkMetadata.speechId=e:t.sdkMetadata={speechId:e}),t}function As(o){var e;let s;"label"in o?s=o.label:s=(e=o.text)!==null&&e!==void 0?e:B;const t={text:s,postback:o.postback,type:f.Postback};return ve(t)}function ve(o){return Mt({messagePayload:o})}const Mt=o=>o.requestId?o:Object.assign(Object.assign({},o),{requestId:ls({prefix:"wsreq",separator:"/"})}),j="; ",B="",Pi=/<[^>]+>/g,zi=/&#(\d+);/g,Ri=/&#[xX]([\da-fA-F]+);/g;function Oi(o,e){const s=o.messagePayload;let t=B;if(s.voice)return Ya(qi(o.messagePayload));switch(s.type){case f.Attachment:t=Bi(s,e);break;case f.Card:t=Vi(s,e);break;case f.Location:t=$i(s);break;case f.Text:case f.TextStream:t=s.text;break;case f.Table:t=Ni(s,e);break;case f.Form:t=Hi(s,e);break;case f.TableForm:t=Ui(s,e);break;case f.EditForm:t=Wi(s)}return Ea(Fi(s,t),Ya,Xi,Gi)}function Fi(o,e){if(o.type===f.EditForm&&o.errorMessage)return e;const s=[];return s.push(o.headerText),s.push(e),s.push(Zs(o.actions)),s.push(o.footerText),s.push(Zs(o.globalActions)),s.filter(Boolean).join(j)}function Zs(o){return o?o.filter(e=>e.type!==R.SubmitForm).map(e=>e.voice?e.voice.text:e.label||B).filter(Boolean).join(j):B}function Bi(o,e){return e[`${o.type}_${o.attachment.type}`]}function Vi(o,e){const s=o.cards;let t=B;if(s!=null&&s.length){const a=e.card,r=a?a.includes("{0}")?a:`${a} {0}`:B,i=s.length>1;t=s.filter(n=>n.title).map((n,p)=>{const l=[i?r.replace("{0}",`${p+1}`):B];return n.voice?l.push(n.voice.text):(l.push(n.title),l.push(n.description)),l.push(Zs(n.actions)),l.filter(Boolean).join(j)}).filter(Boolean).join(j)}return t}function $i(o){const e=o.location;return`${e.title?`${e.title}${j}`:B}${e.latitude},${e.longitude}`}function Ni(o,e){return Lt(o.paginationInfo)+o.rows.filter(s=>{var t;return(t=s==null?void 0:s.fields)===null||t===void 0?void 0:t.length}).map((s,t)=>qa(s,t,e)).filter(Boolean).join(j)}function Hi(o,e){return Lt(o.paginationInfo)+o.forms.filter(s=>s).map((s,t)=>{const a=(s.title?`${s.title}: `:B)+Ga(s,e);return a?`${(e.itemIterator||B).replace("{0}",`${t+1}`)}: ${a}`:B}).filter(Boolean).join(j)}function Ui(o,e){return Lt(o.paginationInfo)+o.rows.filter(s=>{var t;return(t=s==null?void 0:s.fields)===null||t===void 0?void 0:t.length}).map((s,t)=>qa(s,t,e)+j+Ga(o.forms[t],e)).filter(Boolean).join(j)}function Wi(o){var e,s;return(s=(e=o.errorMessage)!==null&&e!==void 0?e:o.title)!==null&&s!==void 0?s:B}function Lt(o){if(o&&o.totalCount>o.rangeSize){const e=o.status;return e?e+j:B}return B}function Ga(o,e){let s=Zs(o.actions);return s&&(s=j+s),At(o)?Dt(o.fields,e)+s:o.formRows.filter(t=>t==null?void 0:t.columns.length).map(t=>t.columns.filter(a=>a==null?void 0:a.fields.length).map(a=>Dt(a.fields,e)).filter(Boolean).join(j)).filter(Boolean).join(j)+s}function qa(o,e,s){return`${(s.itemIterator||B).replace("{0}",`${e+1}`)}: ${Dt(o.fields,s)}`}function Dt(o,e){return o!=null&&o.length?o.filter(s=>s).map(s=>ji(s,e)).filter(Boolean).join(j):B}function ji(o,e){var s;const t=(s=o.label)!==null&&s!==void 0?s:B,a=t?`${t}: `:B;switch(o.displayType){case Ss.Text:return a+(o.value||B);case Ss.Link:return a+(e.linkField||B).replace("{0}",t);case Ss.Action:const r=o.action;return a+(r.voice?r.voice.text:r.label)||B;default:return t}}function Gi(o){if(o!=null&&o.length){const s=o.replace(Xe(zi),(a,r)=>String.fromCharCode(r)).replace(Xe(Ri),(a,r)=>{const i=Number.parseInt(`0x${r}`,16);return String.fromCharCode(i)});return ii(s).replace(Xe(Pi),B)}return B}function qi(o){var e;const s=[(e=o.voice)===null||e===void 0?void 0:e.text];switch(o.type){case f.Card:s.push(Yi(o.cards));break;case f.Form:case f.TableForm:s.push(Ki(o.forms));break}return s.push(Pt(o.actions)),s.push(Pt(o.globalActions)),s.filter(Boolean).join(j)}function Pt(o){return o!=null&&o.length?o.filter(e=>e.type!==R.SubmitForm).map(e=>e.voice&&e.voice.text).filter(Boolean).join(j):B}function Yi(o){return o!=null&&o.length?o.filter(e=>e.voice).map(e=>{var s;const t=[];return e.voice&&t.push((s=e.voice)===null||s===void 0?void 0:s.text),t.push(Pt(e.actions)),t.filter(Boolean).join(j)}).filter(Boolean).join(j):B}function Ki(o){return o!=null&&o.length?o.filter(Boolean).map(e=>e.voice&&e.voice.text).filter(Boolean).join(j):B}const Ya=o=>o.replaceAll(/([-.,?:;!]);/g,"$1"),Xi=o=>o.replaceAll(/\r|\n|<br\/?>/gim,j),Zi=[f.Attachment,f.Card,f.EditForm,f.Error,f.Form,f.Location,f.Postback,f.Raw,f.Table,f.TableForm,f.Text,f.TextStream],Js=o=>{const e=o.messagePayload.type;return Zi.includes(e)},Ji=o=>{let e=!0;const s=o.messagePayload;return s&&s.type===f.TextStream&&(e=!1),e};function Qs(o){if(!Ei(o))return!1;const s=o.messagePayload;return!ms(s)||s.actions&&!zt(s.actions)||s.globalActions&&!zt(s.globalActions)?!1:!!Qi(s)}function Qi(o){switch(o.type){case f.Attachment:return en(o);case f.Card:return sn(o);case f.CloseSession:case f.SessionClosed:return!0;case f.Location:return tn(o);case f.Postback:return an(o);case f.Text:return rn(o);case f.TextStream:return on(o);case f.Table:return Ka(o);case f.Form:return Xa(o);case f.TableForm:return pn(o);case f.EditForm:return ln(o);case f.FormSubmission:return cn(o);case f.InboundEvent:case f.OutboundEvent:return mn(o);case f.Status:return vn(o);case f.Command:return _n(o);case f.UpdateApplicationContextCommand:return kn(o);case f.GetDebugInfoCommand:return yn(o);case f.Error:return Sn(o)}return!1}function en(o){const e=o.attachment;return!!(e!=null&&e.type&&e.url)}function sn(o){let e=!1;if(o.layout&&o.cards.length){e=!0;for(const s of o.cards)if(!s.title||s.actions&&!zt(s.actions))return!1}return e}function tn(o){const e=o.location;return!!(e!=null&&e.latitude&&e.longitude)}function an(o){return!!o.postback}function rn(o){return!!o.text}function on(o){return typeof o.text=="string"&&!!o.streamState}function zt(o){for(const e of o)if(!(e.type&&(e.label&&typeof e.label=="string"||e.imageUrl&&typeof e.imageUrl=="string")))return!1;return!0}function nn(o){return Te(o)&&Te(o.profile)}function Ka(o){const e=o.headings,s=o.rows;return e&&e.length>0&&s&&s.length>0&&e.every(t=>fn(t))&&s.every(t=>Za(t))}function Xa(o){const e=o.forms;return e&&e.length>0&&e.every(s=>At(s)&&Za(s)||Wa(s))}function cn(o){return!!o.submittedFields}function pn(o){return Ka(o)&&Xa(o)}function ln(o){const e=o.fields,s=o.formColumns,t=o.formRows;return(e==null?void 0:e.length)>0&&e.every(a=>gn(a))&&typeof s=="number"&&s>0||(t==null?void 0:t.length)>0}function mn(o){return!!o.eventType&&!!o.eventVersion&&!!o.eventData}function gn(o){const e=o.displayType,s=o;return e&&Object.values($).includes(e)&&(dn(s)||Ja(o))}function dn(o){const e=o.id;let s=!1;switch(o.displayType){case $.SingleSelect:case $.MultiSelect:s=hn(o);break;case $.Toggle:s=bn(o);break;case $.DatePicker:case $.TimePicker:case $.TextInput:case $.NumberInput:s=!0}return s&&e!==void 0&&e.length>0}function hn(o){const e=o.layoutStyle,s=o.options;return e!==void 0&&typeof e=="string"&&e.length>0&&s!==void 0&&s.length>0&&s.every(t=>un(t))}function un(o){const e=o.label,s=o.value;return e!==void 0&&typeof e=="string"&&e.length>0&&s!==void 0}function bn(o){const e=o.valueOn,s=o.valueOff;return e!==void 0&&typeof e=="string"&&e.length>0&&s!==void 0&&typeof s=="string"&&s.length>0}function fn(o){const e=o.label;return e!==void 0&&e.length>0}function Za(o){const e=o.fields;return e&&e.length>0&&e.every(s=>Ja(s))}function Ja(o){return!!o.displayType&&gs(o)}const wn=Object.values(Ss);function gs(o){return o&&wn.includes(o.displayType)}function vn(o){return o.type===f.Status&&"status"in o}function _n(o){return o.type===f.Command&&"command"in o}const xn=Object.values(Cs);function kn(o){const{context:e,source:s}=o;return e!==void 0&&typeof e=="string"&&xn.includes(s)}function yn(o){return o.infoTypes!==void 0&&o.infoTypes.length>0}const Sn=o=>!!o.errorMessage,Qa=o=>o===!0||typeof o=="string"&&o.toLowerCase()==="true",Cn={Open:"open",Close:"close",Error:"error",Message:"message",MessageReceived:"message:received",MessageSent:"message:sent",State:"state"},E=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ts),Cn),Tt),Qe),ge),{CoreError:"CoreError"});class er{constructor(e){this.dispatcher=e,this.state=M.Closed}getState(){return this.state}isOpen(){return this.state===M.Open}isClosed(){return this.state===M.Closed}on(e,s){this.dispatcher.bind(e,s)}off(e,s){this.dispatcher.unbind(e,s)}setState(e){this.state=e,this.dispatcher.trigger(E.State,e)}}function Rt(o){return Error(o)}function Tn(o){return Promise.reject(Rt(o))}const Ot=navigator,sr=Ot==null?void 0:Ot.geolocation,tr=1e5,ar=o=>Math.round(o*tr)/tr;function Ft(){return sr?new Promise((o,e)=>{sr.getCurrentPosition(s=>{const t=s.coords,a=Object.assign(Object.assign({},t),{latitude:ar(t.latitude),longitude:ar(t.longitude)});o(a)},s=>{let t;switch(s.code){case s.POSITION_UNAVAILABLE:t=A.LocationNotAvailable;break;case s.TIMEOUT:t=A.LocationTimeout;break;case s.PERMISSION_DENIED:default:t=A.LocationNoAPI}e(Rt(t))},{enableHighAccuracy:!0,timeout:5e3})}):Tn(A.LocationNoAPI)}const En=-90,An=90,In=-180,Mn=180;function Ln(o){const{latitude:e,longitude:s}=o;return Ba(e)&&Ba(s)&&Fa(e,En,An)&&Fa(s,In,Mn)}const ds={AudioData:"uae:audiodata",AnalyserData:"uae:analyserdata",Silence:"uae:silence"};var rr=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Dn=()=>rr(void 0,void 0,void 0,function*(){if(!Pn())throw Error(X.RecognitionNoAPI);return zn()}),Pn=()=>{var o;return!!(!((o=navigator.mediaDevices)===null||o===void 0)&&o.getUserMedia)},zn=()=>rr(void 0,void 0,void 0,function*(){try{const o=yield navigator.mediaDevices.getUserMedia({audio:!0}),e=new AudioContext;return{context:e,streamNode:e.createMediaStreamSource(o)}}catch(o){throw Error(X.RecognitionNoAPI)}}),Rn=o=>{const e=`
class VoiceProcessor extends AudioWorkletProcessor {
    process(inputs) {
        this.port.postMessage(inputs[0][0]);
        return true;
    }
}

registerProcessor('${o}', VoiceProcessor);`;return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))};var et=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class Bt{static getInstance(){return this._instance||(this._instance=new Bt),this._instance}constructor(){this._workletUrl=Rn(or),this._isActive=!1,this._voiceBuffer=new Float32Array(st),this._bufferWrittenCount=0,this._isSilent=!1,this._silenceBuffer=[],this._micVolumeThreshold=.005,this._consecutiveSilentFrames=0,this._requiredSilentFrames=25,this._isFirstFrame=!0,this._filterBuffer=new Float32Array(0),this._emitter=ps(),this._onAudioMessage=e=>{if(this._startPromise&&(this._startPromise.resolve(),this._startPromise=void 0),this._isBufferFull()&&this._flushBuffer(),!e.data)return;const s=Array.from(e.data);this._detectSilence(s),this._appendToBuffer(e.data)}}start(){return et(this,void 0,void 0,function*(){if(this._isActive)return;this._isActive=!0;const e=yield Dn();this._context=e.context,this._streamNode=e.streamNode;const{analyserNode:s,processorNode:t}=yield this._startProcessing(e);this._analyserNode=s,this._workletNode=t,t.port.onmessage=this._onAudioMessage,this._startPromise=new cs,yield this._startPromise.promise})}stop(){return et(this,void 0,void 0,function*(){return this._stopProcessing()})}getAnalyser(){return this._analyserNode}isMicMuted(){return this._isSilent}on(e,s){this._emitter.bind(e,s)}_startProcessing(e){return et(this,void 0,void 0,function*(){const{context:s,streamNode:t}=e;try{yield s.audioWorklet.addModule(this._workletUrl)}catch(i){throw this.stop(),Error(X.RecognitionNoWebServer,{cause:i})}const a=new AudioWorkletNode(s,or),r=s.createAnalyser();return r.smoothingTimeConstant=On,r.fftSize=Fn,this._analyserUpdateTimerId=setInterval(()=>{this._processAnalyser()},Vn),t.connect(r).connect(a).connect(s.destination),{analyserNode:r,processorNode:a}})}_isBufferFull(){return this._bufferWrittenCount===st}_flushBuffer(){const e=this._bufferWrittenCount<st?this._voiceBuffer.slice(0,this._bufferWrittenCount):this._voiceBuffer;this._bufferWrittenCount=0,this._processBuffer(e)}_appendToBuffer(e){for(const s of e)this._voiceBuffer[this._bufferWrittenCount++]=s}_processBuffer(e){var s,t;const a=(t=(s=this._context)===null||s===void 0?void 0:s.sampleRate)!==null&&t!==void 0?t:Vt;try{const r=this._downsampleBuffer(e,a,Nn);this._emitter.trigger(ds.AudioData,r)}catch(r){this.stop()}}_downsampleBuffer(e,s,t){if(t===s)return e.buffer;if(t>s)throw Error();let a=[];switch(s){case Vt:a=Hn;break;case $n:a=Un;break;default:throw Error()}const r=s/t;let i,n,p;const l=this._isFirstFrame,c=this._filterBuffer;l?(i=Math.floor(e.length%r),n=e.length-i,p=i===0?Array.from(e):e.slice(0,n)):(i=Math.floor((e.length+c.length-a.length)%r),n=e.length+c.length-a.length-i,p=new Float32Array(c.length+n),p.set(c),p.set(e.slice(0,n),c.length));const m=Math.floor(n/r),h=new Int16Array(m),d=-1,u=32767;if(s===Vt)for(let b=a.length;b<p.length;b+=r){let v=0;for(let x=0;x<a.length;x++)v+=p[b-x]*a[x];const k=Math.max(Math.min(v,1),d)*u;h[(b-a.length)/r]=k}else{const b=[];for(let v=a.length;v<p.length;v++){let k=0;for(let x=0;x<a.length;x++)k+=p[v-x]*a[x];b[v-a.length]=k}for(let v=0;v<m;v++){const x=v*r,_=Math.floor(x)-3+1,C=Math.floor(x)+3;let g=0;for(let w=_;w<=C;w++){const y=w<0?b[0]:w>=b.length?b[b.length-1]:b[w];g+=y*Wn(3,x-w)}h[v]=Math.max(Math.min(g,1),d)*u}}return l?this._filterBuffer=e.slice(n-a.length-c.length):this._filterBuffer=e.slice(n-a.length-(c.length-a.length)),this._isFirstFrame=!1,h.buffer}_processAnalyser(){const e=this._analyserNode;if(e){const s=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(s),this._emitter.trigger(ds.AnalyserData,s)}}_detectSilence(e){if(this._silenceBuffer.push(...e),this._silenceBuffer.length<Bn)return;const s=this._silenceBuffer.splice(0,this._silenceBuffer.length);Ca(s)<this._micVolumeThreshold?(this._consecutiveSilentFrames++,this._consecutiveSilentFrames>=this._requiredSilentFrames&&!this._isSilent&&(this._isSilent=!0,this._emitter.trigger(ds.Silence,!0))):(this._isSilent&&(this._isSilent=!1,this._emitter.trigger(ds.Silence,!1)),this._consecutiveSilentFrames=0)}_stopProcessing(){return et(this,void 0,void 0,function*(){var e,s,t,a,r,i,n;this._isActive&&(this._isActive=!1,clearInterval(this._analyserUpdateTimerId),(e=this._startPromise)===null||e===void 0||e.reject(),this._startPromise=void 0,(s=this._workletNode)===null||s===void 0||s.disconnect(),(t=this._analyserNode)===null||t===void 0||t.disconnect(),(r=(a=this._streamNode)===null||a===void 0?void 0:a.mediaStream)===null||r===void 0||r.getAudioTracks().forEach(p=>{p.stop()}),(i=this._streamNode)===null||i===void 0||i.disconnect(),yield(n=this._context)===null||n===void 0?void 0:n.suspend(),this._workletNode=void 0,this._analyserNode=void 0,this._streamNode=void 0,this._isFirstFrame=!0,this._filterBuffer=new Float32Array(0),this._voiceBuffer=new Float32Array(st),this._bufferWrittenCount=0,this._isSilent=!1,this._consecutiveSilentFrames=0,this._silenceBuffer=[])})}}const or="oda-voice-processor-worklet",On=.4,Fn=256,st=4096,Bn=4096,Vn=33,Vt=48e3,$n=44100,Nn=16e3,Hn=[-25033838264794034e-21,-3645156113737857e-20,-11489993827892933e-21,393243788874656e-19,6998419352067277e-20,37556691270439976e-21,-476966455345305e-19,-.00011379935461751734,-8400957697117619e-20,4208817777607469e-20,.00016391587447478332,.00015508372993570357,-1253765788919669e-20,-.00021258262011091092,-.0002524059896175195,-51874329668708116e-21,.0002479230009768214,.00037351534477673157,.00016157590781788105,-.0002541085239198603,-.000510486865332593,-.0003246104617540939,.00021219136947965464,.0006488877825604561,.0005444416935293036,-.0001016639071691704,-.0007673001147209819,-.0008176720912938691,-972696982411551e-19,.0008376185852528038,.0011319450250252222,.0004008193339799052,-.0008262743020160207,-.0014643282305934196,-.0008183365045047033,.0006964471772153777,.001780467922489105,.0013489288090360295,-.00041122152287042,-.0020347535966250413,-.0019782994815083733,-6247794246099269e-20,.002171643809964705,.0026761621389245617,.00074944268608935,-.00212817775887288,-.003394541347147186,-.0016615884301227524,.001837545335885159,.004067170702246546,.0027936171643976352,-.001233420727213658,-.004610035314537476,-.004119319153202972,.00025459137646049936,.00492286494534436,.005588805700369816,.001150762425755883,-.004891042781491068,-.0071267634777626675,-.003021979039818941,.00438688631315642,.008631467181982988,.005385139236634672,-.003268406079325266,-.009973661255235284,-.008256256502745316,.0013719935383757782,.010993210336541666,.011651337116264694,.0015082475865128093,-.01148872195209017,-.015609515327517686,-.005671504441670989,.011188303272599716,.02024519058502148,.011637590928971467,-.009667754909210324,-.025878090076785515,-.020500381603699786,.006098908137700642,.033428666116203716,.03513487017573178,.001719739622764723,-.046085580848361105,-.06623078150315037,-.023349941728869696,.08292213207159124,.21069217442624302,.2973829711397418,.2973829711397419,.21069217442624305,.08292213207159124,-.023349941728869693,-.06623078150315037,-.046085580848361105,.0017197396227647225,.03513487017573178,.033428666116203716,.006098908137700641,-.020500381603699783,-.025878090076785508,-.009667754909210326,.011637590928971469,.020245190585021472,.011188303272599716,-.00567150444167099,-.015609515327517682,-.01148872195209017,.001508247586512809,.011651337116264699,.010993210336541666,.0013719935383757782,-.008256256502745314,-.009973661255235283,-.0032684060793252657,.00538513923663467,.008631467181982988,.004386886313156419,-.0030219790398189413,-.0071267634777626675,-.0048910427814910715,.0011507624257558842,.005588805700369813,.00492286494534436,.00025459137646049936,-.004119319153202973,-.004610035314537475,-.0012334207272136583,.002793617164397636,.004067170702246546,.0018375453358851592,-.0016615884301227509,-.0033945413471471847,-.0021281777588728797,.0007494426860893505,.0026761621389245612,.0021716438099647056,-6247794246099253e-20,-.001978299481508373,-.0020347535966250404,-.00041122152287042,.0013489288090360292,.0017804679224891048,.0006964471772153777,-.0008183365045047026,-.00146432823059342,-.0008262743020160207,.0004008193339799063,.0011319450250252222,.0008376185852528037,-9726969824115494e-20,-.0008176720912938694,-.0007673001147209783,-.00010166390716916983,.0005444416935293033,.0006488877825604562,.0002121913694796546,-.00032461046175409424,-.000510486865332593,-.00025410852391986036,.0001615759078178811,.0003735153447767315,.00024792300097682137,-5187432966870808e-20,-.0002524059896175194,-.00021258262011091095,-1253765788919669e-20,.0001550837299357036,.0001639158744747833,42088177776074685e-21,-8400957697117623e-20,-.00011379935461751733,-4769664553453051e-20,3755669127044002e-20,699841935206728e-19,393243788874656e-19,-11489993827892933e-21,-3645156113737856e-20,-2503383826479402e-20],Un=[-5044267067893139e-21,5738740247594612e-21,1611195555688156e-20,10560179594562795e-21,-1242816862904201e-20,-3084430704328611e-20,-18160396924882423e-21,2303124169528074e-20,5216612702894834e-20,2806026886746509e-20,-389608521587068e-19,-8174245278012476e-20,-4037543061985353e-20,619375276294956e-19,.00012143092661620545,55083199655424166e-21,-9401891583478883e-20,-.00017326981522755043,-7198069055926206e-20,.0001376274218691789,.00023946132645647525,9064030545698025e-20,-.00019557611633250834,-.0003223511502826996,-.00011036322783022617,.0002710935667931249,.00042440564349633953,.00013013140955365376,-.00036784896615780913,-.0005481886438481025,-.00014855826094166272,.0004899798946967381,.000696340560985472,.00016383778624615643,-.0006421263408051642,-.0008715631880363658,-.00017369118859371453,.000829476349448821,.0010766146787146871,.00017530890385814463,-.0010578310750603923,-.001314320458073489,-.0001652844648711556,.0013337004262191077,.0015876076783199174,.000139534308084411,-.0016644454627712116,-.001899573527380014,-9319422024995832e-20,.002058491185395933,.0022536018141979036,20477911370491685e-21,-.0025256449668619525,-.0026535487754524955,8552498376473957e-20,.0030775744811722015,.0031040297261921,-.00023314744969763122,-.003728529808331677,-.003610856230113392,.000432598472497653,.0044964472481822506,.004181705019767344,-.0006966685466235378,-.005404666489478738,-.00482715710731867,.0010418556659416306,.006484667519607787,.00556235368742558,-.0014902159613265254,-.007780573986407925,-.0064097301786953595,.002072517010858728,.009356870546119134,.0074037416266333166,-.00283386009764953,-.011312323822665827,-.008599512596140524,.003844300507349054,.013806774337071994,.01008985372973804,-.005220460312862638,-.01711716324115331,-.01204196749753927,.007174046245357611,.021768247992024713,.01478690833035584,-.010136389804721707,-.02888735624896028,-.019078400739739057,.015146805312378952,.041410446665863104,.027068163980255515,-.025512027260482153,-.07011218378743589,-.04829678433503421,.06041368701604651,.21199607414538668,.3213532652447261,.3213532652447261,.21199607414538668,.060413687016046526,-.04829678433503422,-.07011218378743589,-.025512027260482153,.027068163980255515,.041410446665863104,.015146805312378952,-.019078400739739057,-.02888735624896028,-.010136389804721703,.01478690833035584,.021768247992024713,.007174046245357611,-.01204196749753927,-.01711716324115331,-.005220460312862639,.010089853729738038,.013806774337071994,.0038443005073490553,-.008599512596140524,-.011312323822665827,-.0028338600976495314,.007403741626633317,.009356870546119134,.002072517010858727,-.006409730178695359,-.007780573986407925,-.001490215961326526,.005562353687425577,.006484667519607787,.0010418556659416256,-.004827157107318673,-.005404666489478739,-.0006966685466235378,.004181705019767345,.004496447248182251,.0004325984724976533,-.003610856230113392,-.003728529808331677,-.0002331474496976315,.0031040297261921003,.003077574481172201,8552498376473897e-20,-.002653548775452496,-.002525644966861952,2047791137049164e-20,.002253601814197904,.002058491185395933,-9319422024995909e-20,-.001899573527380014,-.0016644454627712118,.00013953430808441038,.0015876076783199174,.0013337004262191077,-.0001652844648711556,-.0013143204580734896,-.0010578310750603925,.00017530890385814333,.0010766146787146878,.0008294763494488195,-.00017369118859371463,-.00087156318803637,-.0006421263408051633,.00016383778624615698,.0006963405609854716,.0004899798946967381,-.00014855826094166245,-.0005481886438481027,-.00036784896615780924,.00013013140955365368,.00042440564349633964,.00027109356679312505,-.00011036322783022619,-.0003223511502826996,-.00019557611633250842,9064030545698017e-20,.00023946132645647525,.00013762742186917883,-7198069055926207e-20,-.0001732698152275505,-9401891583478886e-20,5508319965542416e-20,.00012143092661620549,6193752762949557e-20,-4037543061985352e-20,-8174245278012477e-20,-38960852158706805e-21,28060268867465078e-21,52166127028948336e-21,2303124169528077e-20,-18160396924882423e-21,-30844307043286126e-21,-12428168629042018e-21,10560179594562806e-21,1611195555688157e-20,5738740247594605e-21,-5044267067893138e-21],Wn=(o,e)=>{let s;if(e===0)s=1;else if(Math.abs(e)>=o)s=0;else{const t=Math.PI*e;s=o*Math.sin(t)*Math.sin(t/o)/Math.pow(t,2)}return s};var es=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class $t{static getInstance(){return this._service||(this._service=new $t),this._service}constructor(){this._userAudioService=Bt.getInstance(),this._isActive=!1,this._streamBuffer=[],this._onVoiceData=e=>{try{this._sendBuffer(e)}catch(s){this._notifyError(X.RecognitionProcessingFailure),this._endRecognition()}},this._onAnalyserData=e=>{var s;(s=this._dispatcher)===null||s===void 0||s.trigger(Qe.ASRVisualData,e)},this._onOpen=()=>es(this,void 0,void 0,function*(){var e;if(this._config.tokenGenerator){const s=yield this._authService.get();(e=this._connection)===null||e===void 0||e.send(`Bearer ${s.token}`)}this._sendPreConnectionBuffer()}),this._onClose=()=>{this._isActive&&this._endRecognition()},this._onMessage=e=>{try{const s=JSON.parse(e.data);if(!s.event&&s.code)return;const t=Kn(s);this._onResponse(t)}catch(s){this._notifyError(X.RecognitionProcessingFailure),this._endRecognition()}},this._onError=()=>{var e;this._isConnected()&&(this._notifyError(X.RecognitionProcessingFailure),(e=this._connection)===null||e===void 0||e.close())},this._userAudioService.on(ds.AnalyserData,this._onAnalyserData),this._userAudioService.on(ds.AudioData,this._onVoiceData)}startRecognition(){return es(this,void 0,void 0,function*(){var e;if(!this._isActive){if(this._isActive=!0,this._connection){const s=this._connection.readyState;if(s===M.Closing||s===M.Connecting)return}try{yield this._userAudioService.start(),(e=this._dispatcher)===null||e===void 0||e.trigger(Qe.ASRStart),this._url||(yield this._buildServerURL()),this._connection=this._getSpeechServerConnection(this._url)}catch(s){throw this._stopProcessing(),s}}})}stopRecognition(){return es(this,void 0,void 0,function*(){return this._stopProcessing()})}setConfig(e){return es(this,void 0,void 0,function*(){return e.recognitionLocale||(e.recognitionLocale=Ee.EN_US),e.tokenGenerator&&(this._authService=Ze.getInstance()),this._config=e,this._dispatcher=e.dispatcher,this._buildServerURL()})}setLocale(e){Na(e)&&this._config&&(this._config.recognitionLocale=e,this._buildServerURL().catch(s=>{console.warn("[WebSDK][RecognitionService] - Failed to get server URL",s)}))}_sendBuffer(e){var s;this._isConnected()&&!this._streamBuffer.length?(s=this._connection)===null||s===void 0||s.send(e):this._streamBuffer.push(e)}_onResponse(e){var s;(s=this._dispatcher)===null||s===void 0||s.trigger(Qe.ASRResponse,e),["final","error"].includes(e.type)&&this._endRecognition()}_buildServerURL(){return es(this,void 0,void 0,function*(){this._url=yield jn(this._config,this._authService)})}_getSpeechServerConnection(e){var s;try{const t=new WebSocket(e);return t.onopen=this._onOpen,t.onclose=this._onClose,t.onmessage=this._onMessage,t.onerror=this._onError,t}catch(t){const a=new Error(X.RecognitionNotReady);throw(s=this._dispatcher)===null||s===void 0||s.trigger(Qe.ASRError,a),a}}_notifyError(e){var s;(s=this._dispatcher)===null||s===void 0||s.trigger(Qe.ASRResponse,{requestId:"",text:e,type:"error"})}_sendPreConnectionBuffer(){var e;if(this._isConnected())for(;this._streamBuffer.length;){const s=this._streamBuffer.shift();s&&((e=this._connection)===null||e===void 0||e.send(s))}}_isConnected(){var e;return((e=this._connection)===null||e===void 0?void 0:e.readyState)===M.Open}_endRecognition(){this._stopProcessing().catch(e=>{console.warn("[WebSDK][EndRecognition]",e)})}_stopProcessing(){return es(this,void 0,void 0,function*(){var e;if(!this._isActive)return;this._isActive=!1;const s=this._connection;this._isConnected()&&(s==null||s.send("Done")),s==null||s.close(),this._connection=void 0,this._streamBuffer=[],yield this._userAudioService.stop(),(e=this._dispatcher)===null||e===void 0||e.trigger(Qe.ASRStop)})}}const jn=(o,e)=>es(void 0,void 0,void 0,function*(){if(o.tokenGenerator){const s=yield e.get();o.channelId=s.getClaim("channelId"),o.userId=s.getClaim("userId")}if(!o.channelId||!o.userId)throw Error(X.RecognitionNotReady);return Yn(o)}),Gn="/voice/stream/recognize",qn="generic";function Yn(o){const{channelId:e,userId:s,tokenGenerator:t,URI:a}=o,r=`ws${o.isTLS?"s":""}://`,i=`${Gn}/${o.recognitionLocale}/${qn}`,n=Object.assign({channelId:e,userId:s,encodeURI:"audio/raw"},t&&{jwtInBody:"true"});return ys(r,a,n,i)}function Kn(o){let e,s;const t=o.requestId,a=o.nbest;return o.event==="partialResult"?(e="partial",s=a[0].utterance):a!=null&&a.length?(e="final",s=a[0].utterance):(e="error",s=o.resultCode?X.RecognitionTooMuchSpeechTimeout:X.RecognitionNoSpeechTimeout),{requestId:t,type:e,text:s,message:o}}var ir=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};let nr=1,cr=1,pr=1;const Is=window,lr=Is.addEventListener,se=Is.speechSynthesis,Nt=Is.SpeechSynthesisUtterance,hs=Is.navigator,Ht=clearTimeout;class Xn{constructor(){if(this._isActive=!1,this._dispatcher=ps(),!Is||!se||!Nt)throw Error("TTSNoWebAPI");gr().then(e=>{this._voice=e}).catch(()=>{this._voice=void 0}),lr("beforeunload",e=>{se.cancel(),Ht(this._pauser),delete e.returnValue}),sc()}setConfig(e){return Promise.resolve()}speak(e){if(this._voice){const s=new Nt(e);s.voice=this._voice,s.pitch=nr,s.rate=cr,s.volume=pr,se.paused&&se.resume(),this._isActive||(this._isActive=!0,this._dispatcher.trigger(ge.TTSStart)),se.speak(s),this._voice.localService||(Ht(this._pauser),dr(t=>this._pauser=t))}}cancel(){se.speaking&&(se.cancel(),Ht(this._pauser))}getVoices(){return ir(this,void 0,void 0,function*(){return Ut()})}setVoice(e){return ir(this,void 0,void 0,function*(){return ec(e).then(s=>{var t,a,r;this._voice=s,nr=(t=s.pitch)!==null&&t!==void 0?t:1,cr=(a=s.rate)!==null&&a!==void 0?a:1,pr=(r=s.volume)!==null&&r!==void 0?r:1})})}getVoice(){return this._voice}on(e,s){this._dispatcher.bind(e,s)}off(e,s){this._dispatcher.unbind(e,s)}}function Ut(){return new Promise(o=>{mr(o),se.addEventListener("voiceschanged",()=>{mr(o)})})}function mr(o){const e=se.getVoices();if(e.length){const s=Jn(e);o(Qn(s))}}const Zn=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox"],Jn=o=>o.filter(e=>!Zn.includes(e.name));function Qn(o){return Array.isArray(o)?o:o._list}function gr(){return Ut().then(o=>{let e;const s=o.filter(t=>t.default);if(s.length===1&&(e=s[0]),!e){const t=hs==null?void 0:hs.language;t&&(e=o.find(a=>tt(a.lang,t)))}if(!e){const t=hs==null?void 0:hs.language.substring(0,2);t&&(e=o.find(a=>Wt(a.lang).includes(t)))}return e||(e=o[0]),e})}function ec(o){const e=o.map(s=>Object.assign({lang:"",name:""},s));return Ut().then(s=>{for(const t of e)for(const a of s)if(tt(t.lang,a.lang)&&tt(t.name,a.name))return a;for(const t of e)for(const a of s)if(tt(t.lang,a.lang))return a;for(const t of e)for(const a of s)if(a.lang.includes(t.lang))return a;return gr()})}function sc(){lr("click",()=>{se&&(se.cancel(),se.resume(),se.speak(new Nt(" ")))},{once:!0})}const tc=1e4;function dr(o){const e=setTimeout(()=>{se.speaking&&(se.pause(),se.resume(),dr(o))},tc);o(e)}function tt(o,e){return Wt(o)===Wt(e)}const Wt=o=>o.toLowerCase();var at=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const ac=32768,rc=4096,oc=250,jt="ended",hr="suspended";function ic(o){let e=o,s,t,a=[],r=()=>{},i,n=0,p=!0;const l=_=>at(this,void 0,void 0,function*(){i=i?nc(i,_):ur(_),yield d(),v()}),c=()=>at(this,void 0,void 0,function*(){s&&(u(),yield b(),r())}),m=_=>{e=Object.assign(Object.assign({},e),_)},h=_=>{r=_},d=()=>at(this,void 0,void 0,function*(){s||(s=new AudioContext),s.state===hr&&(yield s.resume())}),u=()=>{a.forEach(_=>{_.removeEventListener(jt,k),_.stop(),_.disconnect()}),a=[]},b=()=>at(this,void 0,void 0,function*(){(s==null?void 0:s.state)!==hr&&(yield s==null?void 0:s.suspend()),i=new Float32Array,p=!0,n=0,a=[]}),v=()=>{if(!s||!i.length)return;if(p&&i.length<rc){p=!1;return}p=!1;const _=i.length,C=new AudioBuffer({sampleRate:e.sampleRate,length:_});for(let g=0;g<e.numChannels;g++){const w=C.getChannelData(g);for(let y=0;y<_;y++)w[y]=i[y]}n<s.currentTime&&(n=s.currentTime),t&&t.removeEventListener(jt,k),t=new AudioBufferSourceNode(s,{buffer:C}),t.connect(s.destination),t.addEventListener(jt,k),t.start(n),n+=C.duration,a.push(t),i=new Float32Array},k=()=>{n=0,setTimeout(()=>{n||(b().catch(()=>{}),r())},oc)};return(()=>{const _=document.body,C=["touchend","click"],g=3;let w=!0,y=0;const D=()=>{w&&(s=new AudioContext,s.state!=="closed"&&s.resume().then(()=>{Y(),y=0}).catch(N=>{y++,y<g?D():console.error(N)}))},Y=()=>{C.forEach(N=>{_.removeEventListener(N,D)}),w=!1};C.forEach(N=>{_.addEventListener(N,D)})})(),{play:l,stop:c,config:m,onEnd:h}}const nc=(o,e)=>new Float32Array([...o,...ur(e)]),ur=o=>Float32Array.from(new Int16Array(o),e=>e/ac);var ze=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const cc="tts",br="speak",pc="voices",Gt="channelId",qt="userId",lc="https://",Yt=44,mc=/<[\w]+/g,fr=br;class gc{constructor(e){this._host="",this._voices=[],this._waveHeader=!1,this._isActive=!1,this._aborter=new AbortController,this._dispatcher=ps(),this._config=s=>{this._params=s,this._host=`${s.URI}/${cc}/`,s.tokenGenerator&&(this._authService=Ze.getInstance())},this._loadTTS=s=>ze(this,void 0,void 0,function*(){let t=s;s.match(mc)&&(t=`<${fr}>${s}</${fr}>`);const a=Object.assign({text:encodeURIComponent(t),stream:"chunked"},this._voice&&{voice:this._voice.name}),r=yield this._getURL(br,a);return this._getResponse(r)}),this._getURL=(s,...t)=>ze(this,[s,...t],void 0,function*(a,r={}){const i=this._params;if(i)if(i.tokenGenerator){const n=yield this._authService.get();r[Gt]=n.getClaim(Gt),r[qt]=n.getClaim(qt)}else r[Gt]=i.channelId,r[qt]=i.userId;return ys(lc,this._host,r,a)}),this._getResponse=(s,...t)=>ze(this,[s,...t],void 0,function*(a,r=!0){var i;const n=r?this._aborter.signal:void 0,p={};if(!((i=this._params)===null||i===void 0)&&i.tokenGenerator){const l=yield this._authService.get();p.Authorization=`Bearer ${l.token}`}return fetch(a,{signal:n,headers:p})}),this._streamAudio=s=>{if(s!=null&&s.body){const t=s.body.getReader();this._resetChunkProcessor(),this._isActive||(this._isActive=!0,this._dispatcher.trigger(ge.TTSStart)),this._streamChunk(t)}},this._streamChunk=s=>ze(this,void 0,void 0,function*(){try{const{done:t,value:a}=yield s.read();if(t){this._ttsQueue.next();return}let r=a.buffer;if(this._waveHeader||(this._waveHeader=!0,this._player.config(fc(r)),r=hc(r)),this._oddByte!==void 0){const i=new Uint8Array(r),n=new Uint8Array(i.length+1);n[0]=this._oddByte,n.set(i,1),r=Kt(n),this._oddByte=void 0}if(r.byteLength%2){const i=new Uint8Array(r),n=new Uint8Array(i.length-1);n.set(i.slice(0,i.length-1)),r=Kt(n),this._oddByte=i[i.length-1]}this._player.play(r),this._streamChunk(s)}catch(t){this._ttsQueue.next()}}),this._resetChunkProcessor=()=>{this._waveHeader=!1,this._oddByte=void 0},this._setInactive=()=>{this._isActive&&(this._isActive=!1,this._dispatcher.trigger(ge.TTSStop))},this._setDefaultVoice=()=>ze(this,void 0,void 0,function*(){const s=yield this.getVoices();this._voice=s.find(t=>t.default)}),this._config(e),this._ttsQueue=dc(this._streamAudio,()=>{}),this._player=ic({sampleRate:22050,numChannels:1}),this._player.onEnd(this._setInactive),this._setDefaultVoice().catch(()=>{}),window.addEventListener("beforeunload",()=>{this.cancel()})}setConfig(e){return ze(this,void 0,void 0,function*(){this._config(e),this._voices=[],yield this._setDefaultVoice()})}speak(e){typeof e!="string"||!e.trim().length||this._ttsQueue.push(this._loadTTS(e))}cancel(){this._aborter.abort(),this._aborter=new AbortController,this._ttsQueue.cancel(),this._isActive&&this._player.stop().catch(()=>{})}getVoices(){return ze(this,void 0,void 0,function*(){let e=this._voices;if(e.length)return e;if(this._voicesPromise)return this._voicesPromise;const s=()=>{this._voicesPromise=void 0};return this._voicesPromise=this._getURL(pc).then(t=>ze(this,void 0,void 0,function*(){try{return e=((yield(yield this._getResponse(t,!1)).json()).voices||[]).map(i=>({name:i.name,lang:Ms(i.culture),default:!!i.default})),this._voices=e,e}catch(a){return e}})).catch(()=>e),setTimeout(s),this._voicesPromise})}getVoice(){return this._voice}setVoice(e){return ze(this,void 0,void 0,function*(){if(!e||!Array.isArray(e)||!e.length)throw Error("TTSEmptyParam");if(this._voice&&e.length===1&&!e[0].name&&Ms(e[0].lang)===this._voice.lang)return;const s=yield this.getVoices();if(!s.length)throw Error("TTSNoVoices");if(!e.find(a=>{var r;let i,n=!1;if(a.name){const p=Ms(a.name);i=s.find(l=>p===Ms(l.name))}if(!i&&a.lang){const p=Ms(a.lang);let l=s.filter(c=>p===c.lang);l.length||(l=s.filter(c=>p===c.lang.split("-")[0])),i=(r=l.find(c=>c.default))!==null&&r!==void 0?r:l[0]}return i&&(this._voice=i,n=!0),n}))throw Error("TTSNoMatch")})}on(e,s){this._dispatcher.bind(e,s)}off(e,s){this._dispatcher.unbind(e,s)}}const dc=(o,e)=>{const s=[],t=n=>{n.catch(()=>{const p=s.indexOf(n);p>0&&s.splice(p,1)}),s.push(n),s.length===1&&a()},a=()=>{s.length&&s[0].then(o).catch(e)};return{push:t,cancel:()=>{s.length=0},next:()=>{s.shift(),a()}}},Kt=o=>o.buffer.slice(o.byteOffset,o.byteLength+o.byteOffset),hc=o=>{const e=new Uint8Array(o),s=new Uint8Array(e.length-Yt);return s.set(e.slice(Yt,e.length)),Kt(s)},uc=22,bc=24,fc=o=>{const e=new DataView(o,0,Yt),s=!0,t=e.getUint16(uc,s),a=e.getUint32(bc,s);return{numChannels:t,sampleRate:a}},Ms=o=>o.toLowerCase();var wr=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const vr=1024,wc=25*vr*vr,vc=4,_c=200,xc=413,kc=415,yc="Authorization",Sc="x-oda-meta-file-authType",Cc="x-oda-meta-file-isProtected",Tc="x-oda-meta-file-size",Ec="True",Ac="ChannelClientAuth",Ic="/chat/v1/attachments",_r="channelId",xr="userId";class Xt{static getInstance(){return this._service||(this._service=new Xt),this._service}setConfig(e){return wr(this,void 0,void 0,function*(){if(this._params=e,e.tokenGenerator){this._authService=Ze.getInstance();const s=yield this._authService.get();e[_r]=s.getClaim(_r),e[xr]=s.getClaim(xr)}this._URL=Mc(e)})}upload(e,s){return wr(this,void 0,void 0,function*(){if(!this._URL)throw Error(A.UploadNotAvailable);const t=e.size;if(t===0)throw Error(A.UploadZeroSize);if(t>wc)throw Error(A.UploadMaxSize);const a=new XMLHttpRequest,r=new Promise((n,p)=>{const l=()=>p(Error(A.UploadNetworkFail));Ks(a,"readystatechange",()=>{if(a.readyState===vc)switch(a.status){case _c:{const c=JSON.parse(a.responseText);n(c);break}case xc:p(Error(A.UploadMaxSize));break;case kc:p(Error(A.UploadBadFile));break;default:l()}}),Ks(a,"abort",l),Ks(a,"error",l),Ks(a,"timeout",l)}),i={file:e,options:s};if(this._params.tokenGenerator){const n=yield this._authService.get();i.token=n.token}return this._send(a,i),r})}_send(e,{file:s,options:t,token:a}){const r=new FormData;r.append("attachment",s,encodeURI(s.name)),e.open("POST",this._URL),Je(e,Tc,s.size.toString()),a&&(Je(e,yc,`Bearer ${a}`),this._params.enableAttachmentSecurity&&(Je(e,Cc,Ec),Je(e,Sc,Ac))),e.send(r),t!=null&&t.onInitUpload&&t.onInitUpload(e)}}function Mc(o){const e=`http${o.isTLS?"s":""}://`,{URI:s,channelId:t,userId:a}=o;return ys(e,s,{channelId:t,userId:a},Ic)}var Ls=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Lc=5,Zt=200,kr=300;class Dc extends er{constructor(e){super(e.dispatcher),this._openPromise=null,this._closePromise=null,this._pollErrorCount=0,this.url=e.url,this.authService=e.authService}open(){return Ls(this,void 0,void 0,function*(){if(!this.isOpen()){if(navigator.onLine)return this._connect();throw Error(A.NetworkOffline)}})}close(){return Ls(this,void 0,void 0,function*(){if(!this.isClosed())return this._disconnect()})}send(e){return Ls(this,void 0,void 0,function*(){return new Promise((s,t)=>{if(this.isOpen()){const a=new XMLHttpRequest;a.open("POST",this.url),Je(a,"Content-Type","application/json"),a.onload=()=>{a.status>=Zt&&a.status<kr?s(e):t(Error(a.responseText))},a.onerror=()=>{t(Error(A.NetworkFailure))},this._sendRequest(a,JSON.stringify(e)).catch(t)}else t(Error(A.ConnectionNone))})})}updateConnectionUrl(e){this.url=$a(e.URI,{channelId:e.channelId,userId:e.userId},e.isTLS)}_connect(){return Ls(this,void 0,void 0,function*(){var e;if(!this._openPromise){this._openPromise=new cs,this.setState(M.Connecting);try{yield this._openConnection(),this._onOpen(),this._poll()}catch(s){this._openPromise&&(this._openPromise.reject(s),this._openPromise=null),this._onClose()}}return(e=this._openPromise)===null||e===void 0?void 0:e.promise})}_disconnect(){return this._closePromise||(this._xhr.abort(),this._closePromise=new cs,this.setState(M.Closing),setTimeout(()=>{this._onClose()},100)),this._closePromise.promise}_openConnection(){return new Promise((e,s)=>{const t=new XMLHttpRequest;t.open("POST",this.url),Je(t,"Content-Type","application/json"),t.onload=()=>{t.status>=Zt&&t.status<kr?e():s(Error(t.responseText))},t.onerror=()=>{s(Error(A.NetworkFailure))},this._sendRequest(t,JSON.stringify(Ua)).catch(a=>{s(a)})})}_poll(){this.isOpen()&&(this._pollErrorCount>=Lc&&(this._pollErrorCount=0,this.close().catch(()=>{})),this._xhr=new XMLHttpRequest,this._xhr.open("GET",this.url),this._xhr.onload=()=>{this._pollErrorCount=0,this._xhr.status===Zt&&this._onMessages(this._xhr.responseText),this._poll()},this._xhr.onerror=()=>{this._pollErrorCount++,this._poll()},this._sendRequest(this._xhr).catch(()=>{this._poll()}))}_sendRequest(e,s){return Ls(this,void 0,void 0,function*(){if(this.authService){const t=yield this.authService.get();Je(e,"Authorization",`Bearer ${t.token}`)}e.send(s)})}_onMessages(e){try{JSON.parse(e).forEach(t=>{this._onMessage(JSON.parse(t))})}catch(s){this._onError(s)}}_onOpen(){var e,s;(e=this._openPromise)===null||e===void 0||e.resolve(),this._openPromise=null,(s=this._closePromise)===null||s===void 0||s.reject(),this._closePromise=null,this.setState(M.Open),this.dispatcher.trigger(E.Open,void 0)}_onClose(){var e;(e=this._closePromise)===null||e===void 0||e.resolve(),this._closePromise=null,this._openPromise=null,this.setState(M.Closed),this.dispatcher.trigger(E.Close,void 0)}_onMessage(e){this.dispatcher.trigger(E.Message,e),this.dispatcher.trigger(E.MessageReceived,e);const s=e.messagePayload;if(s.type===f.ExecuteApplicationActionCommand){const t=s;this.dispatcher.trigger(t.actionType,t)}}_onError(e){this.dispatcher.trigger(E.Error,e)}}var us=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Pc=1e4,zc=3e4,Rc=1e4,Oc=1006,Fc=3e6;class Bc extends er{constructor(e){super(e.dispatcher),this._openPromise=null,this._closePromise=null,this._isExplicitClose=!1,this._isPongReceived=!1,this._isTokenValid=!1,this._retryAttempt=0,this._reconnectAttempted=!1,this._openConnection=()=>{try{this._ws=new WebSocket(this.url),this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSError,this._ws.onmessage=this._onWSMessage}catch(s){this._retryConnection()}},this._onWSOpen=()=>us(this,void 0,void 0,function*(){this._reconnectAttempted=!1,this.authService&&(yield this._authenticateConnection()),this.setState(M.Open),this._onOpen()}),this._onWSClose=s=>{this._stopMonitors(),this._isExplicitClose?(this.setState(M.Closed),this._rejectAndCloseConnection(A.ConnectionExplicitClose,s)):this.authService&&!this._isTokenValid&&s.code!==Oc?(this.setState(M.Closed),this._rejectAndCloseConnection(A.AuthExpiredToken,s)):this._reconnectAttempted||this._retryConnection(s)},this._onWSError=s=>{this._retryConnection(),this._reconnectAttempted=!0,this._onError(s)},this._onWSMessage=s=>{try{const t=JSON.parse(s.data);if(Mi(t))this._isPongReceived=!0;else if(Nc(t)&&this._suggestionPromise)this._suggestionPromise.resolve(t.suggestions);else{this.dispatcher.trigger(E.Message,t),this.dispatcher.trigger(E.MessageReceived,t);const a=t.messagePayload;if(a.type===f.ExecuteApplicationActionCommand){const r=a;this.dispatcher.trigger(r.actionType,r)}}}catch(t){this._onError(t)}},this._onError=s=>{this.dispatcher.trigger(E.Error,s)},this._ws=null,this.url=e.url,this.authService=e.authService,this._retryInterval=e.retryInterval,this._retryMaxAttempts=e.retryMaxAttempts}open(){return us(this,void 0,void 0,function*(){if(!this.isOpen()){if(navigator.onLine)return this._openPromise||(this._openPromise=new cs,this.setState(M.Connecting),this._openConnection()),this._openPromise.promise;throw Error(A.NetworkOffline)}})}close(){return us(this,void 0,void 0,function*(){var e;if(!this.isClosed())return this._isExplicitClose=!0,clearTimeout(this._retryMonitor),this._closePromise||((e=this._ws)===null||e===void 0||e.close(),this._closePromise=new cs,this.setState(M.Closing)),this._closePromise.promise})}send(e){return us(this,void 0,void 0,function*(){var s;if(((s=this._ws)===null||s===void 0?void 0:s.readyState)!==M.Open)throw Error(A.ConnectionNone);this._isTokenValid=!0;try{return this._ws.send(JSON.stringify(e)),Ii(e)||(this.dispatcher.trigger(E.Message,e),this.dispatcher.trigger(E.MessageSent,e)),Promise.resolve(e)}catch(t){throw Error(A.NetworkFailure)}})}updateConnectionUrl(e){this.url=Va(e.URI,{channelId:e.channelId,userId:e.userId},e.isTLS,e.channel)}setSuggestionPromise(e){this._suggestionPromise=e}_retryConnection(e){this.setState(M.Connecting),this._retryAttempt<this._retryMaxAttempts?(this._retryAttempt++,this._retryMonitor=setTimeout(this._openConnection,this._retryInterval)):(this.setState(M.Closed),this._rejectAndCloseConnection(A.NetworkFailure,e))}_rejectAndCloseConnection(e,s){var t;(t=this._openPromise)===null||t===void 0||t.reject(Error(e)),this._openPromise=null,this._onClose(s)}_authenticateConnection(){return us(this,void 0,void 0,function*(){var e;this._isTokenValid=!1;try{const s=yield this.authService.get();yield this.send($c(s.token)),setTimeout(()=>this._isTokenValid=!0,Pc)}catch(s){(e=this._openPromise)===null||e===void 0||e.reject(Error(s)),this._openPromise=null;try{yield this.close()}catch(t){}}})}_onOpen(){var e,s;this._stopMonitors(),clearTimeout(this._retryMonitor),this._heartBeatMonitor=this._startHeartbeatMechanism(),this._sessionRefreshMonitor=Vc(this),this._retryAttempt=0,this._isExplicitClose=!1,this._isTokenValid=!1,(e=this._openPromise)===null||e===void 0||e.resolve(),this._openPromise=null,(s=this._closePromise)===null||s===void 0||s.reject(),this._closePromise=null,this.dispatcher.trigger(E.Open,void 0)}_onClose(e){var s;this._retryAttempt=0,this._isExplicitClose=!1,this._isTokenValid=!1,(s=this._closePromise)===null||s===void 0||s.resolve(),this._closePromise=null,this.dispatcher.trigger(E.Close,e)}_startHeartbeatMechanism(){return setInterval(()=>{this.send(Ua).then(()=>{this._isPongReceived=!1,this._startPongMonitor()}).catch(()=>{})},zc)}_startPongMonitor(){this._pongMonitor=setTimeout(()=>{this.isOpen()&&!this._isPongReceived&&Jt(this)},Rc)}_stopMonitors(){clearTimeout(this._sessionRefreshMonitor),clearInterval(this._heartBeatMonitor),clearTimeout(this._pongMonitor)}}function Vc(o){return setTimeout(()=>{Jt(o)},Fc)}function Jt(o){return us(this,void 0,void 0,function*(){try{yield o.close(),yield o.open()}catch(e){Jt(o)}})}function $c(o){return{state:{token:o,tokenType:Ti.JWT,type:Xs.Auth}}}const Nc=o=>Te(o)&&"suggestions"in o;var yr=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Hc=3e5;class Uc{constructor(e){this._options=e,this._upgradeToWebSocketMonitor=0,this._attemptWebSocketUpgrade=()=>yr(this,void 0,void 0,function*(){try{yield this._currentConnection.close(),this._currentConnection=this._wsConnection,yield this.open()}catch(s){}}),e.isLongPoll&&(this._options.retryInterval=2e3,this._options.retryMaxAttempts=5),this._dispatcher=e.dispatcher,this._wsConnection=new Bc({authService:e.authService,url:Va(e.baseURL,e.searchParams,e.isTLS,e.channel),retryInterval:e.retryInterval,retryMaxAttempts:e.retryMaxAttempts,dispatcher:this._dispatcher}),this._currentConnection=this._wsConnection}open(){return yr(this,void 0,void 0,function*(){try{yield this._currentConnection.open(),this._options.isLongPoll&&this._currentConnection===this._wsConnection&&this._stopLongPolling()}catch(e){if(this._options.isLongPoll&&this._currentConnection!==this._longPollConnection){this._currentConnection=this._createLongPollConnection(),yield this._currentConnection.open(),this._startUpgradeToWebSocketTimer();return}throw e}})}close(){return clearInterval(this._upgradeToWebSocketMonitor),this._currentConnection.close()}send(e){return this._currentConnection.send(e)}isOpen(){return this._currentConnection.isOpen()}isClosed(){return this._currentConnection.isClosed()}getState(){return this._currentConnection.getState()}updateConnectionUrl(e){var s;this._options=Object.assign(Object.assign({},this._options),{baseURL:e.URI,searchParams:{channelId:e.channelId,userId:e.userId},isTLS:e.isTLS,channel:e.channel}),this._wsConnection.updateConnectionUrl(e),(s=this._longPollConnection)===null||s===void 0||s.updateConnectionUrl(e)}on(e,s){this._dispatcher.bind(e,s)}off(e,s){this._dispatcher.unbind(e,s)}setSuggestionPromise(e){this._wsConnection.setSuggestionPromise(e)}_stopLongPolling(){var e;clearInterval(this._upgradeToWebSocketMonitor),!((e=this._longPollConnection)===null||e===void 0)&&e.isOpen()&&this._longPollConnection.close()}_createLongPollConnection(){return this._longPollConnection||(this._longPollConnection=new Dc({url:$a(this._options.baseURL,this._options.searchParams,this._options.isTLS),authService:this._options.authService,dispatcher:this._dispatcher})),this._longPollConnection}_startUpgradeToWebSocketTimer(){this._upgradeToWebSocketMonitor=setInterval(()=>{this._attemptWebSocketUpgrade()},Hc)}}const Wc={isLongPoll:!1,isTLS:!0};var bs=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const jc=30,Gc=1e4,qc=5,Yc=1e3,Kc=5e3;class Xc{constructor(e){this._onOnline=()=>{this.open().catch(t=>{var a;(a=this._config.dispatcher)===null||a===void 0||a.trigger(E.Error,t)})},this._onOffline=()=>{this.close().catch(t=>{var a;(a=this._config.dispatcher)===null||a===void 0||a.trigger(E.Error,t)})},this._areNewConnectionParamsPassed=(t,a,r)=>!!t&&t!==this._config.URI||!!a&&a!==this._config.channelId||!!r&&r!==this._config.userId,this._config=Object.assign(Object.assign({},Wc),e);const s=this._config;s.tokenGenerator&&(this._authService=Ze.getInstance()),this._connection=new Uc({baseURL:s.URI,isLongPoll:s.isLongPoll,isTLS:s.isTLS,channel:s.channel,retryInterval:s.retryInterval!==void 0&&s.retryInterval>=0?s.retryInterval*Yc:Kc,retryMaxAttempts:s.retryMaxAttempts!==void 0&&s.retryMaxAttempts>=0?s.retryMaxAttempts:qc,searchParams:{channelId:s.channelId,userId:s.userId},authService:this._authService,dispatcher:s.dispatcher}),window.addEventListener("online",this._onOnline),window.addEventListener("offline",this._onOffline)}open(e){return bs(this,void 0,void 0,function*(){const{URI:s,userId:t,channelId:a}=e!=null?e:{};if(this.isOpen()){if(!(this._areNewConnectionParamsPassed(s,a,t)||this._authService))return;yield Promise.all([this._updateConnectionParams(s,a,t),this.close()])}else yield this._updateConnectionParams(s,a,t);yield this._connection.open()})}close(){return this._connection.close()}getState(){return this._connection.getState()}isOpen(){return this._connection.isOpen()}send(e,s,t){return bs(this,void 0,void 0,function*(){let a;if(typeof e=="string"?a=Es(e,s):Et(e)?a=As(e):ms(e)?a=ve(e):a=e,!Qs(a))throw Error(A.MessageInvalid);if(t){const{sdkMetadata:r,threadId:i}=t;r&&(a=this._updateMetadata(a,r)),i&&(a.threadId=i)}return a.userId=this._config.userId,this._config.enableCancelResponse?a=Mt(a):delete a.requestId,this._connection.send(a)})}updateUser(e,s){return bs(this,void 0,void 0,function*(){let t=e;return s!=null&&s.sdkMetadata&&(t=this._updateMetadata(e,s.sdkMetadata)),this._connection.send(t)})}sendDeviceToken(e,s){return bs(this,void 0,void 0,function*(){const t={state:{type:"token",deviceToken:e,deviceType:s,"store.undelivered.messages":!1,"notify.undelivered.skill.messages":!1}};yield this._connection.send(t)})}cancelRequest(e){console.debug("Requested to cancel",e)}getSuggestions(e){return bs(this,void 0,void 0,function*(){const s=new cs;this._connection.setSuggestionPromise(s);let t={messagePayload:{query:e,threshold:jc,type:f.Suggest}};return this._config.enableCancelResponse&&(t=Mt(t)),this._connection.send(t).catch(s==null?void 0:s.reject),setTimeout(()=>{s==null||s.reject(Rt(A.SuggestionsTimeout))},Gc),s==null?void 0:s.promise})}_updateMetadata(e,s){return s&&(e.sdkMetadata=Object.assign(Object.assign({},e.sdkMetadata),s)),e}_updateConnectionParams(e,s,t){return bs(this,void 0,void 0,function*(){const a=this._config;if(yt(e)&&(a.URI=e),this._authService){const r=yield this._authService.get();a.channelId=r.getClaim("channelId"),a.userId=r.getClaim("userId")}else yt(s)&&(a.channelId=s),yt(t)&&(a.userId=t);this._connection.updateConnectionUrl({URI:a.URI,channelId:a.channelId,userId:a.userId,isTLS:a.isTLS,channel:a.channel})})}}var ne=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Ds={oracle:"oracle",platform:"platform"},Zc=Ds.oracle;class Sr{constructor(e){var s,t,a,r;this._config=e,this._recognizedText=null,this._ttsMap=new Map,this._newConfig=!1,(s=(a=this._config).dispatcher)!==null&&s!==void 0||(a.dispatcher=ps()),this._config.URI=St(e.URI),e.tokenGenerator||(t=(r=this._config).userId)!==null&&t!==void 0||(r.userId=ls({prefix:"user"})),this._initServices(e)}connect(e){return e&&(this._newConfig=!0,e.URI&&(e.URI=St(e.URI)),this._config=Object.assign(Object.assign({},this._config),e)),this._chatService.open(e)}disconnect(){return this._chatService.close()}getState(){return this._chatService.getState()}isConnected(){return this._chatService.isOpen()}sendMessage(e,s){return ne(this,void 0,void 0,function*(){var t,a;if(!e)throw Error(A.MessageInvalid);let r="",i="";return typeof e=="string"?i=e:ms(e)&&(i=e.text),((t=this._recognizedText)===null||t===void 0?void 0:t.text)===i&&(r=this._recognizedText.requestId),this._recognizedText=null,this._chatService.send(e,r,Object.assign(Object.assign({},s),{threadId:(a=s==null?void 0:s.threadId)!==null&&a!==void 0?a:this._currentThreadId}))})}sendAttachment(e,s){return ne(this,void 0,void 0,function*(){const t=yield this.uploadAttachment(e,s);return this._chatService.send(t,"",{sdkMetadata:s==null?void 0:s.sdkMetadata})})}sendLocation(e){return ne(this,void 0,void 0,function*(){if(!this.isConnected())throw Error(A.ConnectionNone);if(!e){const{latitude:t,longitude:a}=yield Ft();e={latitude:t,longitude:a}}if(!Ln(e))throw Error(A.LocationInvalid);const s={messagePayload:{type:f.Location,location:e}};return this._chatService.send(s)})}sendDeviceToken(e,s){return ne(this,void 0,void 0,function*(){return this._chatService.sendDeviceToken(e,s)})}sendUserTypingStatus(e,s){return ne(this,void 0,void 0,function*(){return this.sendMessage(ve({partyType:"user",source:"sdk",status:e,type:f.Status,text:s}))})}updateChatContext(e,s,t,a){return ne(this,void 0,void 0,function*(){return this.sendMessage({messagePayload:Object.assign({type:f.UpdateApplicationContextCommand,source:Cs.ChatWindow,context:e},s)},{sdkMetadata:a,threadId:t})})}updateUser(e,s){return ne(this,void 0,void 0,function*(){if(!nn(e))throw Error(A.ProfileInvalid);return this._chatService.updateUser(e,Object.assign(Object.assign({},s),{threadId:this._currentThreadId}))})}uploadAttachment(e,s){return ne(this,void 0,void 0,function*(){if(!this.isConnected())throw Error(A.ConnectionNone);if(!this._uploadService)throw Error(A.UploadNotAvailable);const{fileName:t,type:a,url:r}=yield this._uploadService.upload(e,s);return Di(a,r,t)})}getSuggestions(e){return ne(this,void 0,void 0,function*(){if(!e)throw Error(A.SuggestionsEmptyRequest);if(typeof e!="string")throw Error(A.SuggestionsInvalidRequest);return this._chatService.getSuggestions(e)})}setCurrentThreadId(e){this._currentThreadId=e}cancelRequest(e){this._chatService.cancelRequest(e)}destroy(){this.disconnect();for(const e in this)this[e]&&delete this[e]}setTTSService(e){typeof e=="string"?this._ttsService=this._getTTSServiceByName(e):this._ttsService=e}getTTSService(){return this._ttsService}getTTSVoices(){return ne(this,void 0,void 0,function*(){if(!this._ttsService)throw Error(A.TtsNotAvailable);return this._ttsService.getVoices()})}setTTSVoice(e){return ne(this,void 0,void 0,function*(){if(!this._ttsService)throw Error(A.TtsNotAvailable);return this._ttsService.setVoice(e)})}getTTSVoice(){if(!this._ttsService)throw Error(A.TtsNotAvailable);return this._ttsService.getVoice()}speakTTS(e,s){if(this._ttsService){let t;if(typeof e=="string")t=e;else if(Qs(e))t=Oi(e,s);else return;this._ttsService.speak(t)}}cancelTTS(){var e;(e=this._ttsService)===null||e===void 0||e.cancel()}startRecognition(e){return ne(this,void 0,void 0,function*(){if(!this._recognitionService)throw Error(A.RecognitionNotAvailable);if(!this.isConnected())throw Error(A.ConnectionNone);const s=r=>{r.type==="final"&&(this._recognizedText=r),e==null||e.onRecognitionText(r)},t=r=>{var i;(i=e==null?void 0:e.onVisualData)===null||i===void 0||i.call(e,r)},a=()=>{this.off(E.ASRResponse,s),this.off(E.ASRVisualData,t),this.off(E.ASRStop,a)};return this.on(E.ASRResponse,s),this.on(E.ASRVisualData,t),this.on(E.ASRStop,a),this._recognitionService.startRecognition()})}stopRecognition(){return ne(this,void 0,void 0,function*(){if(!this._recognitionService)throw Error(A.RecognitionNotAvailable);return this._recognitionService.stopRecognition()})}setRecognitionLocale(e){e&&typeof e=="string"&&this._recognitionService&&this._recognitionService.setLocale(e.toLowerCase())}on(e,s){var t;(t=this._config.dispatcher)===null||t===void 0||t.bind(e,s)}off(e,s){var t;(t=this._config.dispatcher)===null||t===void 0||t.unbind(e,s)}getAuthToken(){var e;return(e=this._authService)===null||e===void 0?void 0:e.get()}_initServices(e){this._initAuthService(e),this._initChatService(e),this._initAttachmentService(e),this._initTTSService(e),this._recognitionService=$t.getInstance()}_initAuthService(e){e.tokenGenerator&&(this._authService=Ze.getInstance(),this._authService.setFetch(e.tokenGenerator))}_initChatService(e){var s;this._chatService=new Xc(e),(s=this._config.dispatcher)===null||s===void 0||s.bind(E.Open,()=>{var t,a,r;const i=this._config;(t=this._uploadService)===null||t===void 0||t.setConfig(i).catch(n=>{console.warn(n)}),(a=this._recognitionService)===null||a===void 0||a.setConfig(i).catch(n=>{console.warn(n)}),this._newConfig&&((r=this._ttsService)===null||r===void 0||r.setConfig(i).catch(n=>{console.warn(n)}),this._newConfig=!1)})}_initAttachmentService(e){e.enableAttachment&&(this._uploadService=Xt.getInstance())}_initTTSService(e){if(e.isTTS){let s;const t=e.TTSService;t?typeof t=="string"?s=this._getTTSServiceByName(t):s=t:s=this._getTTSServiceByName(Zc),this._ttsService=s}}_getTTSServiceByName(e){const s=this._ttsMap.get(e);if(s)return s;let t;try{e===Ds.oracle?t=new gc(this._config):e===Ds.platform&&(t=new Xn),this._ttsMap.set(e,t)}catch(a){console.log(a)}return t}}Sr.TTS=Ds;const U=Object.assign(Object.assign({},E),{CHAT_END:"chatend",CHAT_LANG:"chatlanguagechange",CLICK_AUDIO_RESPONSE_TOGGLE:"click:audiotoggle",CLICK_ERASE:"click:erase",CLICK_SEARCH_BAR_PINNING:"click:searchbarpinning",CLICK_VOICE_TOGGLE:"click:voicetoggle",DESTROY:"destroy",MESSAGE:"message",MESSAGE_RECEIVED:"message:received",MESSAGE_SENT:"message:sent",NETWORK:"networkstatuschange",READY:"ready",TYPING:"typing",UNREAD:"unreadCount",WIDGET_CLOSED:"widget:closed",WIDGET_OPENED:"widget:opened",WIDGET_SHOW:"widget:show",WIDGET_HIDE:"widget:hide"});class _e{}_e.GEOLOCATION_REQUEST_DENIED=1,_e.CHAT_SCROLL_DELAY=300,_e.WEBSOCKET_READY_STATE=["CONNECTING","OPEN","CLOSING","CLOSED"],_e.WEBSOCKET_CLOSE_EVENT={CODE:{ABNORMAL_CLOSURE:1006}},_e.ATTACHMENT_HEADER={AUTHORIZATION:"Authorization",FILE_AUTH_TYPE:"x-oda-meta-file-authType",FILE_IS_PROTECTED:"x-oda-meta-file-isProtected",FILE_SIZE:"x-oda-meta-file-size"},_e.MAX_SUGGESTIONS_COUNT=5,_e.MIN_SUGGESTIONS_COUNT=1,_e.SUGGESTIONS_COUNT_THRESHOLD=30,_e.TIME={MIN_FIFTY:3e6};const Jc=25,G="25.04",Ps=1024,zs=Jc*Ps*Ps,Qc=1e4,ep=211,fs=1e3,sp=1e4;class Cr{constructor(e){this._props=e,this._opened=!1,this._handleEscape=s=>{Mr(s)||s.code===T.Esc&&(this.close(),s.stopPropagation())},this._trapFocus=s=>{Mr(s)||s.code===T.Tab&&(s.target===this._lastTabbable&&!s.shiftKey?(s.preventDefault(),this._firstTabbable.focus()):s.target===this._firstTabbable&&s.shiftKey&&(s.preventDefault(),this._lastTabbable.focus()))}}open(){if(this._opened)return;const{autoDismiss:e,autoDismissTimeout:s,parent:t}=this._props;if(!qs(t))return;const a=s!=null?s:sp;this._prevFocusedElement=document.activeElement,this._opened=!0,t.append(this.render()),this._focusFirstDescendant(),this._addListeners(),e&&setTimeout(()=>{this.close()},a)}close(){if(!this._opened)return;const{domUtil:e,fallbackFocus:s}=this._props,t=200,a="dialog-out";e.addCSSClass(this._dialog,a),setTimeout(()=>{this._removeListeners(),e.removeCSSClass(this._dialog,a),this._dialogWrapper.remove(),this._prevFocusedElement&&this._prevFocusedElement.offsetParent?this._prevFocusedElement.focus():s(),this._opened=!1},t)}render(){const{title:e,description:s,domUtil:t,icon:a,actions:r,showDismiss:i,dismissLabel:n,modeless:p}=this._props,l="dialog",c=t.createDiv.bind(t),m=t.cssPrefix,h=c([`${l}-wrapper`]);p&&t.addCSSClass(h,"modeless");let d;p||(d=c([`${l}-backdrop`]));const u=c([`${l}-icon-content-wrapper`,"flex"]),b=c([`${l}-content`]),v=c([l,"flex"]);if(p||t.addCSSClass(v,"col"),a){const _=t.createImageIcon({icon:a}),C=c([`${l}-icon`]);Ie(C,_),Ie(u,C)}const k=`${l}-title`,x=t.createTextDiv([k]);if(x.id=`${m}-${k}`,x.textContent=e,Ie(b,x),s){const _=`${l}-description`,C=t.createTextDiv([_]);C.id=`${m}-${_}`,C.textContent=s,Ie(b,C),v.setAttribute("aria-describedby",C.id)}if(Ie(u,b),Ie(v,u),i){const _=`${l}-close-button`,C=t.createIconButton({css:[_],icon:Ge,title:n,iconCss:[`${_}-icon`]});L(C,Ir,this.close.bind(this)),Ie(v,C)}if(r&&r.length){const _=c(["action-wrapper","flex"]);r.forEach(C=>{const g=["popup-action"];C.type===Tr&&g.push(Tr);const w=t.createButton(g);w.innerHTML=C.label,L(w,Ir,y=>{C.handler(y)}),_.append(w)}),Ie(v,_)}return p||Ie(h,d),Ie(h,v),ut(v,{role:"alertDialog","aria-modal":(!p).toString(),"aria-labelledby":x.id}),this._dialog=v,this._dialogWrapper=h,this._setTabbableElements(v),h}_setTabbableElements(e){const s=e.querySelectorAll("[tabIndex]:not([tabIndex^='-']), button");this._firstTabbable=s[0],this._lastTabbable=s[s.length-1]}_focusFirstDescendant(){this._firstTabbable.focus()}_addListeners(){const e=this._dialog;L(e,Er,this._trapFocus),L(e,Ar,this._handleEscape)}_removeListeners(){const e=this._dialog;$o(e,Er,this._trapFocus,!0),$o(e,Ar,this._handleEscape,!0)}}const Tr="filled",Er="keydown",Ar="keyup",Ir="click",Ie=(o,...e)=>{o.append(...e)},Mr=o=>o.ctrlKey||o.metaKey||o.altKey,Qt="aria",rt=`${Qt}-expanded`,ea=`${Qt}-selected`,Lr=`${Qt}-activedescendant`,Dr="autocomplete-active";class tp{constructor(e,s,t){this._textBox=e,this._util=t,this._currentFocusIndex=-1,this._listbox=this._createListbox(s),ut(e,{"aria-autocomplete":"list","aria-controls":s,[rt]:"false",autocomplete:"off",role:"combobox"})}display(e,s){this._reset(),this._options=e.map((t,a)=>{const r=this._createOption(a,e.length);return this._fillSuggestion(r,t,s),r.onclick=()=>{this._textBox.value=t,this.hide()},this._listbox.append(r),r}),this._textBox.setAttribute(rt,"true")}hide(){this._textBox.setAttribute(rt,"false"),this._textBox.removeAttribute(Lr),this._reset()}isOpen(){return this._textBox.getAttribute(rt)==="true"}handleKeyboardEvent(e){let s=!1;if(e.ctrlKey)return s;const t=this._options.length;switch(e.code){case T.Return:case T.Space:case T.Tab:this._activeOption&&ap(this._textBox,this._activeOption.textContent),this.hide();break;case T.Down:this._currentFocusIndex=(this._currentFocusIndex+1)%t,s=!0;break;case T.Up:this._currentFocusIndex=this._currentFocusIndex<0?t-1:(this._currentFocusIndex-1+t)%t,s=!0;break;case T.Esc:this.hide(),this._textBox.focus();break}return s&&(e.stopPropagation(),e.preventDefault(),this._setOptionActive(this._options[this._currentFocusIndex])),s}getListbox(){return this._listbox}_createListbox(e){const s=this._util.createElement("ul",["autocomplete-items"]);return s.id=e,ut(s,{"aria-labelledby":`${this._textBox.id}-label`,"aria-live":"polite",role:"listbox"}),L(s,"keydown",t=>{this._textBox.dispatchEvent(new KeyboardEvent(t.type,t))}),s}_createOption(e,s){const t=this._util.createElement("li",["autocomplete-item"]);return t.id=`${this._listbox.id}item-${e+1}`,t.tabIndex=-1,ut(t,{"aria-posinset":(e+1).toString(),"aria-setsize":s.toString(),[ea]:"false",role:"option"}),t}_fillSuggestion(e,s,t){const a=s.toLowerCase().indexOf(t),r=this._util.createTextSpan();if(r.setAttribute("aria-hidden","true"),a>=0){const i=Pr(s.substring(0,a)),n=this._util.createElement("strong",["strong"],!0);n.textContent=s.substring(a,a+t.length);const p=Pr(s.substring(a+t.length));r.append(i,n,p)}else r.textContent=s;e.append(r),e.setAttribute("aria-label",s)}_setOptionActive(e){const s=this._activeOption;s&&(this._util.removeCSSClass(s,Dr),s.setAttribute(ea,"false")),e&&(e.scrollIntoView(!1),e.setAttribute(ea,"true"),this._util.addCSSClass(e,Dr),this._activeOption=e,this._textBox.setAttribute(Lr,e.id))}_reset(){const e=this._listbox;for(;e.firstChild;)e.removeChild(e.lastChild);this._options=[],this._activeOption=null,this._currentFocusIndex=-1}}const Pr=o=>document.createTextNode(o),ap=(o,e)=>{o.value=e,o.setSelectionRange(e.length,e.length)};class He{remove(){this.element.remove()}isVisible(){return qs(this.element)}appendToElement(e){e.append(this.element)}prependToElement(e){const s=e.firstChild;s?e.insertBefore(this.element,s):e.append(this.element)}appendContentChildElement(e){this._getContentElement().append(e)}appendContentChild(e){this._getContentElement().append(e.element)}_getContentElement(){return this.element}}var rp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const zr=10111,op=10121;class Ue{constructor(e,s,t){var a,r;this.action=e,this.util=s,this._options=t,this._disabled=!1,this._getActionEvent=()=>({getPayload:this._getEventPayload,label:this._label,imageUrl:this._activeImageUrl||this._imageUrl,type:this._type}),this._getEventPayload=()=>rp(this,void 0,void 0,function*(){return this.action}),this._type=e.type,this._label=e.label,this._imageUrl=e.imageUrl,this._style=e.style,this._tooltip=e.tooltip,this._displayType=e.displayType,this._activeImageUrl=(a=e.channelExtensions)===null||a===void 0?void 0:a.activeImageUrl,this._c2kText=(r=e.channelExtensions)===null||r===void 0?void 0:r.c2kText,this._type===R.SubmitForm&&!this._style&&(this._style=Ct.Primary)}render(){const e=this.util,s=this._style,t=["flex-center","action-button","action-postback",...s===Ct.Primary?["primary"]:s===Ct.Danger?["danger"]:[],...this._displayType===Ha.Icon?["icon"]:[]],a=e.createButton(t);if(a.onclick=this.handleOnClick.bind(this),this._imageUrl&&a.append(e.createImageIcon({icon:this._imageUrl,iconCss:["action-image"]})),this._label){const r=qe(this._label,e.cssPrefix),i=e.createTextDiv();if(this._displayType===Ha.Link){const n=e.createAnchor("",r);n.onclick=p=>p.preventDefault(),i.append(n),e.addCSSClass(a,"display-link")}else this._c2kText?(i.innerHTML=String.fromCharCode(parseInt(this._label)+zr),e.addCSSClass(a,"c2k-action"),a.addEventListener("mouseover",()=>{i.innerHTML=String.fromCharCode(parseInt(this._label)+op);const n=document.getElementsByClassName(this._c2kText);for(const p of n)e.addCSSClass(p,"highlight")}),a.addEventListener("mouseleave",()=>{i.innerHTML=String.fromCharCode(parseInt(this._label)+zr);const n=document.getElementsByClassName(this._c2kText);for(const p of n)e.removeCSSClass(p,"highlight")})):i.innerHTML=r;a.append(i)}if(this._disabled&&e.addCSSClass(a,"disabled"),this._tooltip){const r=e.createDiv(["action-wrapper"]),i=e.createDiv(),n=e.createTextDiv(["tooltip","none"]);return n.innerText=this._tooltip,n.setAttribute("role","tooltip"),i.append(n),r.append(a,i),r}return this._htmlElement=a,a}disable(){this._disabled=!0,this._htmlElement&&(this.util.addCSSClass(this._htmlElement,"disabled"),this._htmlElement.disabled=!0)}enable(){this._disabled=!1,this._htmlElement&&(this.util.removeCSSClass(this._htmlElement,"disabled"),this._htmlElement.disabled=!1)}getActionType(){return this._type}handleOnClick(e){var s,t;if(this._disabled)return;const a=this._getActionEvent();if(this._activeImageUrl){const r=this.util.createImage(this._activeImageUrl,["action-image"],this._label||"");this._htmlElement.lastElementChild.replaceWith(r)}(t=(s=this._options).onMessageActionClicked)===null||t===void 0||t.call(s,a)}}var ip=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class np extends Ue{constructor(e,s,t){super(e,s,t),this._getEventPayload=()=>ip(this,void 0,void 0,function*(){return this._phoneNumber}),this._phoneNumber=e.phoneNumber}render(){const e=this.util,s=super.render();s.tagName.toLowerCase()==="button"?e.addCSSClass(s,"action-call"):e.addCSSClass(s.firstElementChild,"action-call");const t=e.createAnchor(`tel:${this._phoneNumber}`,"");return s.onclick=()=>{t.click()},s}}var cp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class pp extends Ue{constructor(e,s,t){super(e,s,t),this._payload=e,this._isAnimating=!1,this._getActionEvent=()=>Object.assign({getPayload:this._getEventPayload,label:this._label,type:this._type,actionType:this._payload.actionType},this._payload.actionType===Ts.COPY_MESSAGE_TEXT&&{onSuccess:this._onCopySuccess}),this._getEventPayload=()=>cp(this,void 0,void 0,function*(){return this._payload}),this._onCopySuccess=()=>{if(this._isAnimating)return;this._isAnimating=!0;const a=this._htmlElement,r=this.util,i=2e3,n=200,p=a.querySelector("img, svg"),l=this.util.createImageIcon({icon:Io,iconCss:["action-image"]}),c=(m=!0)=>{const h=m?p:l,d=m?l:p;h&&(r.removeCSSClass(h,"icon-enter"),r.addCSSClass(h,"icon-exit"),setTimeout(()=>h.remove(),n)),d?setTimeout(()=>{a.prepend(d),r.removeCSSClass(d,"icon-exit"),r.addCSSClass(d,"icon-enter"),setTimeout(()=>{this._isAnimating=!1},i)},h?n:0):this._isAnimating=!1};c(),setTimeout(()=>c(!1),i)}}render(){const e=this.util,s=super.render();return s.tagName.toLowerCase()==="button"?e.addCSSClass(s,"action-client"):e.addCSSClass(s.firstElementChild,"action-client"),s}}var lp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class mp extends Ue{constructor(){super(...arguments),this._getEventPayload=()=>lp(this,void 0,void 0,function*(){return Ft()})}render(){const e=this.util,s=super.render();return s.tagName.toLowerCase()==="button"?e.addCSSClass(s,"action-location"):e.addCSSClass(s.firstElementChild,"action-location"),s}handleOnClick(e){super.handleOnClick(e),e.preventDefault(),e.stopPropagation()}}var gp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class dp extends Ue{constructor(e,s,t,a){super(e,s,t),this._settings=a,this._getEventPayload=()=>gp(this,void 0,void 0,function*(){return this._popupContent}),this._popupContent=e.popupContent}render(){const e=this.util,s=super.render();s.tagName.toLowerCase()==="button"?e.addCSSClass(s,"action-popup"):e.addCSSClass(s.firstElementChild,"action-popup");const t=xm(e,this._popupContent,this._settings,this._options);return document.body.append(t),this._dialogWrapper=t,s}handleOnClick(){const e=this._dialogWrapper;this.util.removeCSSClass(e,"none"),e.querySelector("button").focus()}}var hp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class up extends Ue{constructor(e,s,t){super(e,s,t),this._getEventPayload=()=>hp(this,void 0,void 0,function*(){return this._postback}),this._postback=e.postback}handleOnClick(e){super.handleOnClick(e),e.preventDefault(),e.stopPropagation()}}var bp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class fp extends Ue{constructor(e,s,t,a){super(e,s,t),this._shareText=a,this._getEventPayload=()=>bp(this,void 0,void 0,function*(){return this._shareText})}render(){const e=this.util,s=super.render();return s.tagName.toLowerCase()==="button"?e.addCSSClass(s,"action-share"):e.addCSSClass(s.firstElementChild,"action-share"),s}handleOnClick(e){super.handleOnClick(e),e.preventDefault(),e.stopPropagation()}}var wp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class vp extends Ue{constructor(e,s,t){super(e,s,t),this._getEventPayload=()=>wp(this,void 0,void 0,function*(){return this._postback}),this._postback=e.postback}}var _p=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class Rr extends Ue{constructor(e,s,t,a=!1,r){super(e,s,t),this._openInWindow=a,this._linkHandler=r,this._getEventPayload=()=>_p(this,void 0,void 0,function*(){return this._url}),this._url=e.url}render(){const e=this.util,s=super.render();if(s.tagName.toLowerCase()==="button"?e.addCSSClass(s,"action-url"):e.addCSSClass(s.firstElementChild,"action-url"),this._url){const t=e.createAnchor(this._url,"",[],this._openInWindow,this._linkHandler);s.onclick=()=>{t.click()}}return s}}function Re(o){return o.filter(e=>{const s=e.getActionType();return s===R.Postback||s===R.Location||s===R.SubmitForm})}var xp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Z={LEFT:"left",RIGHT:"right"};class ss{constructor(e,s,t,a,r,i){this.settings=e,this.util=s,this.payload=t,this.side=a,this.source=r,this.actions=[],this.globalActions=[],this._postActions=[],this.appendedComponents=[],this._handleOnActionClick=n=>{var p,l,c,m;if(Fm(n)&&(n.getPayload=()=>xp(this,void 0,void 0,function*(){return this.getCopyContent()})),Bm(n)){(l=(p=this._options).onMessageActionClicked)===null||l===void 0||l.call(p,n);return}const h=n;h.messageComponent=this,(m=(c=this._options).onMessageActionClicked)===null||m===void 0||m.call(c,h)},this.getCopyContent=()=>Ea(this.element.cloneNode(!0),this._removeFooterForm,Ra),this._removeFooterForm=n=>{const p=n.querySelectorAll(`.${this.settings.name}-footer-form`);return p==null||p.forEach(l=>{l.remove()}),n},this.locale=e.locale,this.translations=e.i18n[this.locale],this.shareText=Lm(t),this._options=Object.assign(Object.assign({},i),{shareText:this.shareText}),this._actionOptions=Object.assign(Object.assign({},this._options),{onMessageActionClicked:this._handleOnActionClick}),i.locale&&(this.locale=i.locale,this.translations=Object.assign(Object.assign({},this.translations),this.settings.i18n[i.locale])),t.actions&&(this.actions=this.buildActions(t.actions,this.shareText)),t.globalActions&&(this.globalActions=this.buildActions(t.globalActions,this.shareText)),this.headerText=t.headerText,this.footerText=t.footerText,t.footerForm&&(this.footerFormComponent=Lo(s,t.footerForm,e,this._actionOptions)),this._postActions=Re(this.actions).concat(Re(this.globalActions))}hasActions(){return this.actions.length>0||this.globalActions.length>0||this.appendedComponents.length>0&&this.appendedComponents.some(e=>e.hasActions())}focusFirstAction(){var e;this.firstActionButton?this.firstActionButton.focus():this.appendedComponents.length&&((e=this.appendedComponents.find(s=>s.hasActions()))===null||e===void 0||e.focusFirstAction())}disableActions(){this.actions.forEach(e=>{e.disable()}),this.globalActions.forEach(e=>{e.disable()}),this.footerFormComponent&&this.footerFormComponent.disableActions(),this.appendedComponents.forEach(e=>e.disableActions())}disablePostbacks(){this._postActions.forEach(e=>{e.disable()}),this.footerFormComponent&&this.footerFormComponent.disablePostbacks(),this.appendedComponents.forEach(e=>e.disablePostbacks())}enableActions(){this.actions.forEach(e=>{e.enable()}),this.globalActions.forEach(e=>{e.enable()}),this.footerFormComponent&&this.footerFormComponent.enableActions(),this.appendedComponents.forEach(e=>e.enableActions())}enablePostbacks(){this._postActions.forEach(e=>{e.enable()}),this.footerFormComponent&&this.footerFormComponent.enablePostbacks(),this.appendedComponents.forEach(e=>e.enablePostbacks())}render(e){const s=this,t=s.util,a=["message",this.side===Z.LEFT?"response-message":"user-message"];this.element&&(this.element.innerHTML="");const r=this.element?this.element:t.createDiv(a);r.lang=s.locale;const i=t.createDiv(["message-wrapper"]);r.append(i),this.renderHeader(i);const n=this.renderMainContent(i,e);this.mainView=n;const p=this.settings.displayActionsAsPills?i:n;return this.renderLocalActions(p),this.renderFooter(i),this.renderFooterForm(i),this.renderGlobalActions(r),this.setupEmbeddedActions(r),this.setLinkAdvisory(r),this.element=r,r}append(e){this.appendedComponents.push(e),this.appendComponent(e)}appendComponent(e){const s=this.element,t=s.querySelector(`${this.settings.name}-message-wrapper`),a=this.mainView;if(!a)return;e.renderMainContent(a);const r=this.settings.displayActionsAsPills?t:a;e.renderLocalActions(r),e.renderFooter(t),e.renderFooterForm(t),e.renderGlobalActions(s),e.setupEmbeddedActions(s)}renderHeader(e){this.payload.headerText&&e.append(this.getHeader())}renderMainContent(e,s){const t=this.getContent(s);return e.append(t),t}renderLocalActions(e){const s=this.payload.actions;if(s&&s.length){const t=this.getActions();e.append(t),this.firstActionButton||(this.firstActionButton=t.firstElementChild),this.actionsWrapper=t}}renderFooter(e){this.payload.footerText&&e.append(this.getFooter())}renderFooterForm(e){const s=this.footerFormComponent;if(s){const t=this.util.createDiv(["footer-form"]);t.append(s.render()),e.append(t)}}renderGlobalActions(e){const s=this.payload.globalActions;if(s!=null&&s.length){const t=this.getGlobalActions();e.append(t),this.firstActionButton||(this.firstActionButton=t.firstElementChild)}}getHeader(){return Or(this.headerText,"message-header",this.util,this.settings.embeddedVideo)}getContent(e){const t=this.util.createDiv(["message-bubble"]);return t.style.padding=this.settings.messagePadding||t.style.padding,e&&t.append(e),t}getActions(){const e=this.settings,s=e.displayActionsAsPills?["message-global-actions"]:["message-actions"];return e.actionsLayout!=="horizontal"&&s.push("col"),Fr(this.actions,s,this.util)}getFooter(){return Or(this.footerText,"message-footer",this.util,this.settings.embeddedVideo)}getGlobalActions(){const e=["message-global-actions"];return this.settings.icons.avatarBot&&e.push("has-message-icon"),this.settings.globalActionsLayout!=="horizontal"&&e.push("col"),Fr(this.globalActions,e,this.util)}buildActions(e,s){return kp(e,this.util,this.settings,s,this._actionOptions)}setupEmbeddedActions(e){if(!this.settings.enableEmbeddedActions)return;const s=this.payload.embeddedActions;if(!s)return;const t=this.util,a="embeddedAction",r=e.querySelectorAll(`span.${a}`);if(!r)return;const i=s.reduce((n,p)=>Object.assign(Object.assign({},n),{[p.id]:p}),{});r.forEach(n=>{const p=n.id,l=i[p];if(!l)return;n.tabIndex=0,n.setAttribute("role","button");const c=[a];n.classList.remove(a),l.displayType&&c.push(`display-${l.displayType}`),t.addCSSClass(n,...c);const m=xe.fromActionPayload(l,t,this.settings,this.shareText,this._actionOptions);if(!m)return;m.render();const h=m.handleOnClick.bind(m);L(n,"click",h),L(n,"keyup",d=>{(d.code===T.Return||d.code===T.Space)&&(d.preventDefault(),h())})})}setLinkAdvisory(e){const{enableOldLinkAdvisory:s,i18n:t,locale:a}=this.settings;this.side===Z.LEFT&&!this._options.isFresh&&s&&Vm(e,t[a].oldLinkAdvisory)}}function kp(o,e,s,t,a){const r=[];return o.forEach(i=>{const n=xe.fromActionPayload(i,e,s,t,a);n&&r.push(n)}),r}function Or(o,e,s,t){const a=s.createDiv(["message-bubble",e]),r=s.createTextDiv();return r.innerHTML=qe(o,s.cssPrefix,t),a.append(r),a}function Fr(o,e,s){const t=s.createTextDiv(e);return o.forEach(a=>{t.append(a.render())}),t}class ot{static capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}constructor(e,s,t,a,r){this.settings=e,this.util=s,this.side=a,this._hasActions=r,this._url=t.url,this._type=t.type;const i=t.url.split("/");this._title=t.title||decodeURI(i[i.length-1]),this._filename=t.filename,this._logger=new O("AttachmentComponent")}_createDownloadButton(e,s){const t=this.util,a=this.settings,r=t.createAnchor(e,""),i=t.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:a.icons.download||Xl,iconCss:["attachment-download-icon"],title:a.i18n[a.locale].download});return r.setAttribute("download",s||""),r.tabIndex=-1,r.append(i),r}createAttachment(e,s){const t=this.util,a=this.settings,r=t.createDiv(["attachment"]),i=t.createDiv(["attachment-placeholder","flex"]),n=t.createDiv(["attachment-icon"]),p=t.createImageIcon({icon:e});n.append(p);const l=this._title,c=t.createDiv(["attachment-footer","flex",this._hasActions&&"with-actions"]),m=t.createLabel(["attachment-title"]),h=t.createDiv(["attachment-controls","flex"]);if(m.innerText=l,m.setAttribute("title",l),c.append(m),this._type===de.Image){const d=t.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:a.icons.expandImage||gm,iconCss:["attachment-expand-icon"],title:a.i18n[a.locale].imageViewerOpen});d.onclick=()=>{this.createImagePreview(this._url,l)},h.append(d)}if(this.side===Z.LEFT&&h.append(this._createDownloadButton(this._url,this._filename)),s)switch(i.append(s),s.onerror=()=>{s.remove(),i.append(n)},this._type){case de.Image:{s.onload=()=>{s.clientHeight>ep&&(i.style.alignItems="flex-start"),c.append(h)},s.onclick=()=>{this.createImagePreview(this._url,this._title)};break}case de.Audio:case de.Video:{s.onloadeddata=()=>{c.append(h)};break}}else i.append(n),c.append(h);return r.append(i,c),r}createImagePreview(e,s){const t=this.util,a="image-preview",r=this.settings,i=t.createDiv([`${a}-wrapper`]),n=t.createImage(e,[a]),p=t.createLabel([`${a}-title`]);p.innerText=s;const l=r.icons.close||Ge,c=t.createIconButton({css:[`${a}-close`],icon:l,iconCss:[`${a}-close-icon`],title:r.i18n[r.locale].imageViewerClose});c.onclick=()=>{i.remove()},c.onkeydown=d=>{d.code==="Tab"&&(i.focus(),d.preventDefault())};const m=t.createDiv([`${a}-header`]);m.append(p,c),i.append(m,n),i.setAttribute("tabindex","-1"),i.onkeydown=d=>{d.code==="Escape"&&i.remove()};const h=document.querySelector("body");h?(h.append(i),i.focus()):this._logger.error("No body tag to attach the image viewer.")}}class yp extends ot{render(){const e=this.util,s=this.settings,t=s.icons.fileAudio||Ul,a=e.createMedia("video",this._url,["attachment-audio"]);a.controls=!0,a.preload="metadata",Z.RIGHT===this.side&&a.setAttribute("controlsList","nodownload");const r=`<a href="${this._url}">`,i=s.i18n[s.locale].attachmentAudioFallback.replace("{0}",r).replace("{/0}","</a>");return a.innerHTML=i,s.linkHandler?as(a,s.linkHandler):s.openLinksInNewWindow&&rs(a),this.createAttachment(t,a)}}class Sp extends ot{render(){const s=this.settings.icons.fileGeneric||em;return this.createAttachment(s)}}class Cp extends ot{render(){const e=this.util,s=this.settings.icons.fileImage||sm,t=e.createImage(this._url,["attachment-image"],this._title);return this.createAttachment(s,t)}}class Tp extends ot{render(){const e=this.util,s=this.settings,t=this._url,a=s.icons.fileVideo||mm,r=wa(t,e.cssPrefix);if(r){const l=e.createElement("span");return l.innerHTML=r,l}const i=e.createMedia("video",this._url,["attachment-video"]);i.controls=!0,i.preload="metadata",Z.RIGHT===this.side&&i.setAttribute("controlsList","nodownload");const n=`<a href="${this._url}">`,p=s.i18n[s.locale].attachmentVideoFallback.replace("{0}",n).replace("{/0}","</a>");return i.innerHTML=p,this.settings.linkHandler?as(i,s.linkHandler):this.settings.openLinksInNewWindow&&rs(i),this.createAttachment(a,i)}}class it extends ss{static fromPayload(e,s,t,a,r,i=!1){if(r&&r.authToken&&r.uri&&t.url.includes(r.uri)&&!this._tokenRegex.test(t.url)){const n=r==null?void 0:r.authToken;n!=null&&n.length&&(t.url=`${t.url}?token=${n}`)}switch(t.type){case de.Image:return new Cp(e,s,t,a,i);case de.Video:return new Tp(e,s,t,a,i);case de.Audio:return new yp(e,s,t,a,i);case de.File:return new Sp(e,s,t,a,i);default:throw Error("Payload contains wrong attachment type")}}constructor(e,s,t,a,r,i){super(e,s,t,a,r,i),this._attachment=it.fromPayload(e,s,t.attachment,a,i,this.hasActions())}getContent(){return super.getContent(this._attachment.render())}}it._tokenRegex=/token=[a-z\.\d]+/i;class nt extends ss{constructor(e,s,t,a,r,i){super(e,s,t,a,r,i),this._actions=[],this.cssPrefix=e.name,this._options=i,this._fieldOptions=Object.assign(Object.assign({},i),{onMessageActionClicked:this._handleOnActionClick}),this._payload=t}disableActions(){super.disableActions(),this._actions.forEach(e=>{e.disable()})}disablePostbacks(){super.disablePostbacks(),Re(this._actions).forEach(e=>{e.disable()})}enableActions(){super.enableActions(),this._actions.forEach(e=>{e.enable()})}enablePostbacks(){super.enablePostbacks(),Re(this._actions).forEach(e=>{e.enable()})}render(){return super.render()}getHeader(){const e=this.util,s=super.getHeader();return e.addCSSClass(s,"message-header-yellow"),s}getContent(e){const s=this.util,t="message-bubble",a=this._payload.type,r=s.createDiv([t]);if(a===f.Table||a===f.TableForm)s.addCSSClass(r,`${t}-tabular-message`);else{const n=[`${t}-form-message`,...a===f.EditForm?["edit-form-message"]:[]];s.addCSSClass(r,...n)}e&&r.append(e);const i=this.getPageStatus();return i&&r.append(i),r}getPageStatus(){const e=this.util;let s;const t=this._payload.paginationInfo;return t&&t.totalCount>t.rangeSize&&(s=e.createTextDiv(["results-page-status"]),s.innerText=t.status),s}}class Rs{constructor(e,s,t,a,r,i){this._settings=e,this._util=s,this._field=t,this._options=r,this._columns=i,this.isTableField=!1,this.isColumnField=!1,t.displayType===$.Action&&(this.action=xe.fromActionPayload(t.action,s,e,a,this._options))}render(){var e;const s=this._util,t=this._field,a=`${this.isTableField?"table":"form"}-message`,r=this._options,i=this._settings,{alignment:n,label:p,labelFontSize:l,labelFontWeight:c,marginTop:m,onHoverPopupContent:h}=t,d=s.createTextDiv([`${a}-value`]),u=(e=t.value)===null||e===void 0?void 0:e.toString();switch(t.displayType){case $.Link:const x=s.createDiv(),{imageUrl:_,linkLabel:C}=t,g=s.createAnchor(u,C,C?["ellipsis"]:[]);if(_){const De=s.createImage(_,["video-wrapper"],u);De.alt=C||"",g.append(De),p&&s.addCSSClass(d,"with-top-margin")}else g.innerHTML=C||St(u)||"";g.setAttribute("target","_blank"),x.append(g),i.linkHandler?as(x,i.linkHandler):i.openLinksInNewWindow&&rs(x),d.append(g);break;case $.Text:const{fontSize:w,fontWeight:y,truncateAt:D}=t;u&&D?(d.innerHTML=`${u.slice(0,D)}...`,d.title=u):d.innerHTML=u||"",sa(d,w,y,s);break;case $.Media:const Y=t.mediaType,N=p&&u;switch(Y){case"image":const De=s.createImage(u,["video-wrapper"],u);N&&s.addCSSClass(d,"with-top-margin"),d.append(De);break;case"video":wa(u,s.cssPrefix)?(d.innerHTML=qe(u,s.cssPrefix,i.embeddedVideo),i.embeddedVideo&&N&&s.addCSSClass(d,"with-top-margin")):d.append($r(Y,u,d,N,s));break;case"audio":d.append($r(Y,u,d,N,s))}break;case $.Action:s.addCSSClass(d,"flex"),d.style.justifyContent=n,p&&s.addCSSClass(d,"with-top-margin"),d.append(this.action.render())}if(this.isTableField)return Vr(d,h,i,s,r),d;const b=`${a}-field`,v=[b,...this._columns?[`${b}-col-${this._columns}`]:[]],k=s.createDiv(v);if(p){const x=s.createDiv([`${a}-key`]);x.innerHTML=p||"",n&&(x.style.textAlign=n),sa(x,l,c,s),k.append(x)}return n&&(d.style.textAlign=n,n==="right"&&this._util.addCSSClass(k,"margin-inline-end-4")),k.append(d),Vr(k,h,i,s,r),this.isColumnField?Br(k,m,s):k}isPostbackAction(){const e=this._field;if(e.displayType!==$.Action)return!1;const{action:s}=e;return(s==null?void 0:s.displayType)!=="link"}disableActions(){this.action.disable()}disablePostbacks(){Re([this.action]).forEach(e=>{e.disable()})}enableActions(){this.action.enable()}enablePostbacks(){Re([this.action]).forEach(e=>{e.enable()})}}function sa(o,e,s,t){switch(e){case"large":t.addCSSClass(o,"font-size-lg");break;case"small":t.addCSSClass(o,"font-size-sm");break;default:t.addCSSClass(o,"font-size-md")}switch(s){case"bold":t.addCSSClass(o,"font-weight-bold");break;case"light":t.addCSSClass(o,"font-weight-light");break;default:t.addCSSClass(o,"font-weight-md")}}function Br(o,e,s){let t="";switch(e){case"none":break;case"medium":t="margin-top-md";break;case"large":t="margin-top-lg";break;default:t="margin-top-default"}return t&&s.addCSSClass(o,t),o}function Vr(o,e,s,t,a){if(e){const r=We.fromMessage(s,t,{messagePayload:e},a);if(r){const i=t.createDiv(),n=t.createDiv(["popupContent"]);n.append(r.render()),n.setAttribute("role","tooltip"),i.append(n),o.style.cursor="pointer",o.append(i)}}}const $r=(o,e,s,t,a)=>{const r=a.createMedia(o,e,["video-wrapper"]);return r.controls=!0,r.preload="metadata",t&&a.addCSSClass(s,"with-top-margin"),r};class Ep extends nt{getContent(){const e=this.util,s=this.settings,t=this._payload,a="form-message",r=e.createDiv([a]);t.formColumns>2&&(t.formColumns=2);const i=t.forms;return i.forEach((n,p)=>{if(n.title){const h=e.createTextDiv([`${a}-header`]);h.innerText=n.title,r.append(h)}const[l,c]=Nr(n,t.formColumns,e,s,this._fieldOptions);this._actions=this._actions.concat(c);const m=p+1;m===i.length||i[m].title||e.addCSSClass(l,"with-border"),r.append(l)}),super.getContent(r)}}function Nr(o,e,s,t,a){var r;const i="form-message",n=`${i}-actions-col`,p=(r=o.channelExtensions)===null||r===void 0?void 0:r.c2kReferences,l=s.createDiv([`${i}-item`,...p?["c2k-reference"]:[]]),c=a.shareText||ha(o,!0),m=Ap(o,s,t,c,a);let h;if(m.length&&(h=Ip(m,s,t,n)),Wa(o)?o.formRows.forEach((d,u)=>{const b=Hr(d,m,s,t,c,a),v=d.columns.length;if(d.columns.forEach(k=>{const x=Ur(k,s);k.fields.forEach(_=>{if(gs(_)){const C=new Rs(t,s,_,c,a);C.isColumnField=!0,C.isPostbackAction()&&m.push(C.action),Wr(k.width,_.displayType,x,v),x.append(C.render())}}),b.append(x)}),p&&u!==0){const k=s.createTextSpan(["delimiter"]);k.innerHTML="&bull;",b.firstElementChild.firstElementChild.lastElementChild.prepend(k)}l.append(b)}):o.fields.forEach(d=>{const u=new Rs(t,s,d,c,a,e);u.isPostbackAction()&&m.push(u.action),l.append(u.render())}),h&&l.append(h),o.selectAction){const d=xe.fromActionPayload(o.selectAction,s,t,c,a);ta(d,m,l,o.selectAction.label)}return[l,m]}function Ap(o,e,s,t,a){var r;const i=[];if(((r=o.actions)===null||r===void 0?void 0:r.length)>0)for(const n of o.actions){const p=xe.fromActionPayload(n,e,s,t,a);p&&i.push(p)}return i}function Ip(o,e,s,t){const a=e.createDiv(s.formActionsLayout!=="horizontal"?["form-actions","col",t]:["form-actions"]);for(const r of o){const i=r.render();a.append(i)}return a}function Hr(o,e,s,t,a,r){const i=s.createDiv(["form-row",...o.separator?["separator"]:[]]);if(o.selectAction){const n=xe.fromActionPayload(o.selectAction,s,t,a,r);ta(n,e,i,o.selectAction.label)}return i}function ta(o,e,s,t){o&&(e.push(o),s.onclick=a=>o.handleOnClick(a),s.title=t||"",s.style.cursor="pointer")}function Ur(o,e){const{width:s,verticalAlignment:t}=o,a=e.createDiv(["form-row-column",...s?[s]:[]]);return t==="center"?e.addCSSClass(a,"align-center"):t==="bottom"?e.addCSSClass(a,"align-end"):e.addCSSClass(a,"align-start"),a}function Wr(o,e,s,t){o!=="stretch"&&e===$.Media&&!s.style.maxWidth&&(s.style.maxWidth=`calc((100% - ${(t-1)*16}px)/${t})`)}const ce="aria-expanded",he="";class Mp extends nt{constructor(){super(...arguments),this._fieldCount=0,this._fieldErrorCount=0,this._inputElements=[],this._logger=new O("EditFormMessageComponent"),this._submittedFields={},this._localeText=Object.assign(Object.assign({},this.settings.i18n.en),this.settings.i18n[this.settings.locale])}disableActions(){super.disableActions(),ct(this._formHintWrapper,this._inputElements,this.util)}disablePostbacks(){super.disablePostbacks(),ct(this._formHintWrapper,this._inputElements,this.util)}enableActions(){super.enableActions(),ct(this._formHintWrapper,this._inputElements,this.util,!1)}enablePostbacks(){super.enablePostbacks(),ct(this._formHintWrapper,this._inputElements,this.util,!1)}getContent(){const e=this._payload,s=this.settings,t=this.util,a="form-message",r=`${a}-item`,i=t.createDiv([a]),n=t.createDiv([r]);if(e.title){const c=t.createTextDiv([`${a}-header`]);c.innerText=e.title,i.append(c)}It(e)?(e.formColumns>2&&(e.formColumns=2),e.fields.filter(c=>c).forEach(c=>{n.append(this._renderField(c,a,!1,e.formColumns))})):e.formRows.forEach(c=>{const m=Hr(c,this._actions,t,s,this.shareText,this._options),h=c.columns.length;c.columns.forEach(d=>{const u=Ur(d,t);d.fields.filter(b=>b).forEach(b=>{u.append(this._renderField(b,a,!0)),Wr(d.width,b.displayType,u,h)}),m.append(u)}),n.append(m)}),this.actions.concat(this._actions).some(c=>c.getActionType()===R.SubmitForm)||this._logger.error("Payload does not contain submit-form action");const p=this._createHintWrapper(),l=e.errorMessage||(this._fieldErrorCount&&this._fieldCount>1?this.translations.editFormErrorMessage:he);return this._insertHintValidationError(p,l,!0),this._formHintWrapper=p,i.append(n,p),super.getContent(i)}validateForm(){let e=!0;return this._formHintWrapper.innerHTML="",this._inputElements.forEach(s=>{e=this._isFieldValid(s)&&e}),!e&&this._fieldCount>1&&this._insertHintValidationError(this._formHintWrapper,this.translations.editFormErrorMessage,!0),e}getSubmittedFields(){return this._inputElements.filter(e=>{const s=e.tagName.toLowerCase();return s==="textarea"&&(this._submittedFields[e.id]=e.value),s==="input"}).forEach(e=>{const s=e;switch(s.type){case"checkbox":this._submittedFields[s.id]=s.checked?s.getAttribute("valueOn"):s.getAttribute("valueOff");break;case"number":this._submittedFields[s.id]=s.valueAsNumber;break;default:this._submittedFields[s.id]=s.value}}),this._submittedFields}_renderField(e,s,t,a){const r=this.shareText,i=this.util;if(this._fieldCount++,gs(e)){const n=new Rs(this.settings,i,e,r,this._fieldOptions,a);return n.isColumnField=t,n.isPostbackAction()&&this._actions.push(n.action),n.render()}return t?Br(this._renderEditableField(e,a,s,i),e.marginTop,i):this._renderEditableField(e,a,s,i)}_renderEditableField(e,s,t,a){var r,i,n,p,l;const c=`${t}-field`,m=[c,`${c}-col-${s}`,`edit-${c}`],h=a.createDiv(m),{labelFontSize:d,labelFontWeight:u,id:b,displayType:v,placeholder:k,required:x,clientErrorMessage:_,serverErrorMessage:C,autoSubmit:g}=e;let w,y,D,Y=!1;const N=a.createDiv([`${t}-key`,"with-margin"]);switch(N.innerHTML=e.label||he,sa(N,d,u,a),h.append(N),v){case $.SingleSelect:const te=e;if(y=te.defaultValue,D=te.layoutStyle,y&&(this._submittedFields[b]=y),!D||D==="list"){const S=a.createDiv(["select-wrapper",`${t}-value`]),z=a.createInputElement({type:"text",placeholder:k,required:x,id:b,autocomplete:"off"},[`${t}-value`]),J=a.createDiv(),Q=a.createDiv(["listbox","popup","none"]),ae=a.createElement("ul",["single-select-list"]),Hs=a.createIconButton({css:["select-icon"],icon:Wl,iconCss:[],title:he}),Ve=W=>{S.getAttribute(ce)==="true"&&!J.contains(W.target)&&(K||(z.value=he),re(!1))},oe=()=>{S.getAttribute(ce)==="false"&&(S.setAttribute(ce,"true"),a.removeCSSClass(Q,"none"),setTimeout(()=>document.addEventListener("click",Ve)),z.focus())},re=(W=!0)=>{S.getAttribute(ce)==="true"&&(K&&(z.value=K.textContent||K.innerText),S.setAttribute(ce,"false"),a.addCSSClass(Q,"none"),document.removeEventListener("click",Ve),this._filterSearchResults(he,ae.querySelectorAll("li"),is),W&&z.focus())};let K,is=[];a.setAttributes(S,{errorMsg:_}),S.setAttribute(ce,"false"),S.setAttribute("aria-label",v),S.onclick=W=>{W.stopPropagation(),oe()},S.oninput=()=>{this._filterSearchResults(z.value,ae.querySelectorAll("li"),is)?oe():re()},S.onkeydown=W=>{var Ke;const P=W.key;P===T.Down||P===T.Up?!K||K.classList.contains(`${this.cssPrefix}-none`)?(Ke=is[0])===null||Ke===void 0||Ke.focus():K==null||K.focus():(P===T.Esc||P===T.Tab)&&re()},z.onfocus=()=>a.addCSSClass(S,"focus"),z.onblur=()=>a.removeCSSClass(S,"focus"),Hs.onclick=W=>{W.stopPropagation(),S.getAttribute(ce)==="true"?re():oe()},(r=te.options)===null||r===void 0||r.forEach(W=>{const Ke=()=>{a.addCSSClass(P,"selected"),K&&a.removeCSSClass(K,"selected"),K=P,re(),this._submittedFields[b]=W.value,this._partialSubmit(b,g,S)},P=a.createListItem(W.label,W.label,W.label,he,he,Ke,!1,!1);P.onkeydown=ie=>this._onMenuClick(ie,P,ae,z,is),W.value===y&&(a.addCSSClass(P,"selected"),K=P,z.value=W.label),ae.append(P)}),is=Array.from(ae.querySelectorAll("li")),J.onclick=W=>W.stopPropagation(),S.append(z,Hs),Q.append(ae),J.append(Q),h.append(S,J),this._inputElements.push(S),Y=!0}else if(D==="radioGroup"){const S=a.createElement("form",this._getSelectFieldCSS(te));a.setAttributes(S,{id:b,ariaLabel:v,errorMsg:_}),S.onclick=z=>z.stopPropagation(),te.options.forEach(z=>{const J=a.createInputElement({type:"radio",name:b,value:z.label,required:x,checked:z.value===y},["radio-input"]);J.onchange=()=>{J.checked&&(this._submittedFields[b]=z.value),this._partialSubmit(b,g,S)};const Q=a.createLabel();Q.innerText=z.label,Q.prepend(J),S.append(Q)}),this._inputElements.push(S),h.appendChild(S)}else this._logger.error(`Payload contains wrong layout style:${D} for single select field`);break;case $.MultiSelect:const Be=e;if(y=Be.defaultValue,D=Be.layoutStyle,this._submittedFields[b]=y||[],!D||D==="list"){const S=a.createDiv([`${t}-value`,"text-field-container"]),z=a.createElement("ul",["selected-options"]),J=a.createDiv(),Q=a.createDiv(["listbox","popup","none"]),ae=[],Hs=a.createDiv(["filter-message-box"]),Ve=a.createDiv(["filter-message-text","none"]),oe=a.createInputElement({type:"text"},[`${t}-value`,"listbox-search","none"]),re=a.createElement("ul",["multi-select-list"]),K=a.createDiv(["search-icon-wrapper","none"]),is=a.createImageIcon({icon:im,iconCss:["search-icon"]});Ve.textContent=this.translations.noResultText,Hs.append(Ve),oe.oninput=()=>{this._filterSearchResults(oe.value,re.querySelectorAll("li"),ae)?a.addCSSClass(Ve,"none"):a.removeCSSClass(Ve,"none")},oe.onkeydown=P=>{var ie;const Us=P.key;Us===T.Down?(this._filterSearchResults(oe.value,re.querySelectorAll("li"),ae),(ie=ae[0])===null||ie===void 0||ie.focus()):(Us===T.Esc||Us===T.Tab)&&S.click()},k&&z.setAttribute("data-placeholder",k),S.setAttribute(ce,"false");const W=P=>{S.getAttribute(ce)==="true"&&!J.contains(P.target)&&Ke()},Ke=()=>{S.setAttribute(ce,"false"),a.addCSSClass(Q,"none"),document.removeEventListener("click",W),oe.value=he,this._filterSearchResults(oe.value,re.querySelectorAll("li"),ae),a.addCSSClass(oe,"none"),a.addCSSClass(K,"none"),a.addCSSClass(Ve,"none")};S.onclick=P=>{if(P.stopPropagation(),S.getAttribute(ce)==="true")Ke(),S.focus();else{S.setAttribute(ce,"true"),a.removeCSSClass(Q,"none");const ie=re.firstElementChild;ie?ie.focus():a.removeCSSClass(Ve,"none"),setTimeout(()=>document.addEventListener("click",W))}},S.onkeydown=P=>{const ie=P.code;P.ctrlKey||P.altKey||P.metaKey||P.shiftKey||ie===T.Esc||ie===T.Tab||(S.click(),a.removeCSSClass(oe,"none"),a.removeCSSClass(K,"none"),oe.focus())},a.setAttributes(S,{id:b,ariaRequired:x?"true":"false"}),S.tabIndex=0,_&&S.setAttribute("data-error",_),(i=Be.options)===null||i===void 0||i.forEach(P=>{const ie=Sa=>{const Ws=a.createDiv(["multi-select-option"]);Ws.innerText=P.label;const qo=a.createImageIcon({icon:Ge,iconCss:["opt-close"]});qo.onclick=()=>{z.removeChild(Ws),re.append(Sa);const wt=this._submittedFields[b];wt.splice(wt.indexOf(P.value),1),this._partialSubmit(b,g,S)},Ws.append(qo),Ws.onclick=wt=>{wt.stopPropagation(),S.getAttribute(ce)==="true"&&S.click()},z.append(Ws)},Us=()=>{S.click(),re.removeChild(ks),this._submittedFields[b].push(P.value),ie(ks),this._partialSubmit(b,g,S)},ks=a.createListItem(P.label,P.label,P.label,he,he,Us,!1,!1);ks.onkeydown=Sa=>this._onMenuClick(Sa,ks,re,S,ae),y!=null&&y.includes(P.value)?ie(ks):re.append(ks)}),J.onclick=P=>P.stopPropagation(),S.append(z),this._inputElements.push(S),K.append(is),Q.append(Hs,oe,K,re),J.append(Q),h.append(S,J),Y=!0}else if(D==="checkboxes"){const S=a.createElement("form",this._getSelectFieldCSS(Be));a.setAttributes(S,{id:b,ariaLabel:v,errorMsg:_,ariaRequired:x?"true":"false"}),S.onclick=z=>z.stopPropagation(),Be.options.forEach(z=>{const J=a.createInputElement({type:"checkbox",name:b,value:z.label,checked:y==null?void 0:y.includes(z.value),required:x},["radio-input"]),Q=a.createLabel();Q.innerText=z.label,Q.prepend(J),J.onchange=()=>{if(J.checked)this._submittedFields[b].push(z.value);else{const ae=this._submittedFields[b];ae.splice(ae.indexOf(z.value),1)}this._partialSubmit(b,g,S)},S.append(Q)}),this._inputElements.push(S),h.append(S)}else this._logger.error(`Payload contains wrong layout style:${D} for multi select field`);break;case $.Toggle:const F=e,os=a.createLabel([`${t}-value`,"toggle"]);os.tabIndex=0,os.onclick=S=>S.stopPropagation(),w=a.createInputElement({id:b,placeholder:k,required:x,type:"checkbox",checked:F.defaultValue===F.valueOn,errorMsg:_,valueOn:F.valueOn,valueOff:F.valueOff});const jo=F.labelOn||F.valueOn,Go=F.labelOff||F.valueOff;w.setAttribute("aria-label",w.checked?jo:Go),w.oninput=()=>{w.setAttribute("aria-label",w.checked?jo:Go),this._partialSubmit(b,g,w)},os.append(w,a.createDiv(["round-slider"])),h.append(os);break;case $.DatePicker:const xa=e;w=a.createInputElement({type:"date",id:b,title:k,required:x,defaultValue:xa.defaultValue,min:xa.minDate,max:xa.maxDate,errorMsg:_},[`${t}-value`]);break;case $.TimePicker:const ka=e;w=a.createInputElement({type:"time",id:b,title:k,required:x,defaultValue:ka.defaultValue,min:ka.minTime,max:ka.maxTime,errorMsg:_},[`${t}-value`]);break;case $.TextInput:const Pe=e;if(Pe.multiLine){const S=a.createElement("textarea",["textarea",`${t}-value`],!0);a.setAttributes(S,{id:b,required:x,minLength:Pe.minLength,maxLength:Pe.maxLength,defaultValue:Pe.defaultValue,placeholder:Pe.placeholder,errorMsg:_}),S.rows=3,S.onchange=()=>this._partialSubmit(b,g,S),S.onclick=z=>z.stopPropagation(),h.append(S),this._inputElements.push(S),Y=!0}else w=a.createInputElement({type:Pe.inputStyle||"text",id:b,placeholder:k,required:x,defaultValue:Pe.defaultValue,errorMsg:_,minLength:Pe.minLength,maxLength:Pe.maxLength,pattern:Pe.validationRegularExpression},[`${t}-value`]);break;case $.NumberInput:const ya=e;w=a.createInputElement({type:"number",id:b,placeholder:k,required:x,defaultValue:(n=ya.defaultValue)===null||n===void 0?void 0:n.toString(),min:(p=ya.minValue)===null||p===void 0?void 0:p.toString(),max:(l=ya.maxValue)===null||l===void 0?void 0:l.toString(),errorMsg:_,step:"any"},[`${t}-value`]);break;default:this._logger.error(`Payload contains wrong display type:${v} for editable field`)}w&&(w.type!=="checkbox"&&(h.appendChild(w),w.onchange=()=>this._partialSubmit(b,g,w),w.onclick=te=>te.stopPropagation(),Y=!0),this._inputElements.push(w));const De=this._createHintWrapper(Y);return this._insertHintRequired(De,x),this._insertHintValidationError(De,C),h.append(De),h}_isFieldValid(e,s=!1){const t=e.dataset.error,a=e.parentElement.tagName==="LABEL"?e.parentElement.parentElement:e.parentElement,r=a.querySelector(`.${this.cssPrefix}-form-hint-wrapper`),i=()=>{if(!s)if(n)r&&(r.innerHTML=""),a.classList.contains(`${this.cssPrefix}-error`)&&(this.util.removeCSSClass(a,"error"),this._fieldErrorCount--);else{const l=p!=null?p:this.translations.editFieldErrorMessage;this._insertHintValidationError(r,l)}};let n=!0,p;switch(e.tagName.toLowerCase()){case"form":const l=e,c=l.querySelector("input"),m=l.getAttribute("aria-label");m===$.MultiSelect&&l.ariaRequired==="true"?this._submittedFields[l.id].length||(n=!1,p=t||(c==null?void 0:c.validationMessage)):m===$.SingleSelect&&!l.checkValidity()&&(n=!1,p=t||(c==null?void 0:c.validationMessage));break;case"input":const h=e;h.type==="checkbox"||h.checkValidity()||(p=t||h.validationMessage,n=!1);break;case"textarea":const d=e;d.checkValidity()||(p=t||d.validationMessage,n=!1);break;case"div":const u=e;if(u.getAttribute("aria-label")===$.SingleSelect){const b=u.firstElementChild;n=!b.required||!!this._submittedFields[b.id],n||(p=t||b.validationMessage);break}else u.getAttribute("aria-required")==="true"&&(p=t,n=!!this._submittedFields[e.id].length)}return i(),n}_filterSearchResults(e,s,t){const a=this.util;return t.length=0,s.forEach(r=>{const i=r.querySelector("span"),n=r.textContent||r.innerText;n.toLowerCase().indexOf(e.toLowerCase())<0?(a.addCSSClass(r,"none"),i.innerHTML=n.replace(/(<b>)|(<\/b>)/g,he)):(e?i.innerHTML=n.replace(new RegExp(`${e}`,"gi"),"<b>$&</b>"):i.innerHTML=n.replace(/(<b>)|(<\/b>)/g,he),a.removeCSSClass(r,"none"),t.push(r))}),t.length>0}_onMenuClick(e,s,t,a,r){var i,n,p,l;const c=this.cssPrefix,m=r.indexOf(s),h=r.length;let d=!1;if(!(e.ctrlKey||e.altKey||e.metaKey)){if(e.shiftKey&&e.code===T.Tab)a.click();else switch(e.code){case T.Return:case T.Space:s.click(),d=!0;break;case T.Esc:case T.Tab:a.click(),e.code===T.Esc&&(a.focus(),d=!0);break;case T.Up:const u=s.previousElementSibling||t.lastElementChild;u.classList.contains(`${c}-none`)?(i=r[(m+h-1)%h])===null||i===void 0||i.focus():u.focus(),d=!0;break;case T.Down:const b=s.nextElementSibling||t.firstElementChild;b.classList.contains(`${c}-none`)?(n=r[(m+1)%h])===null||n===void 0||n.focus():b.focus(),d=!0;break;case T.Home:case T.PageUp:const v=t.firstElementChild;v.classList.contains(`${c}-none`)?(p=r[0])===null||p===void 0||p.focus():v.focus(),d=!0;break;case T.End:case T.PageDown:const k=t.lastElementChild;k.classList.contains(`${c}-none`)?(l=r[h-1])===null||l===void 0||l.focus():k.focus(),d=!0;break;default:if(a instanceof HTMLInputElement)a.focus();else{const x=t.previousElementSibling,_=x.previousElementSibling,C=this.util;C.removeCSSClass(_,"none"),C.removeCSSClass(x,"none"),_.focus()}}d&&(e.stopPropagation(),e.preventDefault())}}_partialSubmit(e,s,t){var a;if(this._isFieldValid(t)&&s){const r=$e(this.getSubmittedFields());this._inputElements.forEach(l=>{this._isFieldValid(l,!0)||delete r[l.id]}),Object.keys(r).forEach(l=>{const c=r[l];Array.isArray(c)?c.length===0&&delete r[l]:c!==0&&!c&&delete r[l]});const i=(a=this._payload.actions)===null||a===void 0?void 0:a.find(l=>l.type===R.SubmitForm),n={type:f.FormSubmission,submittedFields:r,partialSubmitField:e};i&&(n.postback=i.postback);const p=this.settings.sdkMetadata?Object.assign({version:G},this.settings.sdkMetadata):{version:G};this._options.webCore.sendMessage(ve(n),{sdkMetadata:p}).then(()=>{const l=this.settings.disablePastActions;l==="all"?this.disableActions():l==="postback"&&this.disablePostbacks()}).catch(l=>this._logger.error("[partialSubmit] Failed to send postback message:",l))}}_createHintWrapper(e=!1){const s="form-hint-wrapper";return this.util.createDiv(["flex-row",s,...e?[`${s}-end`]:[]])}_insertHintRequired(e,s=!1){if(!s||!e)return;const a=this.util.createTextDiv(["form-hint-required"]);a.textContent=this._localeText.requiredTip,e.innerHTML="",e.append(a)}_insertHintValidationError(e,s,t=!1){if(!s||!e)return;const a=this.util,r=a.createImageIcon({icon:ga,iconCss:["field-error-icon"]}),i=a.createTextDiv(["field-error-text"]);i.textContent=s;const n=["field-error","flex-row-nowrap"];t&&n.push("form-error");const p=a.createDiv(n);if(p.append(r,i),e.innerHTML="",e.append(p),!t){const l=e.parentElement;a.addCSSClass(l,"error"),this._fieldErrorCount++}}_getSelectFieldCSS(e){return["form-message-value","form-container",e.layoutDirection==="horizontal"?"flex-row":"flex-col"]}}function ct(o,e,s,t=!0){o&&Oe(o.parentElement,t,s),e.forEach(a=>{switch(!0){case a instanceof HTMLFormElement:Lp(a,t,s);break;case a instanceof HTMLInputElement:Dp(a,t,s);break;case a instanceof HTMLTextAreaElement:Pp(a,t,s);break;case a instanceof HTMLDivElement:zp(a,t,s)}})}const Oe=(o,e,s)=>{const t="disabled";e?s.addCSSClass(o,t):s.removeCSSClass(o,t)},Lp=(o,e,s)=>{Oe(o,e,s),Oe(o.parentElement,e,s);const t=o.querySelectorAll("input");for(const a of t)a.disabled=e},Dp=(o,e,s)=>{if(o.disabled=e,o.parentElement instanceof HTMLLabelElement?Oe(o.parentElement.parentElement,e,s):Oe(o.parentElement,e,s),o.type==="checkbox"){const t=o.parentElement;Oe(t,e,s),t.tabIndex=e?-1:0}},Pp=(o,e,s)=>{o.disabled=e,Oe(o.parentElement,e,s)},zp=(o,e,s)=>{if(o.ariaDisabled=e?"true":"false",Oe(o,e,s),Oe(o.parentElement,e,s),Rp(o))o.tabIndex=e?-1:0;else if(Op(o)){const t=o.firstChild,a=o.firstChild.nextSibling;t.disabled=e,a.disabled=e}},Rp=o=>{var e;return o.childElementCount===1&&((e=o.firstElementChild)===null||e===void 0?void 0:e.tagName.toLowerCase())==="ul"},Op=o=>{var e;return o.childElementCount===2&&((e=o.firstElementChild)===null||e===void 0?void 0:e.tagName.toLowerCase())==="input"},ws=100;class Fp extends nt{getContent(){const e=this.util,s=this._payload,t=jr(s.headings),a="table-message",r=e.createDiv([`${a}-wrapper`]),i=s.tableTitle;if(i){const l=e.createDiv([`${a}-table-title-wrapper`]),c=e.createElement("strong",[`${a}-table-title`],!0);c.textContent=i,l.append(c),r.append(l)}const n=e.createElement("table",[a]);r.append(n);const p=e.createElement("tr",[`${a}-headings`]);return t.forEach(l=>{const c=Os(e,[`${a}-heading`],l.width,l.alignment);c.innerText=l.label,p.append(c)}),n.append(p),s.rows.forEach(l=>{const c=e.createElement("tr",[`${a}-row`]);if(l.selectAction){const m=xe.fromActionPayload(l.selectAction,e,this.settings,this.shareText,this._fieldOptions);ta(m,this._actions,c,l.selectAction.label)}l.fields.forEach((m,h)=>{const d=Os(e,[`${a}-item`],t[h].width,m.alignment),u=new Rs(this.settings,e,m,this.shareText,this._fieldOptions);u.isTableField=!0,u.isPostbackAction()&&this._actions.push(u.action),d.append(u.render()),c.append(d)}),n.append(c)}),super.getContent(r)}}function Os(o,e,s,t){const a=o.createElement("td",e,!0);return a.style.textAlign=t,a.style.width=`${s}%`,a}function jr(o){let e;if(o.every(t=>!t.width||t.width>=0&&t.width<=ws)){let t=0,a=0;if(o.forEach(r=>{r.width?a+=r.width:t++}),t)if(a<ws){const r=(ws-a)/t;e=o.map(i=>(i.width||(i.width=r),i))}else e=Gr(o);else if(a===ws)e=o;else{const r=ws/a;e=o.map(i=>(i.width=i.width*r,i))}}else e=Gr(o);return e}function Gr(o){const e=ws/o.length;return o.map(s=>(s.width=e,s))}class Bp extends nt{getContent(){const e=this.util,s=this._payload,t=jr(s.headings.concat({alignment:"center",label:""})),a="table-message",r=e.createDiv([`${a}-wrapper`]),i=s.tableTitle;if(i){const c=e.createDiv([`${a}-table-title-wrapper`]),m=e.createElement("strong",[`${a}-table-title`],!0);m.textContent=i,c.append(m),r.append(c)}const n=e.createElement("table",[a,"tableform-message"]);r.append(n);const p=e.createElement("tr",[`${a}-headings`]);t.forEach(c=>{const m=Os(e,[`${a}-heading`],c.width,c.alignment);m.innerText=c.label,p.append(m)}),n.append(p);const l=p.lastElementChild;return l.style.width="32px",s.rows.forEach((c,m)=>{const h=e.createElement("tr",[`${a}-row`]);c.fields.forEach((g,w)=>{const y=Os(e,[`${a}-item`],t[w].width,g.alignment),D=new Rs(this.settings,e,g,this.shareText,this._fieldOptions);D.isTableField=!0,D.isPostbackAction()&&this._actions.push(D.action),y.append(D.render()),h.append(y)}),s.formColumns>2&&(s.formColumns=2);const d=s.forms[m],u=Os(e,[`${a}-item`,"button-cell"]),b=e.createIconButton({css:[`${a}-item`,`${a}-item-form-toggle`],icon:jl,iconCss:[],title:d.title||""});u.append(b),h.append(u);const v="none",k="rotate-180",[x,_]=Nr(d,s.formColumns,e,this.settings,this._fieldOptions);this._actions=this._actions.concat(_),e.addCSSClass(x,v);let C=!1;h.onclick=()=>{C?(e.addCSSClass(x,v),e.removeCSSClass(b,k)):(e.removeCSSClass(x,v),e.addCSSClass(b,k)),C=!C},n.append(h,x)}),super.getContent(r)}}var Vp=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};class $p{constructor(e,s,t,a){var r;this._settings=e,this._util=s,this._options=a,this._actions=[],this._postActions=[],this._handleOnActionClick=i=>{var n,p;i.type===R.Client&&i.actionType===Ts.COPY_MESSAGE_TEXT&&(i.getPayload=()=>Vp(this,void 0,void 0,function*(){return this.getCopyContent()}));const l=i;l.messageComponent=this,(p=(n=this._options).onMessageActionClicked)===null||p===void 0||p.call(n,l)},this.getCopyContent=()=>{var i;return Ra((i=this._element)===null||i===void 0?void 0:i.cloneNode(!0))},this._title=t.title,this._description=t.description,this._imageUrl=t.imageUrl,this._url=t.url,(r=t.actions)!==null&&r!==void 0||(t.actions=[]),this._actions=t.actions.map(i=>{var n;const p=(this._title?`${this._title} - `:"")+(this._description?`${this._description} - `:"")+((n=this._url)!==null&&n!==void 0?n:"");return xe.fromActionPayload(i,s,e,p,Object.assign(Object.assign({},a),{onMessageActionClicked:this._handleOnActionClick}))}).filter(Boolean),this._postActions=Re(this._actions)}render(){const e=this._util,s=this._settings,t=s.embeddedVideo,a=s.locale,r=this._url,i=e.createDiv(["card"]),n=r?e.createAnchor(r,"",["card-component"],s.openLinksInNewWindow,s.linkHandler):e.createDiv(["card-content"]);if(this._url&&(n.innerText=""),this._imageUrl){const l=s.i18n;let c=l[a].cardImagePlaceholder;if(this._options&&this._options.locale){const m=l[this._options.locale];c=m?m.cardImagePlaceholder:c}n.append(e.createImage(this._imageUrl,["card-image"],c))}const p=e.createTextDiv(["card-title"]);if(p.innerHTML=qe(this._title,e.cssPrefix,t),n.append(p),this._description){const l=e.createTextDiv(["card-description"]);l.innerHTML=qe(this._description,e.cssPrefix,t),n.append(l)}if(i.append(n),s.linkHandler?as(n,s.linkHandler):s.openLinksInNewWindow&&rs(n),this._actions.length>0){const l=e.createDiv(s.cardActionsLayout!=="horizontal"?["card-actions","col"]:["card-actions"]);let c=!0;for(const m of this._actions){const h=m.render();c&&(this._firstActionButton=h,c=!1),l.append(h)}i.append(l)}return this._element=i,i}hasActions(){return this._actions.length>0}disableActions(){this._actions.forEach(e=>e.disable())}disablePostbacks(){this._postActions.forEach(e=>e.disable())}enableActions(){this._actions.forEach(e=>e.enable())}enablePostbacks(){this._postActions.forEach(e=>e.enable())}getFirstActionButton(){return this._firstActionButton}}class aa extends ss{constructor(e,s,t,a,r,i){super(e,s,t,a,r,i),this._cards=[],this._layout=t.layout,this._numCards=t.cards.length,t.cards.forEach(n=>{this._cards.push(new $p(this.settings,s,n,this._options))}),this.globalActions=this.actions.concat(this.globalActions),this.actions=[],this._isRTL=!1,this._isDefaultWidth=!0}hasActions(){return this._cards[0].hasActions()||this.actions.length>0||this.globalActions.length>0}disableActions(){super.disableActions(),this._cards.forEach(e=>{e.disableActions()})}disablePostbacks(){super.disablePostbacks(),this._cards.forEach(e=>{e.disablePostbacks()})}enableActions(){super.enableActions(),this._cards.forEach(e=>{e.enableActions()})}enablePostbacks(){super.enablePostbacks(),this._cards.forEach(e=>{e.enablePostbacks()})}render(){const e=this.util,s=this.settings.name,t=[`card-message-${this._layout}`],a=super.render();if(a.querySelector(`.${s}-icon-wrapper`)){t.push("has-message-icon");const r=a.querySelector(`.${s}-content-wrapper`);e.addCSSClass(r,"with-icon")}return e.addCSSClass(a,...t),a}setCardsScrollAttributes(e){this._isRTL=getComputedStyle(this._cardsWrapper).direction==="rtl",this._isDefaultWidth=e==="default"}getContent(){const e=this.util,s=this._numCards,t=e.createDiv(["card-message-content"]),a=e.createDiv(["card-message-cards"]),r=100,i=5;let n=!0;if(this._cards.forEach(c=>{const m=c.render();n&&c.hasActions()&&(this.firstActionButton=c.getFirstActionButton(),n=!1),a.append(m)}),t.append(a),this._layout==="horizontal"&&s>1){t.append(this._getNextButton()),this._activeCard=0;let c;a.addEventListener("scroll",()=>{clearTimeout(c),c=setTimeout(()=>{let m=0;for(let h=0;h<s;h++){const d=this._isRTL?s-h-1:h,u=a.children[d];if(a.scrollLeft<=u.offsetLeft+i){m=d;break}}m!==this._activeCard&&(this._activeCard=m,this._updateCardsScrollState())},r)}),window.addEventListener("resize",$s(()=>{this._showHideNavButtons()},500))}this._content=t,this._cardsWrapper=a;const p=this.settings.name;return new IntersectionObserver(c=>{c.forEach(m=>{m.isIntersecting&&this._showHideNavButtons()})},{root:document.querySelector(`.${p}-conversation`)}).observe(a),t}_getNextButton(){if(!this._nextButton){const e=this.util,s=this.translations.cardNavNext;this._nextButton=e.createDiv(["next-wrapper"]);const t=e.createIconButton({css:["round","next"],icon:Gl,iconCss:[],title:s});t.onclick=this._showNextCard.bind(this),this._nextButton.append(t)}return this._nextButton}_getPreviousButton(){if(!this._prevButton){const e=this.util,s=this.translations.cardNavPrevious;this._prevButton=e.createDiv(["prev-wrapper"]);const t=e.createIconButton({css:["round","previous"],icon:ql,iconCss:[],title:s});t.onclick=this._showPrevCard.bind(this),this._prevButton.append(t)}return this._prevButton}_showNextCard(){this._activeCard<this._numCards&&(this._activeCard++,this._updateCardsScrollState())}_showPrevCard(){this._activeCard>0&&(this._activeCard--,this._updateCardsScrollState())}_updateCardsScrollState(){var e,s,t,a;const r=this._cardsWrapper.children[this._activeCard];r&&(this._cardsWrapper.scrollLeft=r.offsetLeft-(this._isDefaultWidth?52:68),this._activeCard===0?(e=this._prevButton)===null||e===void 0||e.remove():!((s=this._prevButton)===null||s===void 0)&&s.parentElement||this._content.prepend(this._getPreviousButton()),this._activeCard===this._numCards-1?(t=this._nextButton)===null||t===void 0||t.remove():!((a=this._nextButton)===null||a===void 0)&&a.parentElement||this._content.append(this._getNextButton()))}_showHideNavButtons(){this._cardsWrapper.scrollWidth===this._cardsWrapper.offsetWidth?(this._nextButton&&(this._nextButton.hidden=!0),this._prevButton&&(this._prevButton.hidden=!0)):(this._nextButton&&(this._nextButton.hidden=!1),this._prevButton&&(this._prevButton.hidden=!1))}}class pt extends ss{constructor(e,s,t,a,r,i){super(e,s,t,a,r,i),this._text=t.text}getContent(){const e=this.settings,s=this.util,t=this._text,a=s.createTextDiv(["message-text"]);return this.side===Z.RIGHT?Et(this.payload)&&(Np(t)||Do(t))?(s.addCSSClass(a,"message-user-postback"),a.innerHTML=t):a.textContent=yi(t):(a.innerHTML=qe(t,s.cssPrefix,e.embeddedVideo),e.linkHandler?as(a,e.linkHandler):e.openLinksInNewWindow&&rs(a)),super.getContent(a)}}const Np=o=>o?/^<img\s+/i.test(o):!1;class Hp extends pt{constructor(e,s,t,a,r,i){const n={type:f.Text,text:t.errorMessage};super(e,s,n,a,r,i)}getContent(){const e=super.getContent();return this.util.addCSSClass(e,"error"),e}}class qr{constructor(e){this._util=e}render(){const e=this._util.createDiv(["spinner"]);return e.innerHTML='<svg viewBox="0 0 64 64"><circle transform="translate(32,32)" r="26"></circle></svg>',e}}class Yr{constructor(e,s,t,a){this._text=e,this._side=s,this._settings=t,this._util=a}render(){const e=this._util,s=this._settings,t=s.icons,a=e.createDiv(["attachment"]),r=this._side===Z.LEFT?t.avatarBot:t.avatarUser,i=e.createDiv(["attachment-footer","flex"]),n=e.createTextDiv(["attachment-title"]);n.innerText=this._text,i.append(n);const p=e.createDiv(["attachment-placeholder","flex"]);return p.append(new qr(e).render()),a.append(p,i),this._element=s.searchBarMode?e.getMessage(a):e.getMessageBlock(this._side,a,r),this._element}remove(){this._element.remove()}}class Up extends ss{constructor(e,s,t,a,r,i){super(e,s,t,a,r,i);const n=t.location;this._title=n.title,this._url=n.url,this._longitude=n.longitude,this._latitude=n.latitude}render(){const e=this.util,s=this.settings,t=this.translations,a=this._createLocationAttachmentContent(e,s,t);return super.render(a)}_createLocationAttachmentContent(e,s,t){const a=e.createDiv(["attachment"]),r=e.createImageIcon({icon:s.icons.shareMenuLocation||To}),i=e.createDiv(["attachment-icon"]);i.append(r);const n=e.createDiv(["flex-center","attachment-placeholder"]);n.append(i);const p=this._createAttachmentFooter(e,s,t);return a.append(n,p),a}_createAttachmentFooter(e,s,t){var a;const r=e.createDiv(["attachment-footer","flex"]),i=e.createLabel(["attachment-title"]),n=((a=this._title)===null||a===void 0?void 0:a.trim())||`${this._latitude.toFixed(4)}, ${this._longitude.toFixed(4)}`;if(i.textContent=n,r.append(i),!this.hasActions()){const p=this._createDefaultMapAction(e,s,t);r.append(p)}return r}_createDefaultMapAction(e,s,t){const a=e.createDiv(["attachment-controls"]),r=this._url||`https://www.google.com/maps/@${this._latitude},${this._longitude},12z`,i=e.createAnchor(r,"",["attachment-control-icon","attachment-button","flex"],s.openLinksInNewWindow,s.linkHandler);i.title=t.openMap;const n=e.createImageIcon({icon:s.icons.externalLink||Ql});return i.append(n),a.append(i),a}}class Wp{constructor(e,s,t,a,r,i=!0){this._title=e,this._text=s,this._side=t,this._settings=a,this._util=r,this._isError=i}render(e){const s=this._util,t=this._settings,a=t.icons,r="message",i=s.createDiv([`${r}-content`]),n=this._side===Z.LEFT?a.avatarBot:a.avatarUser;if(e){s.addCSSClass(i,`${r}-with-icon`);const m=s.createImageIcon({icon:e}),h=s.createDiv([`${r}-icon`]);h.append(m),i.append(h)}const p=s.createDiv([`${r}-text`]),l=s.createTextDiv([`${r}-title`]),c=s.createTextDiv([`${r}-description`]);return l.innerText=this._title,c.innerText=this._text,p.append(l,c),i.append(p),t.searchBarMode?s.getMessage(i,this._isError):s.getMessageBlock(this._side,i,n,this._isError)}}class jp extends ss{constructor(e,s,t,a,r,i){super(e,s,t,a,r,i),this._payload=JSON.stringify(t.payload)}getContent(){const e=this.util.createTextSpan();return e.innerText=this._payload,super.getContent(e)}}const Gp=setTimeout,qp=setInterval,Yp=1e3,Kp=1e4,Xp=6e4,Kr=6e4,Xr=60*Kr,ra=24*Xr,Zp=30*ra,Jp=365*ra,lt=60,Zr=24,Jr=30,Qr=12,eo="relTimeNow",so="relTimeMoment",Qp="relTimeMin",el="relTimeHr";class sl{constructor(e,s){this._util=s,this._localeText=Object.assign(Object.assign({},e.i18n.en),e.i18n[e.locale]);const t=e.icons,a=e.name,r=` ${a}-has-message-icon`;this._cssPrefix=a,this._cssSkill=`${a}-left${t.avatarBot?r:""}`,this._cssUser=`${a}-right${t.avatarUser?r:""}`}render(){const e=this._util;let s=this._element;return s?(s.setAttribute("aria-live","off"),s.setAttribute("aria-hidden","true")):s=e.createTextDiv(),s.className=`${this._cssPrefix}-relative-timestamp ${this._css}`,this._element=s,s}setLocale(e){if(this._localeText=e,this._key)switch(this._key){case eo:case so:this._setTime(e[this._key]);break;default:this._setTime(e[this._key].replace("{0}",`${this._counter}`))}}setRelativeTime(e){const t=new Date().getTime()-e.getTime(),a=Math.floor(t/1e3),r=Math.floor(a/lt),i=Math.floor(r/lt),n=Math.floor(i/Zr),p=Math.floor(n/Jr),l=Math.floor(p/Qr);l>0?this._setYears(l):p>0?this._setMonths(p):n>0?this._setDays(n):i>0?this._setHours(i):r>0?this._setMinutes(r):this._setMoment(a)}refresh(e){this._css=e===Ae.Skill?this._cssSkill:this._cssUser,this._element.className=`${this._cssPrefix}-relative-timestamp ${this._css}`,this._setNow()}remove(){var e;!((e=this._element)===null||e===void 0)&&e.parentElement&&this._element.remove()}_setNow(){this._runTimeout(eo,Kp,this._setMoment.bind(this))}_setMoment(e=10){e=e*Yp,this._runTimeout(so,Xp-e,this._setMinutes.bind(this))}_setMinutes(e=1){this._runTimer(Qp,Kr,lt,this._setHours.bind(this),e)}_setHours(e=1){this._runTimer(el,Xr,Zr,this._setDays.bind(this),e)}_setDays(e=1){this._runTimer("relTimeDay",ra,Jr,this._setMonths.bind(this),e)}_setMonths(e=1){this._runTimer("relTimeMon",Zp,Qr,this._setYears.bind(this),e)}_setYears(e=1){this._runTimer("relTimeYr",Jp,lt,()=>{},e)}_runTimeout(e,s,t){this._resetTimer(),this._setTime(this._localeText[e]),this._key=e,this._updateTimer=Gp(()=>{t()},s)}_runTimer(e,s,t,a,r=1){this._resetTimer(),this._setTime(this._localeText[e].replace("{0}",`${r}`)),this._key=e,this._counter=r,this._updateTimer=qp(()=>{r++,this._counter=r,r>t?(clearInterval(this._updateTimer),a()):this._setTime(this._localeText[e].replace("{0}",`${r}`))},s)}_setTime(e){this._element||this.render(),this._element.innerText=e}_resetTimer(){clearTimeout(this._updateTimer),clearInterval(this._updateTimer)}}class tl extends pt{constructor(e,s,t,a,r,i){super(e,s,t,a,r,i),this._currentRating=0,this._payloadActions=t.actions,this.ratingId=Date.now()}focusFirstAction(){this._ratingActions[0].focus()}disableActions(){this._setDisabled(!0),super.disableActions()}disablePostbacks(){this._setDisabled(!0),super.disablePostbacks()}enableActions(){this._setDisabled(!1),super.enableActions()}enablePostbacks(){this._setDisabled(!1),super.enablePostbacks()}highlightRating(e){if(!this.actions||!this._ratingActions)return;const s=this.util,t="active",a=typeof e=="string"?this._getValidRating(e):e;for(let r=1;r<=this._ratingActions.length;r++){const i=this._ratingActions[r-1];if(!i)break;a&&r<=a||a===0&&r<=this._currentRating?s.addCSSClass(i,t):s.removeCSSClass(i,t)}}getActions(){const e=this.util,s=this.settings,t=s.i18n[s.locale].ratingStar,a=["rating-wrapper"],r=e.createDiv(a);this._ratingActions=this._payloadActions.map(n=>{const p=e.createElement("input",["star-input","rating-hidden"]);p.id=`rating-${n.label}-${this.ratingId}`,p.type="radio",p.name=`rating-${this.ratingId}`,p.value=n.label;const l=e.createLabel(["star-label"]);l.htmlFor=`rating-${n.label}-${this.ratingId}`,l.setAttribute("data-rating",n.label);const c=e.createTextSpan(["rating-hidden"]),m=t.replace("{0}",`${n.label}`);c.innerText=m;const h=s.icons&&s.icons.rating||om,d=e.createImageIcon({icon:h,iconCss:["rating-star-icon"]});return l.append(c,d),p.onfocus=()=>{p.disabled||(this._currentRating=this._getRatingStarsAndHighlight(p))},p.onkeydown=u=>{u.key==="Enter"&&this._submitRating(n)},l.onclick=()=>{p.disabled||(this._currentRating=this._getRatingStarsAndHighlight(l),this._submitRating(n))},l.onmouseover=()=>{p.disabled||this._getRatingStarsAndHighlight(l)},l.onmouseleave=()=>{p.disabled||this._getRatingStarsAndHighlight(null)},r.append(p,l),p}),this._currentRating&&this._getRatingStarsAndHighlight(null);const i=e.createDiv(["rating-root"]);return i.append(r),i}_setDisabled(e){this._ratingActions&&this._ratingActions.forEach(s=>{s.disabled=e})}_submitRating(e){const s={getPayload:()=>Promise.resolve(e.postback),label:e.label,type:e.type};this._handleOnActionClick(s)}_getRatingStarsAndHighlight(e){let s=0;if(e){const t="value"in e?e.value:e==null?void 0:e.getAttribute("data-rating");s=t?parseInt(t,10):0}return this.highlightRating(s),s}_getValidRating(e){let s=0;if(/^\d+$/.exec(e)){const t=parseInt(e,10);t>0&&t<=this.actions.length&&(s=t)}return s}}const al=1,to="start",rl="running",oa="end",ol=20;class ia extends ss{constructor(e,s,t,a,r,i){var n;super(e,s,t,a,r,i),this._lastChunk="",this._isFresh=!0,this._state=t.streamState,this._text=t.text,this._lastChunk=t.text,this._isFresh=(n=i.isFresh)!==null&&n!==void 0?n:this._isFresh;let p="";this._buffer=il(l=>{p+=l;const c=p.length%ol?p:qe(p,s.cssPrefix,e.embeddedVideo),m=Po(c);this.textElement&&(this.textElement instanceof HTMLInputElement||this.textElement instanceof HTMLTextAreaElement?(this.textElement.focus(),this.textElement.value=m,this.textElement instanceof HTMLTextAreaElement&&(this.textElement.scrollTop=this.textElement.scrollHeight)):this.textElement.innerHTML=m)},()=>{var l;this._state===oa&&(this.isCoPilot?this.showDone():(this._text=(l=this.textElement)===null||l===void 0?void 0:l.innerHTML,this.render()))},e.typingDelay||al)}update(e){const s=e.streamState;switch(this._state=s,s){case to:this.renderClean(e),this.isCoPilot&&this._buffer.push(e.text.split(""));break;case rl:this._buffer.push(e.text.split("")),this._lastChunk=e.text,this.payload=e;break;case oa:if(this.payload=e,this._isFresh){const t=this._lastChunk;if(this._lastChunk="",t.length){const a=e.text.lastIndexOf(t);if(a>=0){const r=e.text.substring(a+t.length);this._buffer.push(r.split("")),this.isCoPilot||this.setAddOnComponents(e);break}}}this.renderClean(e);break}}freeze(){return this._buffer.clear(),this._lastChunk="",this.textElement.innerHTML}markEnd(){this.update(Object.assign(Object.assign({},this.payload),{streamState:"end"}))}getContent(){var e;const s=this.settings,t=this.util,a=t.createTextDiv();return a.setAttribute("aria-hidden","true"),this._isFresh&&(this._state===to||!this.textElement)?(this.textElement=a,this._buffer.push((e=this._text)===null||e===void 0?void 0:e.split(""))):(a.innerHTML=qe(this._text,t.cssPrefix,s.embeddedVideo),this._state===oa&&a.removeAttribute("aria-hidden"),s.linkHandler?as(a,s.linkHandler):s.openLinksInNewWindow&&rs(a)),super.getContent(a)}renderClean(e){this._buffer.clear(),this._text=e.text,this.isCoPilot||(this.setAddOnComponents(e),this.render())}setAddOnComponents(e){this.headerText=e.headerText,e.actions&&(this.actions=this.buildActions(e.actions)),this.footerText=e.footerText,e.footerForm&&(this.footerFormComponent=Lo(this.util,e.footerForm,this.settings,Object.assign(Object.assign({},this._options),{shareText:this.shareText}))),e.globalActions&&(this.globalActions=this.buildActions(e.globalActions)),this._postActions=Re(this.actions).concat(Re(this.globalActions))}}const il=(o,e,s)=>{const t=[];let a=!0;const r=p=>{t.push(...p),a&&(a=!1,i())},i=()=>{if(!t.length){a=!0,setTimeout(()=>e());return}setTimeout(()=>{t.length&&(o(t.shift()),i())},s)};return{push:r,clear:()=>{t.length=0}}};class ao extends He{constructor(e,s,t){super(),this._side=e,this._settings=s,this._util=t,this.element=this.render(),this._visible=!1,this._autoTimeout=!0}append(e){if(!this.isVisible()&&e){if(this._settings.searchBarMode){if(!e.firstChild)return;e.firstElementChild.append(this.element)}else e.append(this.element);this._visible=!0,this._resetTimeout()}}remove(){this.isVisible()&&(this.element.remove(),this._visible=!1)}isVisible(){return this._visible}render(){const e=this._util,s=this._settings,t=e.createDiv(["typing-cue-wrapper"]),a=s.icons.avatarBot;if(s.icons.typingIndicator){const r=s.icons.typingIndicator,i=e.createImageIcon({icon:r});i.style.height=s.chatBubbleIconHeight||i.style.height,i.style.width=s.chatBubbleIconWidth||i.style.width,t.append(i)}else{const r=e.createDiv(["typing-cue"]);t.append(r)}return t.setAttribute("aria-live","polite"),this._content=t,this.updateTypingCueLocale(s.i18n[s.locale].typingIndicator),s.searchBarMode?e.getMessage(t):e.getMessageBlock(this._side,t,a)}updateTypingCueLocale(e){this._content.setAttribute("aria-label",e)}resetTypingCueIcon(){this.element.remove(),this.element=this.render()}updateTypingCueIcon(e){e.style.marginTop="0px",this.element.firstChild.replaceWith(e)}setAutoTimeout(e){this._autoTimeout=e}_resetTimeout(){clearTimeout(this._timeoutID),this._autoTimeout&&(this._timeoutID=setTimeout(()=>{this.remove()},this._settings.typingIndicatorTimeout*1e3))}}const nl={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4};class O{constructor(e){this._module=e}debug(...e){this._log(O.LOG_LEVEL.DEBUG,e)}error(...e){this._log(O.LOG_LEVEL.ERROR,e)}info(...e){this._log(O.LOG_LEVEL.INFO,e)}warn(...e){this._log(O.LOG_LEVEL.WARN,e)}_log(e,s){if(O.logLevel>=e){s.unshift(`[${O.appName}.${O.appVersion}.${this._module}]`);let t;switch(e){case O.LOG_LEVEL.ERROR:t=console.error;break;case O.LOG_LEVEL.WARN:t=console.warn;break;case O.LOG_LEVEL.INFO:t=console.info;break;case O.LOG_LEVEL.DEBUG:t=console.debug;break}t.apply(console,s)}}}O.LOG_LEVEL=nl,O.logLevel=O.LOG_LEVEL.NONE;class xe{static fromActionPayload(e,s,t,a,r){switch(e.type){case R.Postback:return new up(e,s,r);case R.Url:return new Rr(e,s,r,t.openLinksInNewWindow,t.linkHandler);case R.Webview:return new Rr(e,s,r,t.openLinksInNewWindow,r.webviewLinkHandler);case R.Location:return new mp(e,s,r);case R.Call:return new np(e,s,r);case R.Share:return new fp(e,s,r,a);case R.SubmitForm:return new vp(e,s,r);case R.Popup:return new dp(e,s,r,t);case R.Client:return new pp(e,s,r);default:return xe.logger.error(`Payload contains wrong action type:${e.type}`),null}}}xe.logger=new O("ActionComponentFactory");function Me(o){return!!o.source}function ro(o){if(o.msgId)return o.msgId;const e=JSON.stringify(o.messagePayload);return`${cl(e)}`}const cl=o=>{let e=0,s=0;const t=9,a=Math.pow(t,t);for(;e<o.length;)s=Math.imul(s^o.charCodeAt(e++),a);return s^s>>>t};class We{static fromMessage(e,s,t,a){let r,i;Me(t)?(r=Z.LEFT,i=t.source||we.Bot):r=Z.RIGHT;const n=t.messagePayload;switch(n.type){case f.Postback:case f.Text:return n.channelExtensions&&n.channelExtensions.displayType==="stars"?new tl(e,s,n,r,i,a):new pt(e,s,n,r,i,a);case f.TextStream:return new ia(e,s,n,r,i,a);case f.Error:return new Hp(e,s,n,r,i,a);case f.Attachment:return new it(e,s,n,r,i,a);case f.Card:return new aa(e,s,n,r,i,a);case f.Location:return new Up(e,s,n,r,i,a);case f.Table:return new Fp(e,s,n,r,i,a);case f.Form:return new Ep(e,s,n,r,i,a);case f.TableForm:return new Bp(e,s,n,r,i,a);case f.EditForm:return new Mp(e,s,n,r,i,a);case f.Raw:return new jp(e,s,n,r,i,a);default:throw Error(`Wrong message payload type:${n.type}`)}}}const oo="keydown";class pl{constructor(e){var s;this._keyMap=new Map,this._isInit=!0,this._onKeyDown=a=>{if(ll(a)&&this._activate(a.code)){const r=document.querySelector(this._inputName);if(r){const i=r.value.length;setTimeout(()=>{r.value.length>i&&(r.value=r.value.slice(0,i))})}}};const t=(s=e.name)!==null&&s!==void 0?s:"oda-chat";this._inputName=`.${t}-user-input`}add(e,s,t=!0){this._isInit&&(this._init(),this._isInit=!1);const a=e.toUpperCase(),r=isNaN(a)?`Key${a}`:`Digit${a}`;this._keyMap.set(r,{check:t,elem:s}),s.setAttribute("aria-keyshortcuts",`Alt+${a}`)}setWidget(e){this._widget=e}remove(){document.removeEventListener(oo,this._onKeyDown)}_init(){document.addEventListener(oo,this._onKeyDown)}_activate(e){let s=!1;const t=this._keyMap.get(e),a=t&&t.elem;return a&&qs(t.check?this._widget:a)&&!a.disabled&&(a.focus(),a.click(),s=!0),s}}const ll=o=>o.altKey&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.repeat,Fe={SESSION:"sessionStorage",LOCAL:"localStorage",CUSTOM:"custom"},io={CLASSIC:"classic",DEFAULT:"default",REDWOOD_DARK:"redwood-dark"},ue={AUDIO:"audio",FILE:"file",LOCATION:"location",VISUAL:"visual"};class no{constructor(e){this.getItem=s=>(!this._cache[s]&&this._isStorage&&(this._cache[s]=this._storage.getItem(s)),this._cache[s]),this.setItem=(s,t)=>{this._isStorage?(this._storage.setItem(s,t),delete this._cache[s]):this._cache[s]=t},this.removeItem=s=>{this._isStorage&&this._storage.removeItem(s),delete this._cache[s]},this._cache={},$l(e)?(this._isStorage=!0,this._storage=window[e]):this._isStorage=!1}}const co={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter"},ke={KEYBOARD:"keyboard",VOICE:"voice"},Le={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""};Le.ALL=`${Le.AUDIO},${Le.FILE},${Le.IMAGE},${Le.VIDEO}`;const ml=300,po=3,gl=1e3,mt=setTimeout;class na extends He{constructor(e,s,t,a,r,i,n,p,l,c,m){super(),this._util=e,this._onSendCallback=s,this._onUploadCallback=t,this._settings=a,this._onQueryChangeCallback=r,this._onSpeechToggle=i,this._onShareLocation=n,this._sendUserTypingStatusMessage=p,this._eventDispatcher=l,this._widget=c,this._setHotkeyMap=m,this._mode=void 0,this._fileMaxSize=zs,this._isProgrammaticFocus=!1,this._navKeys=[],this._isDisabledVoiceButtonLang=!1,this._isDisabledVoiceButtonNetwork=!1,this._recognitionRequested=!1,this._isFocusableDevice=!0,this._updateSendButton=()=>{var h,d;const u=this._sendButton;if(!(u!=null&&u.nodeType))return;const b=this._util,v="none",k=((d=(h=this._textArea)===null||h===void 0?void 0:h.value)===null||d===void 0?void 0:d.trim().length)>0;this._mode===ke.KEYBOARD&&(this._settings.alwaysShowSendButton||k)?b.removeCSSClass(u,v):b.addCSSClass(u,v),u.disabled=this._isFooterDisabled||!k},this._onInputKeyDown=h=>{var d;this.isDisabled()||this._settings.enableAutocomplete&&this._autocompleteComponent.isOpen()&&this._autocompleteComponent.handleKeyboardEvent(h)||h.key===T.Return&&!h.shiftKey&&((d=this._textArea.value)===null||d===void 0?void 0:d.trim().length)>0&&(h.preventDefault(),this._sendButton.click())},this._triggerTypingEvent=zo(h=>{this._eventDispatcher.trigger(U.TYPING,h)},gl),this._sendTypingStatus=zo(h=>{this._sendUserTypingStatusMessage("RESPONDING",this._settings.enableAgentSneakPreview?h:"...")},this._settings.typingStatusInterval*fs),this._onInputKeyUp=h=>{var d;if(this._updateSendButton(),this.isDisabled()){this._invalidateSuggestions(),this._safeHideAutocomplete();return}if(h.isComposing)return;const u=(d=this._textArea.value)===null||d===void 0?void 0:d.trim();this._triggerTypingEvent(!0),this._settings.enableSendTypingStatus&&(u?this._sendTypingStatus(u):this._sendUserTypingStatusMessage("LISTENING")),clearTimeout(this._listeningStatusTimer),this._listeningStatusTimer=mt(()=>{this._triggerTypingEvent(!1),this._settings.enableSendTypingStatus&&this._sendUserTypingStatusMessage("LISTENING")},this._settings.typingStatusInterval*fs),this._settings.enableAutocomplete&&(h.code===T.Backspace&&(this._previousInputValue=void 0,this._invalidateSuggestions(),this._safeHideAutocomplete(),clearTimeout(this._suggestionsRequest)),this._getNavKeys().includes(h.code)||(u.length>=po?this._previousInputValue!==u&&(this._previousInputValue=u,clearTimeout(this._suggestionsRequest),this._setSuggestionsRequestTimer()):(this._previousInputValue=void 0,this._safeHideAutocomplete(),clearTimeout(this._suggestionsRequest))))},this._expand=()=>{if(!this._settings.searchBarMode){this._textArea.style.height=null;const d=.6*this._widget.chatWidgetDiv.clientHeight,u=this._textArea.scrollHeight;this._textArea.style.height=`${Math.min(d,u)}px`}},this._cssPrefix=a.name,this._i18n=a.i18n,this._icons=a.icons,this._localeText=Object.assign(Object.assign({},this._i18n.en),this._i18n[a.locale]),this._isFocusableDevice=!ti(),this._shareBtnID=`${this._cssPrefix}-share-button`}render(){this.element=this._createElement();const e=this._createKeyboardComponent();if(this._settings.enableSpeech){const s=this._createVoiceComponent();this._settings.searchBarMode?e.append(s):this.element.append(s)}this.element.append(e),this.setInputMode(ke.KEYBOARD),this.disable(),window.addEventListener("resize",$s(()=>{this._expand()},100))}setInputMode(e){e!==this._mode&&(this._settings.enableSpeech?(this._mode=e,this._mode===ke.KEYBOARD?this._showKeyboardMode():this._showVoiceMode()):(this._mode=ke.KEYBOARD,this._showKeyboardMode()))}getInputMode(){return this._mode}setUserInputText(e){this._textArea&&(this._textArea.value=e,this._textArea.setSelectionRange(e.length,e.length),this.focusTextArea(),this._updateSendButton())}getUserInputText(){return this._textArea.value}setUserInputPlaceholder(e){this._textArea&&(this._mode===ke.KEYBOARD?this._setInputFieldLabelAndPlaceholder(e):this._inputPlaceholder=e)}setRecognitionRequested(e){this._recognitionRequested=e}setVoiceRecording(e){this._settings.enableSpeech&&(e&&this._recognitionRequested?this.setInputMode(ke.VOICE):e||this.setInputMode(ke.KEYBOARD))}updateVisualizer(e,s){this._mode===ke.VOICE&&ee(e,this._visualizerCanvas,{color:s})}focusTextArea(){this._isFocusableDevice&&(this._isProgrammaticFocus=!0,this._textArea.focus(),this._isProgrammaticFocus=!1),this._textArea.scrollTop=this._textArea.scrollHeight}isProgrammaticFocus(){return this._isProgrammaticFocus}disable(e=!0){const s=this._util,t="disabled";this._settings.enableAttachment&&(this._shareButton.disabled=e),e?(s.addCSSClass(this._textArea,t),this._settings.enableAutocomplete&&(this._invalidateSuggestions(),this._safeHideAutocomplete())):s.removeCSSClass(this._textArea,t),this._settings.enableSpeech&&(this.setInputMode(ke.KEYBOARD),this.disableVoiceModeButton(e,{src:"network"})),this._isFooterDisabled=e,this._updateSendButton()}isDisabled(){return this._isFooterDisabled}disableVoiceModeButton(e,{src:s}){if(this._settings.enableSpeech){switch(s){case"lang":this._isDisabledVoiceButtonLang=e;break;case"network":this._isDisabledVoiceButtonNetwork=e;break}this._settings.multiLangChat&&(this._isDisabledVoiceButtonLang||this._isDisabledVoiceButtonNetwork)?this._switchToVoiceModeButton.disabled=!0:this._switchToVoiceModeButton.disabled=this._isDisabledVoiceButtonNetwork}}displaySuggestions(e){if(this._suggestions=e,this._isSuggestionsValid=e.length>0,!this._isSuggestionsValid||!this._textArea.value){this._safeHideAutocomplete();return}const s=this._textArea.value.trim().toLowerCase();this._autocompleteComponent.display(e.slice(0,Math.min(e.length,_e.MAX_SUGGESTIONS_COUNT)),s)}getSuggestions(){return this._suggestions}getSuggestionsValid(){return this._isSuggestionsValid}getSuggestionsList(){var e;return(e=this._autocompleteComponent)===null||e===void 0?void 0:e.getListbox()}setLocale(e){this._localeText=e,this._shareButton&&(dt(this._shareButton,e.upload),this._shareMenu.querySelectorAll("li").forEach(s=>{const t=s.dataset.value,a=this._localeText[`share${t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()}`]||this._localeText[t]||s;s.querySelector("span").innerText=a})),this.setUserInputPlaceholder(e.inputPlaceholder),this._sendButton&&dt(this._sendButton,e.send),this._switchToVoiceModeButton&&dt(this._switchToVoiceModeButton,e.speak),this._switchToKbdModeButton&&dt(this._switchToKbdModeButton,e.inputPlaceholder)}updateInputHeight(){this._expand()}_createElement(){return this._util.createDiv(["footer"])}_showKeyboardMode(){var e;const s=this._util;s.removeCSSClass(this.element,"mode-voice"),s.addCSSClass(this.element,"mode-keyboard"),this._setInputFieldLabelAndPlaceholder(this._inputPlaceholder),this._textArea.disabled=!1,this._updateSendButton(),this._settings.enableAutocomplete&&((e=this._textArea.value)===null||e===void 0?void 0:e.trim().length)>=po&&this._setSuggestionsRequestTimer()}_showVoiceMode(){const e=this._util;e.removeCSSClass(this.element,"mode-keyboard"),e.addCSSClass(this.element,"mode-voice"),this._inputPlaceholder=this._textArea.placeholder,this._setInputFieldLabelAndPlaceholder(this._localeText.recognitionTextPlaceholder),this._textArea.disabled=!0,this._updateSendButton(),this._safeHideAutocomplete()}_createKeyboardComponent(){var e;const s=this._util,t=s.createDiv(["footer-mode-keyboard","flex"]),a=this._settings,r=(e=a.icons)===null||e===void 0?void 0:e.footerLogo;if(r&&t.append(s.createImageIcon({icon:r,iconCss:["footer-logo"]})),a.searchBarMode){const p=s.createDiv(["input-start-slot"]);p.id=`${this._cssPrefix}-input-start-slot`,t.append(p)}this._insertInputField(t);const i=s.createDiv(["footer-actions","flex"]),n=this._createSendMessageButton();if(this._sendButton=n,this._setHotkeyMap("send",n),i.append(n),a.enableSpeech&&(this._switchToVoiceModeButton=this._createVoiceSwitchButton(),this._switchToKbdModeButton=this._createKeyboardSwitchButton(),i.append(this._switchToVoiceModeButton,this._switchToKbdModeButton)),a.enableAttachment){const p=this._createShareComponent();i.append(p)}return t.append(i),t}_createShareComponent(){const e=this._util,s=e.createDiv(),t=gt(this._util,{css:["button-upload","flex"],customIcon:this._icons.shareMenu,defaultIcon:Hl,title:this._localeText.upload});t.id=this._shareBtnID;const a=e.createElement("input",["none"]);a.type="file",a.tabIndex=-1,a.setAttribute("aria-hidden","true"),this._uploadFileInput=a,this._shareMenu=this._getShareMenu(t);const r=e.getMenuButton({button:t,menuId:this._shareMenu.id,menu:this._shareMenu,widget:this._settings.searchBarMode?this._widget.element:this._widget.chatWidgetDiv});return L(r,"click",()=>{this._safeHideAutocomplete()}),this._shareButton=r,this._setHotkeyMap("shareMenu",r),document.addEventListener("deviceready",()=>{const i=globalThis?globalThis.device:window?window.device:void 0;(i==null?void 0:i.platform)==="Android"&&this._uploadFileInput.removeAttribute("accept")},!1),L(a,"click",()=>a.value=null),L(a,"change",i=>{const n=i.target;n.files&&n.files.length&&this._onUpload(n.files[0])}),s.append(this._shareButton,this._shareMenu,a),s}_getShareMenu(e){return this._util.getMenu({menuId:`${this._settings.name}-share-menu`,menuClassList:["share-popup-list"],buttonId:this._shareBtnID,menuItems:this._getShareItems(),menuButton:e})}_getShareItems(){const e=this._util,s=this._icons,t=this._localeText,a=this._uploadFileInput,r=`${this._cssPrefix}-share-`;let i=this._settings.shareMenuItems;const n=[],p=[ue.AUDIO,ue.FILE,ue.LOCATION,ue.VISUAL],l=new Set;if((!(i!=null&&i.length)||i.every(h=>typeof h=="string"&&!p.includes(h.toLowerCase())))&&(i=p),i.forEach(h=>{typeof h=="string"&&l.add(h.toLowerCase())}),l.has(ue.VISUAL)){const h=`${r}visual`,d=s.shareMenuVisual||pm,u=e.createListItem(h,t.shareVisual,"visual",d,"share-popup-item",()=>{a.accept=`${Le.IMAGE},${Le.VIDEO}`,a.click()});n.push(u),this._setHotkeyMap("shareMenuVisual",u)}if(l.has(ue.AUDIO)){const h=`${r}audio`,d=s.shareMenuAudio||cm,u=e.createListItem(h,t.shareAudio,"audio",d,"share-popup-item",()=>{a.accept=Le.AUDIO,a.click()});n.push(u),this._setHotkeyMap("shareMenuAudio",u)}if(l.has(ue.FILE)){const h=`${r}file`,d=s.shareMenuFile||Co,u=e.createListItem(h,t.shareFile,"file",d,"share-popup-item",()=>{a.accept=Le.FILE,a.click()});n.push(u),this._setHotkeyMap("shareMenuFile",u)}if(l.has(ue.LOCATION)){const h=`${r}location`,d=s.shareMenuLocation||To,u=e.createListItem(h,t.shareLocation,"location",d,"share-popup-item",()=>this._onShareLocation());n.push(u),this._setHotkeyMap("shareMenuLocation",u)}const c=s.shareMenuFile||Co;return this._settings.shareMenuItems.filter(h=>typeof h!="string"&&typeof h.type=="string").forEach(h=>{const d=h.type.toLowerCase(),u=`share_${d.includes("*")?"all":d.replace(/ /g,"_")}`,b=`${this._cssPrefix}-${u}`,v=t[u]||this._i18n.en[u];let k=h.label;v?k=v:this._i18n.en[u]=k;const x=h.icon||c,_=h.maxSize&&h.maxSize>=1?Math.min(h.maxSize*Ps,zs):zs;let C="";d!=="wcfs_*"&&(C=d.includes("*")&&d!=="wcfs_*"?Le.ALL:d.split(" ").map(g=>`.${g} `).join(",")),n.push(e.createListItem(b,k,u,x,"share-popup-item",()=>{this._fileMaxSize=_,a.accept=C,a.click()}))}),n}_insertInputField(e){const s=this._util;this._textArea=this._createInputTextArea();const t=s.createLabel(["hidden"]);t.id=`${this._textArea.id}-label`,t.htmlFor=this._textArea.id,this._textAreaLabel=t,this._setInputFieldLabelAndPlaceholder(this._inputPlaceholder),e.append(t,this._textArea),this._settings.enableAutocomplete&&(this._autocompleteComponent=new tp(this._textArea,`${this._cssPrefix}-suggestions-list`,this._util),e.append(this._autocompleteComponent.getListbox()))}_createInputTextArea(){const e=["user-input",...this._settings.enableSpeech?["user-input-inline-send"]:[]],s=this._util.createElement("textarea",e,!0);return s.setAttribute("enterkeyhint","send"),s.id=`${this._cssPrefix}-user-text-input`,this._inputPlaceholder=this._localeText.inputPlaceholder,s.rows=1,L(s,"keydown",this._onInputKeyDown),L(s,"keyup",this._onInputKeyUp),L(s,"input",()=>{const t=s.value;this._widget.speechFinalResult=this._widget.speechFinalResult||{speechId:"",text:""},this._widget.speechFinalResult.text=t,this._expand()}),L(s,"paste",()=>{this._isFooterDisabled||mt(this._updateSendButton)}),this._handleInputChange(s),this._setHotkeyMap("input",s),s}_setInputFieldLabelAndPlaceholder(e){this._textArea.placeholder=e,this._textAreaLabel.innerText=e}_handleInputChange(e){const s=Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value");Object.defineProperty(e,"value",{set:t=>{s.set.call(e,t),this._updateSendButton(),this._expand()},get:s.get})}_createSendMessageButton(){const e=["button-send"],s=gt(this._util,{css:e,customIcon:this._icons.send,defaultIcon:nm,title:this._localeText.send});return s.disabled=!0,s.onclick=()=>{var t;this._isUserInputEmpty()||(this._previousInputValue=void 0,this._textArea.value=(t=this._textArea)===null||t===void 0?void 0:t.value.trim(),this._settings.enableAutocomplete&&(this._invalidateSuggestions(),this._safeHideAutocomplete()),this._onSend())},s}_createVoiceSwitchButton(){const e=gt(this._util,{css:["button-switch-voice"],customIcon:this._icons.mic,defaultIcon:rm,title:this._localeText.speak});return e.onclick=()=>{this._onSpeechToggle(!0),this._recognitionRequested=!0},this._setHotkeyMap("mic",e),e}_createVoiceComponent(){const e=this._util,s=e.createDiv(["footer-mode-voice","flex"]),t=e.createDiv(["footer-visualizer-wrapper"]);return this._visualizerCanvas=e.createElement("canvas"),this._visualizerCanvas.width=244,this._visualizerCanvas.height=32,t.append(this._visualizerCanvas),s.append(t),s}_createKeyboardSwitchButton(){const e=gt(this._util,{css:["button-switch-kbd"],customIcon:this._icons.keyboard,defaultIcon:tm,title:this._localeText.inputPlaceholder});return e.onclick=()=>{this._recognitionRequested=!1,this._onSpeechToggle(!1)},this._setHotkeyMap("keyboard",e),e}_isUserInputEmpty(){return this._textArea?this._textArea.value.trim().length===0:!0}_onSend(){this._onSendCallback(this._textArea.value),this._textArea.value="",this._textArea.innerText="",mt(this._expand)}_onUpload(e){const s=this._fileMaxSize;this._fileMaxSize=zs,this._onUploadCallback(e,{maxSize:s}),this._uploadFileInput.value=""}_onQueryChange(){this._onQueryChangeCallback(this._textArea.value.trim()).catch(()=>{})}_safeHideAutocomplete(){this._autocompleteComponent&&this._autocompleteComponent.isOpen()&&this._autocompleteComponent.hide()}_setSuggestionsRequestTimer(){this._suggestionsRequest=mt(()=>{this._onQueryChange()},ml)}_invalidateSuggestions(){this._suggestions=null,this._isSuggestionsValid=!1}_getNavKeys(){if(!this._navKeys.length)for(const e of Object.keys(co))this._navKeys.push(co[e]);return this._navKeys}}function gt(o,{css:e,customIcon:s,defaultIcon:t,title:a}){const r=["footer-button","flex"],i=s||t;return o.createIconButton({css:r.concat(e),icon:i,iconCss:[],title:a})}function dt(o,e){o.title=e}const pe={EndConversation:"end-conversation",Collapse:"collapse",Clear:"clear",Tts:"tts"},ye="none";class dl extends He{constructor(e,s,t,a,r,i,n,p,l){super(),this._settings=e,this._util=s,this._onClose=t,this._onClearMessage=a,this._onAudioToggle=r,this._core=i,this._onEndConversation=n,this._setHotkeyMap=p,this._widget=l,this._logger=new O("ChatHeaderComponent"),this._headerActions=[],this._menuActions=[],this._cssPrefix=e.name,this._localeText=Object.assign(Object.assign({},this._settings.i18n.en),this._settings.i18n[e.locale])}render(){return this.element=this._createElement(),this._settings.showConnectionStatus&&(this._stateChangeListener=e=>this._updateStatusMessage(e),this._core.on(E.State,this._stateChangeListener)),this.disable(),this.element}addLanguageSelect(e){const s=!!(this._menuActions&&this._menuActions.length);this._multiLangControl=e.render(s),this._setHotkeyMap("language",this._multiLangControl),this._multiLangControl&&(s?this._actionsMenu.append(this._multiLangControl):this._actionsContainer.prepend(this._multiLangControl))}closeWidgetPopup(){this._onClose()}clearHistory(){this._onClearMessage()}showTTSButton(e){const s=this._findActionElement(pe.Tts);s&&(s.style.display=e?"flex":ye)}disableTTSButton(e){const s=this._findActionElement(pe.Tts);if(s){const t=this._util;if(s.tagName==="LI"){const a="disable";e?(t.addCSSClass(s,a),s.ariaDisabled="true"):(t.removeCSSClass(s,a),s.ariaDisabled="false")}else s.disabled=e}}setLocale(e){var s;const t=this._util,a=this._multiLangControl;this._localeText=e;const r=e.chatTitle;r&&(this._title.innerText=r);const i=e.chatSubtitle;i?(this._subtitle.innerText=i,t.removeCSSClass(this._subtitle,ye),t.addCSSClass(this._networkStatus,ye)):this._settings.showConnectionStatus?(this._updateStatusMessage(this._chatStatus),t.removeCSSClass(this._networkStatus,ye),t.addCSSClass(this._subtitle,ye)):(t.addCSSClass(this._subtitle,ye),t.addCSSClass(this._networkStatus,ye)),this._actionsMenuButton&&ca(this._actionsMenuButton,e.showOptions),(s=this._headerActions)===null||s===void 0||s.forEach(n=>{ca(n.element,e[n.title])}),a&&ca(a.querySelector("button")||a,e.languageSelectDropdown)}disable(e=!0){if(this._settings.enableEndConversation&&!this._settings.wcfsEnableEndConversationButtonToClose)for(const s of this._headerActions)s.name===pe.EndConversation&&(s.element.disabled=e)}addAction(e){this._headerActions.push(e)}remove(){this._core.off(E.State,this._stateChangeListener)}_createElement(){var e;const s=this._util,t=this._settings,a=t.icons,r=s.createDiv(["header","flex"]),i=s.createDiv(["header-info-wrapper"]),n=s.createDiv(["header-actions","flex"]),p=this._localeText,l=p.chatTitle,c=p.chatSubtitle;if(!("logo"in a)||a.logo){const d=s.createImageIcon({icon:a.logo||So,iconCss:["logo"]});r.append(d)}if(l){const d=s.createTextDiv(["title"]);d.id=`${t.name}-title`,d.innerText=l,i.append(d),this._title=d}this._subtitle=s.createTextDiv(["subtitle",ye]),this._networkStatus=s.createTextDiv(["connection-status",ye]),i.append(this._subtitle,this._networkStatus),c?(this._subtitle.innerText=c,s.removeCSSClass(this._subtitle,ye)):t.showConnectionStatus&&(this._updateStatusMessage(this._core.getState()),s.removeCSSClass(this._networkStatus,ye));const m=s.createDiv(["header-gap"]);if(r.append(i,m),t.customHeaderElementId){const d=document.querySelector(`#${t.customHeaderElementId}`);if(d){const u=s.createDiv(["header-custom-element"]);u.append(d),r.append(u)}else this._logger.error(`Could not find element with ID '${t.customHeaderElementId}'. No custom element added to the chat header.`)}const h="header-button";if(this._actionsContainer=n,t.enableEndConversation){const d=a.close||Ge;this._headerActions.push({name:pe.EndConversation,title:"endConversation",icon:d,clickHandler:this._onEndConversation.bind(this),order:10})}if(!t.embedded){const d=a.collapse||Kl;this._headerActions.push({name:pe.Collapse,title:"close",icon:d,clickHandler:this.closeWidgetPopup.bind(this),order:20})}if(t.enableBotAudioResponse&&(this._audioActionElemOn=!t.initBotAudioMuted,this._headerActions.push({name:pe.Tts,title:this._audioActionElemOn?"audioResponseOn":"audioResponseOff",icon:this._audioActionElemOn?a.ttsOn||Ao:a.ttsOff||Eo,clickHandler:()=>{this._audioActionElemOn=!this._audioActionElemOn,this._setAudioResponseIcon(),this._onAudioToggle(this._audioActionElemOn)},order:30})),t.enableClearMessage){const d=a.clearHistory||Yl;this._headerActions.push({name:pe.Clear,title:"clear",icon:d,clickHandler:this.clearHistory.bind(this),order:40})}return this._headerActions.sort((d,u)=>d.order>u.order?1:-1),(e=this._headerActions)===null||e===void 0||e.forEach((d,u)=>{const b=this._settings.multiLangChat?this._headerActions.length+1:this._headerActions.length;if(!this._settings.enableHeaderActionCollapse||u<2&&!(b>2&&u===1)){const v=s.createIconButton({css:[h],icon:d.icon,iconCss:[],title:p[d.title]});v.onclick=d.clickHandler,this._mapActionElements(d,v),d.element=v,this._actionsContainer.prepend(v)}else this._menuActions.push(d)}),this._menuActions&&this._menuActions.length&&this._createActionMenu(this._menuActions),r.append(n),r}_mapActionElements(e,s){switch(s.id=`${this._cssPrefix}-${e.name}`,e.name){case pe.EndConversation:{this._setHotkeyMap("close",s);break}case pe.Collapse:{this._setHotkeyMap(e.name,s);break}case pe.Tts:{this._setHotkeyMap(e.name,s);break}case pe.Clear:{this._setHotkeyMap("clearHistory",s);break}}}_createActionMenu(e){const s=this._util,t=this._localeText,a=`${this._settings.name}-action-menu`,r=`${a}-button`,i=e.map(c=>{const m=s.createListItem(`action-menu-option-${c.name}`,t[c.title],c.name,c.icon,"action-item",c.clickHandler);return this._mapActionElements(c,m),c.element=m,m}),n=s.createIconButton({css:["header-button","button-show-options"],icon:Zl,iconCss:[],title:t.showOptions}),p=s.getMenu({menuId:a,menuClassList:["action-menu"],menuItems:i,buttonId:r,menuButton:n}),l=s.getMenuButton({button:n,menuId:a,menu:p,widget:this._widget.chatWidgetDiv});this._actionsContainer.prepend(l,p),this._actionsMenuButton=l,this._actionsMenu=p}_findAction(e){for(const s of this._headerActions)if(s.name===e)return s;return null}_findActionElement(e){var s;return(s=this._findAction(e))===null||s===void 0?void 0:s.element}_setAudioResponseIcon(){const e=this._settings.icons,s=this._findAction(pe.Tts);s.title=this._audioActionElemOn?"audioResponseOn":"audioResponseOff",s.icon=this._audioActionElemOn?e.ttsOn||Ao:e.ttsOff||Eo,this.updateHeaderAction(pe.Tts)}updateHeaderAction(e){const s=this._util,t=this._localeText,a=this._findAction(e),r=this._findActionElement(e);if(r){r.innerHTML="";const i=t[a.title],n=a.icon,p=r.tagName==="LI",l=s.createImageIcon({icon:n,iconCss:[...p?["icon"]:[],"action-item-icon"]});if(p){const c=s.createTextSpan(["text","action-item-text","ellipsis"]);c.innerText=i,r.append(l,c)}else r.append(l),r.title=i}}_updateStatusMessage(e){const s=this._util,t="connecting",a="connected",r="disconnected",i=this._networkStatus,n=this._localeText;switch(this._chatStatus=e,e){case M.Open:i.innerText=n.connected,s.removeCSSClass(i,t,r),s.addCSSClass(i,a);break;case M.Closed:i.innerText=n.disconnected,s.removeCSSClass(i,t,a),s.addCSSClass(i,r);break;case M.Closing:i.innerText=n.closing,s.removeCSSClass(i,a,r),s.addCSSClass(i,t);break;case M.Connecting:i.innerText=n.connecting,s.removeCSSClass(i,a,r),s.addCSSClass(i,t);break}}}function ca(o,e){if(o.tagName==="LI"){const s=o.querySelector("span");s&&(s.innerText=e)}else o.title=e}class hl extends He{constructor(e){super(),this.element=e.createDiv(["conversation"])}render(){}}class ul{constructor(e,s,t){this._config=s,this._widget=t,this._logger=new O("MultiLangChatComponent"),this._isTTSEnabled=!0,this._isVoiceEnabled=!0,this._renderAsListItem=!1,this._recognitionLocaleMap={},this._synthesisLocaleVoicesMap={},this._supportedLangList=[];let a,r;if(this._core=s.webCore,this._settings=s.settings,this._localeText=Object.assign(Object.assign({},this._settings.i18n.en),this._settings.i18n[this._settings.locale]),this._cssPrefix=s.settings.name,e&&(this._langOptions=Object.assign(Object.assign({},e),{supportedLangs:e.supportedLangs?[...e.supportedLangs]:[]}),a=this._langOptions.supportedLangs,r=this._langOptions.primary,typeof r=="string"&&(this._langOptions.primary=r.toLowerCase())),a&&a.length)if(a.forEach(i=>{i.lang=i.lang.toLowerCase()}),a.length>1?(a.unshift({lang:"und",label:this._localeText.language_detect}),this._langOptions.primary||(this._langOptions.primary=null)):this._langOptions.primary=a[0].lang,this._supportedLangList=a.map(i=>i.lang),this._settings.enableBotAudioResponse){const i=s.synthesisVoices;if(i&&i.length){const n={};a.filter(p=>p.lang&&p.lang!=="und").forEach(p=>{const l=i.filter(c=>c.lang.includes(p.lang));l.push({lang:p.lang}),n[p.lang]=l}),this._synthesisLocaleVoicesMap=n}else new Set(this._supportedLangList.filter(n=>n!=="und")).forEach(n=>{this._synthesisLocaleVoicesMap[n]=[{lang:n,name:n}]})}else this._updateSynthesis=()=>{};if(this._settings.enableSpeech){const i={};Object.values(Ee).forEach(n=>{i[n.substring(0,2)]=n,i[n]=n}),pa(Ee.EN_GB,i),pa(Ee.EN_AU,i),pa(Ee.EN_IN,i),this._recognitionLocaleMap=i}else this._updateRecognition=()=>{}}render(e){const s=this._config.util,t=this._cssPrefix,a="language-selection",r=`${t}-${a}-button`,i=`${t}-${a}-menu`,n=this._langOptions;let p;if(this._renderAsListItem=e,!(n&&n.supportedLangs&&n.supportedLangs.length>=2))return null;if(!this._component){const l=this._settings.icons.language||am,c=s.createIconButton({css:["header-button","button-lang"],icon:l,iconCss:[],title:this._localeText.languageSelectDropdown}),m=s.createListItem("action-menu-option-lang",this._localeText.languageSelectDropdown,"lang",l,"action-item",null,!0),h=n.supportedLangs.map(u=>{var b;const{lang:v,label:k}=u,x=v==="und"&&n.primary?n.primary:v,_=`language_${v==="und"?"detect":v}`,C=((b=this._settings.i18n[x])===null||b===void 0?void 0:b[_])||k||v;return s.createListItem(`${a}-option-${v}`,C,v,"",`${a}-option`,g=>{let w=g.target;w.tagName!=="LI"&&(w=w.parentElement);const y=w.dataset.value;this._selectLanguage(y)})}),d=s.getMenu({menuId:i,menuClassList:[`${a}-menu`],menuItems:h,buttonId:r,menuButton:e?m:c});if(e){p=s.getMenuButton({button:m,menuId:i,menu:d,widget:this._widget.chatWidgetDiv});const u=s.createDiv(["arrow-icon"]),b=s.createImageIcon({icon:Jl});u.append(b),p.append(u),this._config.chatWidget.chatWidgetDiv.querySelector(`ul.${this._cssPrefix}-action-menu`).insertAdjacentElement("afterend",d)}else{p=s.createDiv();const u=s.getMenuButton({button:c,menuId:i,menu:d,widget:this._widget.chatWidgetDiv});p.append(u,d),c.id=r}this.disableComponent(!1)}return this._component=p,p}setLocale(e){this._component&&(this._localeText=e,this._langOptions.supportedLangs.forEach(s=>{const{lang:t,label:a}=s,r=`language_${t==="und"?"detect":t}`,i=document.querySelector(`#language-selection-option-${t}`);if(!i)return;const n=e[r]||a||t;i.title=n}))}setTag(e,s=!0){let t="";e!==null&&(t=e.toLowerCase()),this._supportedLangList.length&&(t=this._supportedLangList.includes(t)?t:null),this._selectLanguage(t,s)}disableComponent(e){if(this._component){const s=this._config.util,t=this._component;if(this._renderAsListItem){const a="disable";e?s.addCSSClass(t,a):s.removeCSSClass(t,a)}else t.querySelector("button").disabled=e}}_selectLanguage(e,s=!0){let t=e;this._localeText=this._settings.i18n[t],this._currentTag!==t&&(this._currentTag=t,this._config.eventDispatcher.trigger(U.CHAT_LANG,t)),this._component&&this._updateActiveLocale(t),t==="und"&&(t=null),s&&(this._updateProfile(t),this._config.storageService.setItem(lo(this._settings),t)),this._updateSynthesis(t),this._updateRecognition(t),this._config.chatWidget.onLanguageUpdate(t,s)}_updateProfile(e){if(this._core.isConnected()){const s={profile:{languageTag:e}};e||(s.profile.locale=e);const t=this._settings.sdkMetadata?Object.assign({version:G},this._settings.sdkMetadata):{version:G};this._core.updateUser(s,{sdkMetadata:t}).catch(a=>this._logger.warn("[updateProfile] Failed to update user profile:",a))}}_updateSynthesis(e){const s=this._config.chatWidget;if(!e)this._isTTSEnabled=!1,this._settings.enableBotAudioResponse&&this._core.cancelTTS(),s.enableSpeechSynthesisService(!1);else if(this._isTTSEnabled||(s.enableSpeechSynthesisService(!0),this._isTTSEnabled=!0),this._settings.enableBotAudioResponse){const t=this._synthesisLocaleVoicesMap[e];this._core.setTTSVoice(t).catch(a=>{this._logger.info(`Failed to set TTS voice for '${t[0].lang}'. ${a}`),this._updateSynthesis(null)})}}_updateRecognition(e){const s=this._config,t=this._recognitionLocaleMap[e],a=s.chatWidget;t?(this._isVoiceEnabled||(a.setVoiceRecognitionService(!0),this._isVoiceEnabled=!0),this._core.setRecognitionLocale(t)):(this._isVoiceEnabled=!1,this._core.stopRecognition(),this._core.setRecognitionLocale(null),a.setVoiceRecognitionService(!1))}_updateActiveLocale(e){const s=this._config.util,t=e||"und",a=document.querySelector(`#${this._cssPrefix}-language-selection-menu`),r="active";if(a){const i=a.querySelector(`li.${this._cssPrefix}-${r}`);i&&s.removeCSSClass(i,r);const n=a.querySelector(`[data-value="${t}"]`);n&&s.addCSSClass(n,r)}}initLanguage(){const{primary:e}=this._langOptions||{},s=this._config.storageService.getItem(lo(this._settings));let t=e;s&&(t=s==="null"?null:s),t!==void 0&&this.setTag(t)}}function lo(o){return`${o.name}-${o.channelId}-${o.userId}`}function pa(o,e){Bl()===o&&(e[o.substring(0,2)]=o)}class bl extends He{constructor(e){super(),this._config=e,this._logger=new O("CancelResponseComponent"),this._isDisplayed=!1,this._onClick=()=>{this._config.onClick(),this.hide()},this.render()}show(){if(!this._isDisplayed){this._isDisplayed=!0;try{this._config.prepend?this.prependToElement(this._config.parent):this.appendToElement(this._config.parent)}catch(e){this._logger.debug("No parent to add cancel response button")}}}hide(){if(!this._isDisplayed)return;this._isDisplayed=!1;const{domUtil:e}=this._config,s=this.element;e.addCSSClass(s,mo),setTimeout(()=>{e.removeCSSClass(s,mo),this.remove()},fl),this._config.onHide()}isVisible(){return this._isDisplayed}render(){var e;const{domUtil:s,i18n:t}=this._config;if(this.element){this.element.title=t.cancelResponse;return}const a="cancel-response-button",r=s.createIconButton({css:[a],icon:(e=this._config.icon)!==null&&e!==void 0?e:_m,iconCss:[`${a}-icon`],title:t.cancelResponse});L(r,"click",this._onClick),this.element=r}setLocale(e){this._config.i18n=e,this.render()}}const fl=210,mo="hide",wl='@keyframes scale-in-center{0%{opacity:1;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes scale-out-center{0%{display:flex;opacity:1;transform:scale(1)}to{display:none;opacity:1;transform:scale(0)}}@keyframes scale-in-br{0%{opacity:1;transform:scale(0);transform-origin:100% 100%}to{opacity:1;transform:scale(1);transform-origin:100% 100%}}@keyframes scale-in-bl{0%{opacity:1;transform:scale(0);transform-origin:0 100%}to{opacity:1;transform:scale(1);transform-origin:0 100%}}@keyframes scale-in-tl{0%{opacity:1;transform:scale(0);transform-origin:0 0}to{opacity:1;transform:scale(1);transform-origin:0 0}}@keyframes scale-in-tr{0%{opacity:1;transform:scale(0);transform-origin:100% 0}to{opacity:1;transform:scale(1);transform-origin:100% 0}}@keyframes scale-out-br{0%{opacity:1;transform:scale(1);transform-origin:100% 100%}99%{opacity:1;transform:scale(.01);transform-origin:100% 100%}to{display:none;opacity:1;transform:scale(0);transform-origin:100% 100%}}@keyframes scale-out-bl{0%{opacity:1;transform:scale(1);transform-origin:0 100%}99%{opacity:1;transform:scale(.01);transform-origin:0 100%}to{display:none;opacity:1;transform:scale(0);transform-origin:0 100%}}@keyframes popup-suggestion{0%{box-shadow:0 0 #0000,0 0 #0000;transform:scaleY(.4);transform-origin:0 100%}to{box-shadow:0 -12px 15px -12px #00000059;transform:scaleY(1);transform-origin:0 100%}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes dialog-in{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes dialog-out{0%{transform:translateY(0);opacity:1}to{transform:translateY(-20px);opacity:0}}@keyframes typing-cue{0%{opacity:1}30%{opacity:.1}50%{opacity:1}to{opacity:.1}}@keyframes webview-slide-out-bottom{0%{transform:translateY(0);opacity:1}95%{opacity:1}to{transform:translateY(100%);opacity:0}}@keyframes webview-slide-in-bottom{0%{transform:translateY(100%);opacity:0}1%{opacity:1}to{transform:translateY(0);opacity:1}}@keyframes cancel-button-entrance{0%{transform:translateZ(-64px);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes cancel-button-exit{0%{transform:translateZ(0);opacity:1}to{transform:translateZ(-64px);opacity:0}}@keyframes icon-enter{0%{opacity:.4;transform:rotateY(-85deg)}to{opacity:1;transform:rotateY(0)}}@keyframes icon-exit{0%{opacity:1;transform:rotateY(0)}to{opacity:.4;transform:rotateY(-85deg)}}@keyframes chat-bar-expanded-entrance{0%{opacity:0;transform:translate(50px)}to{opacity:1;transform:translate(0)}}@keyframes chat-bar-expanded-exit{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(50px)}}@keyframes reasoning-indicator{0%{transform:translate(-100%)}to{transform:translate(180%)}}.flex-center.flex-center{align-items:center;display:flex;justify-content:center}.flex-row.flex-row{display:flex;flex-flow:row wrap}.flex-row-nowrap.flex-row-nowrap{display:flex;flex-flow:row nowrap}.flex-col.flex-col{display:flex;flex-flow:column wrap}.flex-col-nowrap.flex-col-nowrap{display:flex;flex-flow:column nowrap}.margin-inline-end-4{margin-inline-end:4px}.chat-bar,.interaction-container,.transcript-container,.transcript-wrapper-container{--chat-bar-color-oracle-red: rgba(199, 70, 52, 1);--chat-bar-color-white: rgba(255, 255, 255, 1);--chat-bar-color-black: rgba(0, 0, 0, 1);--chat-bar-color-content-primary: rgba(22, 21, 19, 1);--chat-bar-color-surface-enabled: rgba(255, 255, 255, 1);--chat-bar-color-surface-neutral-10: rgba(251, 249, 248, 1);--chat-bar-color-success-50: rgba(177, 221, 136, 1);--chat-bar-color-border-top: rgba(22, 21, 19, .12);--chat-bar-color-focus-outline: rgb(22, 21, 19, .7);--chat-bar-color-links: rgb(0, 104, 140);--chat-bar-color-error-message-background: #FFF8F7;--chat-bar-color-error-title: #D63B25;--chat-bar-color-card-background: #fff;--chat-bar-color-card-text: #161513;--chat-bar-color-card-nav-button: #fff;--chat-bar-color-card-nav-button-focus: #FBF9F8;--chat-bar-color-card-nav-button-hover: #FBF9F8;--chat-bar-color-attachment-placeholder: #fff;--chat-bar-color-popup-background: #fff;--chat-bar-color-popup-text: #161513;--chat-bar-color-popup-item-background-hover: rgba(22, 21, 19, .04);--chat-bar-color-table-header-background: #fff;--chat-bar-color-table-header-text: #161513;--chat-bar-color-table-title-separator: #b3b1af;--chat-bar-color-table-background: #fff;--chat-bar-color-table-text: #161513;--chat-bar-color-table-separator: rgba(22, 21, 19, .1);--chat-bar-color-table-row-background-hover: rgba(22, 21, 19, .04);--chat-bar-color-table-actions-background: transparent;--chat-bar-color-table-actions-background-focus: transparent;--chat-bar-color-table-actions-background-hover: rgba(22, 21, 19, .04);--chat-bar-color-table-actions-border: rgba(22, 21, 19, .5);--chat-bar-color-table-actions-text: #161513;--chat-bar-color-table-actions-text-focus: #161513;--chat-bar-color-table-actions-text-hover: #161513;--chat-bar-color-form-header-background: #fff;--chat-bar-color-form-header-text: #161513;--chat-bar-color-form-background: #fff;--chat-bar-color-form-text: #161513;--chat-bar-color-form-highlight: rgba(199, 70, 52, .25);--chat-bar-color-form-input-background: #fff;--chat-bar-color-form-input-border: rgba(22, 21, 19, .5);--chat-bar-color-form-input-border-focus: rgb(14, 114, 151);--chat-bar-color-form-input-text: #161513;--chat-bar-color-form-label: rgba(22, 21, 19, .65);--chat-bar-color-form-required-tip: rgba(22, 21, 19, .65);--chat-bar-color-form-error: rgba(172, 56, 36);--chat-bar-color-form-error-text: rgba(22, 21, 19, .65);--chat-bar-color-form-actions-background: transparent;--chat-bar-color-form-actions-background-focus: transparent;--chat-bar-color-form-actions-background-hover: rgba(22, 21, 19, .04);--chat-bar-color-form-actions-border: rgba(22, 21, 19, .5);--chat-bar-color-form-actions-text: #161513;--chat-bar-color-form-actions-text-focus: #161513;--chat-bar-color-form-actions-text-hover: #161513;--chat-bar-color-primary-form-actions-background: rgb(49, 45, 42);--chat-bar-color-primary-form-actions-background-focus: rgb(49, 45, 42);--chat-bar-color-primary-form-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--chat-bar-color-primary-form-actions-border: transparent;--chat-bar-color-primary-form-actions-text: #fff;--chat-bar-color-primary-form-actions-text-focus: #fff;--chat-bar-color-primary-form-actions-text-hover: #fff;--chat-bar-color-danger-form-actions-background: rgb(214, 59, 37);--chat-bar-color-danger-form-actions-background-focus: rgb(214, 59, 37);--chat-bar-color-danger-form-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--chat-bar-color-danger-form-actions-border: transparent;--chat-bar-color-danger-form-actions-text: #fff;--chat-bar-color-danger-form-actions-text-focus: #fff;--chat-bar-color-danger-form-actions-text-hover: #fff;--chat-bar-color-text-primary: rgba(22, 21, 19, 1);--chat-bar-color-text-secondary: rgba(22, 21, 19, .7);--chat-bar-color-text-disabled: rgba(22, 21, 19, .4);--chat-bar-color-footer-form-label: rgba(22, 21, 19, .4);--chat-bar-color-action-surface-focus: rgb(251, 249, 248);--chat-bar-color-action-surface-active: rgb(251, 249, 248);--chat-bar-font-family: "Oracle Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;box-sizing:border-box;font-family:var(--chat-bar-font-family)}.chat-bar *,.interaction-container *,.transcript-container *,.transcript-wrapper-container *{box-sizing:border-box}.chat-bar .widget-button{align-items:center;border:0;cursor:pointer;height:36px;justify-content:center;margin:0;transition:all .3s ease-out;width:36px;background-color:var(--chat-bar-color-surface-enabled)}.chat-bar .widget-button:hover svg,.chat-bar .widget-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.chat-bar .widget-button:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.chat-bar .widget-button svg,.chat-bar .widget-button img{width:20px;height:20px;flex-shrink:0}.chat-bar .widget-button.o-button{background-color:var(--chat-bar-color-oracle-red, rgb(199, 70, 52));border-radius:12px;height:52px;padding:0;width:52px}.chat-bar .widget-button.o-button svg{height:unset;width:unset}.chat-bar .widget-button.action-button:disabled{cursor:not-allowed}.chat-bar .widget-button.action-button:disabled svg{fill:var(--chat-bar-color-text-disabled)}.chat-bar .banner{background-color:var(--chat-bar-color-surface-enabled);gap:4px;justify-content:space-between;padding:8px 4px 8px 16px}.chat-bar .banner .user-input-field{border:none;border-radius:4px;color:var(--chat-bar-color-text-primary);flex:1;font:600 13.75px/16px var(--chat-bar-font-family);height:32px;overflow-y:auto;padding:8px 0 0;resize:none;text-align:start}.chat-bar .banner .user-input-field:focus{outline:1px dotted transparent}.chat-bar .banner .user-input-field::placeholder{color:var(--chat-bar-color-text-secondary);font-weight:400}.chat-bar .banner .user-input-field.disabled{color:var(--chat-bar-color-text-secondary)}.chat-bar .expanded{filter:drop-shadow(rgba(0,0,0,.25) 0 0 8px);position:relative;z-index:95}.chat-bar .expanded .banner{border-radius:12px 0 0 12px;width:408px}.chat-bar .expanded.interaction .banner{border-top-left-radius:0}.chat-bar .expanded.interaction .interaction-shelf{background-color:var(--chat-bar-color-surface-enabled);border-radius:12px 12px 0 0;border-bottom:1px solid var(--chat-bar-color-border-top);flex-direction:column;height:fit-content;inset:auto 52px 52px 0;max-height:200px;overflow-y:auto;padding:16px;position:absolute;scroll-behavior:smooth}.chat-bar .expanded.interaction .interaction-shelf .interaction-container{background-color:inherit;padding:0}.chat-bar .expanded.interaction .interaction-shelf .interaction-container .response-messages-wrapper{padding-inline-end:0}.chat-bar .expanded.interaction .interaction-shelf .interaction-container .cancel-response-button{bottom:68px;right:68px}.chat-bar .expanded.interaction .interaction-shelf .interaction-container .cancel-response-button:hover svg,.chat-bar .expanded.interaction .interaction-shelf .interaction-container .cancel-response-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.chat-bar .expanded.interaction .interaction-shelf .interaction-container .cancel-response-button:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.chat-bar .expanded.transition-entrance .banner{animation:chat-bar-expanded-entrance .3s ease-out forwards}.chat-bar .expanded.transition-collapse .banner,.chat-bar .expanded.transition-collapse .interaction-shelf{animation:chat-bar-expanded-exit .3s ease-out forwards}.chat-bar .wide{height:100%;width:100%}.chat-bar .wide .banner{width:100%}.chat-bar .wide .widget-button.icon.icon.o-button{border-radius:0}.chat-bar .expanded .widget-button.o-button,.chat-bar .wide .widget-button.o-button{border-radius:0 12px 12px 0}.chat-bar .expanded .widget-button.send-button svg,.chat-bar .wide .widget-button.send-button svg{background-color:var(--chat-bar-color-content-primary);border-radius:50%}.chat-bar .expanded .widget-button.send-button svg path,.chat-bar .wide .widget-button.send-button svg path{fill:var(--chat-bar-color-surface-enabled)}.chat-bar .expanded .widget-button.send-button:hover svg,.chat-bar .expanded .widget-button.send-button:focus-visible svg,.chat-bar .wide .widget-button.send-button:hover svg,.chat-bar .wide .widget-button.send-button:focus-visible svg{background-color:var(--chat-bar-color-oracle-red)}.chat-bar .expanded .widget-button.send-button:disabled svg,.chat-bar .wide .widget-button.send-button:disabled svg{background-color:var(--chat-bar-color-text-disabled)}.chat-bar .expanded .widget-button.send-button:disabled svg path,.chat-bar .wide .widget-button.send-button:disabled svg path{fill:var(--chat-bar-color-text-disabled)}.chat-bar .bar-actions-wrapper{gap:4px;justify-content:space-between}.chat-bar .wave-form-wrapper{border-radius:4px;padding:2px;height:36px;width:24px}.chat-bar .wave-form-wrapper:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.interaction-container,.previous-interaction{background-color:var(--chat-bar-color-surface-neutral-10);display:flex;flex-flow:column wrap;gap:8px}.interaction-container:empty,.previous-interaction:empty{display:none!important}.interaction-container .response-messages-wrapper,.previous-interaction .response-messages-wrapper{align-items:flex-start;justify-content:flex-start;max-width:100%}.interaction-container .response-messages-wrapper .response-message,.previous-interaction .response-messages-wrapper .response-message{color:var(--chat-bar-color-text-primary);font:400 13.75px/16px var(--chat-bar-font-family);max-width:100%}.interaction-container .response-messages-wrapper .response-message a,.previous-interaction .response-messages-wrapper .response-message a{color:var(--chat-bar-color-links)}.interaction-container .response-messages-wrapper .response-message .message-wrapper,.previous-interaction .response-messages-wrapper .response-message .message-wrapper,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble.error,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message.error,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message.error,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble.error,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message.error,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message.error{color:inherit;font:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .message-header,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .message-header,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .message-header,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .message-header,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .message-header,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .message-header{color:inherit;font:inherit;margin-top:8px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .message-text,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .message-text,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .message-text,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .message-text,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .message-text,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .message-text,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item{color:inherit;font:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-row,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-row,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-row{display:flex;flex-flow:row nowrap}.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-sm{color:inherit;font:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item.c2k-reference,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item.c2k-reference,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item.c2k-reference,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item.c2k-reference,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item.c2k-reference,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item.c2k-reference{justify-content:flex-start}.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item.c2k-reference .form-row,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item.c2k-reference .form-row,.interaction-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item.c2k-reference .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item.c2k-reference .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item.c2k-reference .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item.c2k-reference .form-row{align-items:flex-end;gap:4px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item{color:var(--chat-bar-color-form-text);display:flex;flex-flow:row wrap;justify-content:space-between}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row{align-items:stretch;display:flex;flex:1 0 100%;gap:4px;max-width:100%;margin:2px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row.separator,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row.separator{border-top:1px solid var(--chat-bar-color-table-separator);margin-top:8px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column{display:flex;flex-flow:column wrap;flex:0 1 auto;min-width:0}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.stretch,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.stretch{flex-grow:1}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-center,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-center{justify-content:center}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-start,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-start{justify-content:flex-start}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-end,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-end{justify-content:flex-end}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field{height:100%}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg{margin-top:28px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md{margin-top:16px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-default,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-default{margin-top:4px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox{inset-inline:0;min-width:100%;max-width:unset}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference{justify-content:flex-start}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row{color:#161513a6;display:flex;flex-basis:fit-content;flex-flow:row nowrap;line-height:16px;margin-inline-end:8px;max-width:100%;width:auto}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row .form-row-column:not(:last-child),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row .form-row-column:not(:last-child){margin-inline-end:6px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row span.delimiter,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row span.delimiter{margin-inline-end:8px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.with-border,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item.with-border{border-bottom:1px solid var(--chat-bar-color-table-separator);padding-bottom:4px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key{color:var(--chat-bar-color-form-label);flex:1;line-height:16px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-lg,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-lg{font-size:14px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-md{font-size:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-sm,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-sm{font-size:10px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-bold,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-bold{font-weight:700}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-md{font-weight:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-light,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-light{font-weight:400}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.with-margin,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.with-margin{cursor:auto;margin-bottom:8px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item>.form-message-field:not(:last-child),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item>.form-message-field:not(:last-child){margin-bottom:16px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value{word-break:normal;overflow-wrap:anywhere}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-lg,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-lg{font-size:18px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-md{font-size:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-sm,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-sm{font-size:13.8px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold{font-weight:700}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-md,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-md{font-weight:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-light,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-light{font-weight:300}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.with-top-margin,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.with-top-margin{margin-top:2px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value button.action-postback,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value button.action-postback{margin-inline-start:0}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-1,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-1{flex-basis:100%;max-width:100%}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2{flex-basis:calc(50% - 12px);max-width:calc(50% - 12px);height:100%}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-last-child(2),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-last-child(2){margin-bottom:0}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(2n) .popupContent,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(2n) .popupContent{inset-inline-start:calc(50% - 7px)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(2n) .listbox,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(2n) .listbox{inset-inline:0}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox{min-width:calc(50% - 28px)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field{display:flex;flex-direction:column;overflow:visible;position:relative;width:100%}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.disabled{cursor:not-allowed}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value{border-radius:4px;background-color:var(--chat-bar-color-form-input-background);color:var(--chat-bar-color-form-input-text);border:1px solid var(--chat-bar-color-form-input-border);font-size:inherit}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value:focus,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value:focus,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value:focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value:focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value:focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value:focus{border-color:var(--chat-bar-color-form-input-border-focus);box-shadow:0 0 0 1px var(--chat-bar-color-form-input-border-focus) inset;outline:1px solid transparent}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input:disabled,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:disabled,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input:disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled{opacity:.5;cursor:not-allowed}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.input:not(:disabled,.disabled),.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.textarea:not(:disabled,.disabled),.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.input:not(:disabled,.disabled),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.textarea:not(:disabled,.disabled),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled){border-color:var(--chat-bar-color-form-error)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value{height:44px;padding:0 12px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button{cursor:pointer;width:20px;height:20px;margin-inline-end:-8px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper{align-items:center;display:flex;height:44px;padding-inline-end:4px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focus{border-color:var(--chat-bar-color-form-input-border-focus);box-shadow:0 0 0 1px var(--chat-bar-color-form-input-border-focus) inset;outline:1px solid transparent}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled{opacity:.5;pointer-events:none}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .input,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .input{width:calc(100% - 36px);border:none;box-shadow:none!important;outline:1px solid transparent;height:40px;margin-inline-start:1px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon{justify-content:center;margin-inline-start:0;color:var(--chat-bar-color-form-input-text)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value{overflow:auto;padding:11px 12px;resize:none}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container{display:flex;max-width:max-content}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled{cursor:not-allowed;opacity:.5}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .label,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .label{display:flex;min-height:36px;align-items:center;padding:7.5px 0;border-bottom:1px solid transparent}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input{margin:0 8px 0 4px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container{background-color:var(--chat-bar-color-form-input-background);border-radius:4px;border:1px solid var(--chat-bar-color-form-input-border);display:flex;min-height:44px;flex-direction:row;cursor:text}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled{opacity:.5;pointer-events:none}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus{border-color:var(--chat-bar-color-form-input-border-focus);box-shadow:0 0 0 1px var(--chat-bar-color-form-input-border-focus) inset;outline:1px solid transparent}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options{display:flex;flex-wrap:wrap;padding:0 12px 5px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty{padding-top:5px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before{content:attr(data-placeholder)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option{line-height:16px;display:flex;align-items:center;cursor:default;border-radius:4px;border:1px solid var(--chat-bar-color-form-input-border);color:var(--chat-bar-color-form-input-text);background-clip:padding-box;font-size:12px;margin-inline-end:6px;margin-top:5px;padding-inline:6px 4px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close{cursor:pointer;height:16px;width:16px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox{border:1px solid var(--chat-bar-color-table-separator);border-radius:4px;display:flex;flex-direction:column;margin-top:3px;max-width:calc(100% - 32px);min-width:calc(100% - 32px);z-index:3}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box{display:flex;flex-direction:column;padding:0 12px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text{color:var(--chat-bar-color-form-label);font-size:inherit;height:44px;padding:12px 0;border-bottom:1px solid var(--chat-bar-color-table-separator)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search{flex-shrink:0;margin:12px;padding-inline-end:36px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper{position:relative;height:0}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon{position:absolute;inset-inline-end:21px;bottom:23px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list{animation:none;display:block;max-height:400px;margin:1px 0 2px;overflow-y:auto;padding:8px 0;z-index:3}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li{height:auto;margin:0;padding:12px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected{border-top:1px solid rgb(34,126,158);background-color:#e4f1f7}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected:last-child,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected:last-child,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected:last-child,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected:last-child{box-shadow:inset 0 -1px #227e9e}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected+li,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected+li,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected+li,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected+li{border-top:1px solid rgb(34,126,158)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle{position:relative;width:36px;height:20px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input{display:none}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:disabled+.round-slider,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:disabled+.round-slider{cursor:not-allowed;opacity:.5}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider{background-color:#227e9e;border-color:#227e9e}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider:before,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider:before{inset-inline:auto 1px;transition:height .3s cubic-bezier(0,0,.2,1),width .3s cubic-bezier(0,0,.2,1),right .3s cubic-bezier(0,0,.2,1)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider{position:absolute;cursor:pointer;background-color:#8b8580;transition:background-color .2s linear .1s,opacity .2s linear .1s,border-color .2s linear .1s;border:1px solid transparent;border-radius:4px;height:20px;width:36px}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before{border-radius:4px;width:16px;height:16px;inset-inline:1px auto;position:absolute;content:"";bottom:1px;background-color:var(--chat-bar-color-form-background);transition:height .3s cubic-bezier(0,0,.2,1),width .3s cubic-bezier(0,0,.2,1),left .3s cubic-bezier(0,0,.2,1)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value{word-break:normal;overflow-wrap:anywhere}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback{background:var(--chat-bar-color-form-actions-background);color:var(--chat-bar-color-form-actions-text);border-color:var(--chat-bar-color-form-actions-border)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover{color:var(--chat-bar-color-form-actions-text-hover);background:var(--chat-bar-color-form-actions-background-hover)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path{fill:var(--chat-bar-color-form-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active{background:var(--chat-bar-color-form-actions-background-focus);color:var(--chat-bar-color-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path{fill:var(--chat-bar-color-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-actions,.interaction-container .response-messages-wrapper .response-message .message-global-actions,.interaction-container .response-messages-wrapper .response-message .card-actions,.previous-interaction .response-messages-wrapper .response-message .message-actions,.previous-interaction .response-messages-wrapper .response-message .message-global-actions,.previous-interaction .response-messages-wrapper .response-message .card-actions{display:flex;font:inherit;flex-flow:column nowrap;gap:8px;margin-top:8px}.interaction-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback,.interaction-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback,.interaction-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback,.previous-interaction .response-messages-wrapper .response-message .message-actions .widget-button.action-postback,.previous-interaction .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback,.previous-interaction .response-messages-wrapper .response-message .card-actions .widget-button.action-postback{align-items:center;background-color:transparent;border:1px solid var(--chat-bar-color-focus-outline);border-radius:4px;border-width:thin;color:var(--chat-bar-color-text-primary);display:flex;font:inherit;flex-flow:row wrap;flex-shrink:0;gap:8px;justify-content:center;max-width:100%;padding:8px 16px;width:max-content}.interaction-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:disabled,.interaction-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:disabled,.interaction-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:disabled,.previous-interaction .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:disabled,.previous-interaction .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:disabled,.previous-interaction .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:disabled{border-color:var(--chat-bar-color-border-top);color:var(--chat-bar-color-text-disabled);cursor:default}.interaction-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:hover,.interaction-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:focus,.interaction-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:hover,.interaction-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:focus,.interaction-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:hover,.interaction-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:focus,.previous-interaction .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:hover,.previous-interaction .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:focus,.previous-interaction .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:hover,.previous-interaction .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:focus,.previous-interaction .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:hover,.previous-interaction .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:focus{background-color:var(--chat-bar-color-action-surface-focus)}.interaction-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:focus-visible,.interaction-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:focus-visible,.interaction-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:focus-visible,.previous-interaction .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:focus-visible,.previous-interaction .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:focus-visible,.previous-interaction .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:focus-visible{outline:1px dotted var(--chat-bar-color-focus-outline)}.interaction-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:active,.interaction-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:active,.interaction-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:active,.previous-interaction .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:active,.previous-interaction .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:active,.previous-interaction .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:active{background-color:var(--chat-bar-color-action-surface-active)}.interaction-container .response-messages-wrapper .response-message .message-actions:last-child,.previous-interaction .response-messages-wrapper .response-message .message-actions:last-child{margin-bottom:8px}.interaction-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback,.previous-interaction .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback{align-items:center;display:flex;justify-content:center;height:24px;width:24px}.interaction-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback.disabled,.previous-interaction .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback.disabled{display:none}.interaction-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback img,.previous-interaction .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback img{filter:grayscale(100%) brightness(.15) opacity(.7)}.interaction-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback:hover img,.previous-interaction .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback:hover img{filter:grayscale(100%) brightness(.5) opacity(1)}.interaction-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback:focus-visible img,.previous-interaction .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback:focus-visible img{filter:grayscale(100%) brightness(.5) opacity(1)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message{width:100%;max-width:unset;padding:0;color:var(--chat-bar-color-table-text);overflow:hidden}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .popupContent,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .popupContent,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .popupContent,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .popupContent{max-width:280px;position:absolute;height:auto;border-radius:8px;z-index:3;box-shadow:0 4px 4px #0000001a;border:1px solid rgba(22,21,19,.1215686275);background:var(--chat-bar-color-bot-message-background);display:none;inset-inline-start:-4px}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .results-page-status,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .results-page-status,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .results-page-status,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .results-page-status{align-items:center;background-color:var(--chat-bar-color-table-background);color:var(--chat-bar-color-table-text);display:flex;flex-direction:row;font-size:inherit;justify-content:flex-end;line-height:16px;padding:12px 16px;border-top:1px solid var(--chat-bar-color-table-separator)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message~.message-footer,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message~.message-footer,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message~.message-footer,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message~.message-footer{margin-top:8px}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback{background:var(--chat-bar-color-table-actions-background);color:var(--chat-bar-color-table-actions-text);border-color:var(--chat-bar-color-table-actions-border)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--chat-bar-color-table-actions-text-hover);background:var(--chat-bar-color-table-actions-background-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--chat-bar-color-table-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background:var(--chat-bar-color-table-actions-background-focus);color:var(--chat-bar-color-table-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--chat-bar-color-table-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions{border-top:1px solid var(--chat-bar-color-table-separator);padding:12px 0;margin-top:auto}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value{word-break:normal;overflow-wrap:anywhere}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary{background:var(--chat-bar-color-primary-form-actions-background);color:var(--chat-bar-color-primary-form-actions-text);border:var(--chat-bar-color-primary-form-actions-border)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover{background:var(--chat-bar-color-primary-form-actions-background-hover);color:var(--chat-bar-color-primary-form-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path{fill:var(--chat-bar-color-primary-form-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active{background:var(--chat-bar-color-primary-form-actions-background-focus);color:var(--chat-bar-color-primary-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path{fill:var(--chat-bar-color-primary-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger{background:var(--chat-bar-color-danger-form-actions-background);color:var(--chat-bar-color-danger-form-actions-text);border:var(--chat-bar-color-danger-form-actions-border)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover{background:var(--chat-bar-color-danger-form-actions-background-hover);color:var(--chat-bar-color-danger-form-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path{fill:var(--chat-bar-color-danger-form-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active{background:var(--chat-bar-color-danger-form-actions-background-focus);color:var(--chat-bar-color-danger-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path{fill:var(--chat-bar-color-danger-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message{color:var(--chat-bar-color-form-text)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message{overflow:visible}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message .message-actions,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message .message-actions{border-top:none;padding-top:0}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message .form-message-key,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message .form-message-key{min-height:16px}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .results-page-status,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .results-page-status{background-color:var(--chat-bar-color-form-background);color:var(--chat-bar-color-form-text)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback{background:var(--chat-bar-color-form-actions-background);color:var(--chat-bar-color-form-actions-text);border-color:var(--chat-bar-color-form-actions-border)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover{color:var(--chat-bar-color-form-actions-text-hover);background:var(--chat-bar-color-form-actions-background-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path{fill:var(--chat-bar-color-form-actions-text-hover)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):active,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):active{background:var(--chat-bar-color-form-actions-background-focus);color:var(--chat-bar-color-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.interaction-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.previous-interaction .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path{fill:var(--chat-bar-color-form-actions-text-focus)}.interaction-container .response-messages-wrapper .response-message .form-message-field,.interaction-container .response-messages-wrapper .response-message .table-message-heading,.interaction-container .response-messages-wrapper .response-message .table-message-item,.previous-interaction .response-messages-wrapper .response-message .form-message-field,.previous-interaction .response-messages-wrapper .response-message .table-message-heading,.previous-interaction .response-messages-wrapper .response-message .table-message-item{word-break:normal;overflow-wrap:anywhere}.interaction-container .response-messages-wrapper .response-message .form-message-field:hover .popupContent,.interaction-container .response-messages-wrapper .response-message .table-message-heading:hover .popupContent,.interaction-container .response-messages-wrapper .response-message .table-message-item:hover .popupContent,.previous-interaction .response-messages-wrapper .response-message .form-message-field:hover .popupContent,.previous-interaction .response-messages-wrapper .response-message .table-message-heading:hover .popupContent,.previous-interaction .response-messages-wrapper .response-message .table-message-item:hover .popupContent{display:flex}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper{overflow:auto}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message-table-title-wrapper,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message-table-title-wrapper{background-color:var(--chat-bar-color-table-header-background);border-bottom:1px solid var(--chat-bar-color-table-title-separator);padding:8px}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message-table-title-wrapper .table-message-table-title,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message-table-title-wrapper .table-message-table-title{color:var(--chat-bar-color-table-header-text);font-size:inherit;font-weight:700;line-height:16px;margin:4px 8px}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message{min-width:100%;max-width:200%;border-collapse:collapse}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-headings,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-headings{align-items:center;color:var(--chat-bar-color-table-header-text);background-color:var(--chat-bar-color-table-header-background);display:flex}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-headings .table-message-heading,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-headings .table-message-heading{font-size:inherit;font-weight:700;line-height:16px;padding:16px;min-width:120px}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row{border-top:1px solid var(--chat-bar-color-table-separator);display:flex;align-items:center}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item{color:var(--chat-bar-color-table-text);font-size:inherit;line-height:20px;min-width:120px;padding:10px 16px}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-lg,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-lg{font-size:18px}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-md,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-md{font-size:inherit}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-sm,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-sm{font-size:13.8px}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-bold,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-bold{font-weight:700}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-md,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-md{font-weight:inherit}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-light,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-light{font-weight:300}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value .action-url,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value .action-url{width:unset}.interaction-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value :hover,.previous-interaction .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value :hover{background-color:unset}.interaction-container .response-messages-wrapper .response-message .form-message-header,.previous-interaction .response-messages-wrapper .response-message .form-message-header{align-items:center;color:var(--chat-bar-color-form-header-text);display:flex;font-weight:700;line-height:20px;padding-bottom:16px;text-align:start}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper{align-items:center;display:flex;flex:1;margin-top:2px;min-height:20px}.disabled.disabled .interaction-container .response-messages-wrapper .response-message .form-hint-wrapper>*,.disabled.disabled .previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper>*{display:none}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .form-hint-required,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .form-hint-required{color:var(--chat-bar-color-form-required-tip);font-size:12px}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error{display:flex}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error{background-color:var(--chat-bar-color-error-message-background);border:thin dashed var(--chat-bar-color-form-error);border-radius:4px;margin:10px 0;padding:8px;width:100%}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error.disabled,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error.disabled{display:none}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error .field-error-icon,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error .field-error-icon{top:0}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error .field-error-text,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error .field-error-text{color:var(--chat-bar-color-error-title);font-size:14px;font-weight:700;margin-inline-start:8px}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error .field-error-icon,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error .field-error-icon{flex-shrink:0;fill:var(--chat-bar-color-form-error);height:16px;width:16px}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error .field-error-text,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper .field-error .field-error-text{color:var(--chat-bar-color-form-error-text);font-size:12px;margin-inline-start:4px}.interaction-container .response-messages-wrapper .response-message .form-hint-wrapper-end,.previous-interaction .response-messages-wrapper .response-message .form-hint-wrapper-end{justify-content:flex-end}.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row{cursor:pointer}.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row:hover,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row:hover{background-color:var(--chat-bar-color-table-row-background-hover)}.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:hover,.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:active,.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:focus,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:hover,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:active,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:focus{background-color:unset}.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child,.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child{min-width:unset;padding:0}.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child .widget-button,.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child .widget-button,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child .widget-button,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child .widget-button{justify-content:center;margin:0 2px;transition:transform .25s ease-in-out}.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child .widget-button.rotate-180,.interaction-container .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child .widget-button.rotate-180,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child .widget-button.rotate-180,.previous-interaction .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child .widget-button.rotate-180{transform:rotate3d(0,0,1,180deg)}.interaction-container .response-messages-wrapper .response-message .tableform-message .form-message-item,.previous-interaction .response-messages-wrapper .response-message .tableform-message .form-message-item{margin:0;transition:all .25s ease-in-out;border-bottom:none}.interaction-container .response-messages-wrapper .response-message .tableform-message .form-message-item:last-child,.previous-interaction .response-messages-wrapper .response-message .tableform-message .form-message-item:last-child{border-top:1px solid var(--chat-bar-color-table-bottom)}.interaction-container .response-messages-wrapper .response-message .form-message>.form-hint-wrapper,.previous-interaction .response-messages-wrapper .response-message .form-message>.form-hint-wrapper{margin-block:8px}.interaction-container .response-messages-wrapper .response-message span.highlight,.previous-interaction .response-messages-wrapper .response-message span.highlight{background-color:var(--chat-bar-color-form-highlight)}.interaction-container .response-messages-wrapper .response-message .footer-form,.previous-interaction .response-messages-wrapper .response-message .footer-form{width:100%}.interaction-container .response-messages-wrapper .response-message .footer-form .message-bubble-form-message,.previous-interaction .response-messages-wrapper .response-message .footer-form .message-bubble-form-message{background:transparent;border:none;width:100%}.interaction-container .response-messages-wrapper .response-message .footer-form .message-bubble-form-message .form-message-item,.previous-interaction .response-messages-wrapper .response-message .footer-form .message-bubble-form-message .form-message-item{background:transparent;padding:0}.interaction-container .response-messages-wrapper .response-message .footer-form .message-bubble-form-message .form-message-item .form-message-key,.previous-interaction .response-messages-wrapper .response-message .footer-form .message-bubble-form-message .form-message-item .form-message-key{color:var(--chat-bar-color-footer-form-label)}.interaction-container .response-messages-wrapper .response-message .card,.previous-interaction .response-messages-wrapper .response-message .card{width:252px;border-radius:6px;padding:12px 16px;margin-block-end:8px;justify-content:flex-start;flex-shrink:0;color:var(--chat-bar-color-card-text);background:var(--chat-bar-color-card-background);overflow:hidden}.interaction-container .response-messages-wrapper .response-message .card .card-content,.previous-interaction .response-messages-wrapper .response-message .card .card-content{margin-bottom:12px}.interaction-container .response-messages-wrapper .response-message .card .card-image,.previous-interaction .response-messages-wrapper .response-message .card .card-image{display:block;width:calc(100% + 32px);margin:-12px -16px 10px;min-height:88px;background-color:var(--chat-bar-color-attachment-placeholder)}.interaction-container .response-messages-wrapper .response-message .card .card-title,.previous-interaction .response-messages-wrapper .response-message .card .card-title{margin-bottom:4px;font-weight:700;word-break:normal;overflow-wrap:anywhere}.interaction-container .response-messages-wrapper .response-message .card-message-content,.previous-interaction .response-messages-wrapper .response-message .card-message-content{width:100%;position:relative}.interaction-container .response-messages-wrapper .response-message .card-message-content .card-message-cards,.previous-interaction .response-messages-wrapper .response-message .card-message-content .card-message-cards{width:100%;align-items:stretch;display:flex;scroll-behavior:smooth;overflow-x:visible;flex-direction:column;margin:8px 0 0;scrollbar-width:none}.interaction-container .response-messages-wrapper .response-message .card-message-content .card-message-cards::-webkit-scrollbar,.previous-interaction .response-messages-wrapper .response-message .card-message-content .card-message-cards::-webkit-scrollbar{display:none}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .card-message-cards,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .card-message-cards{flex-direction:row;overflow-x:auto}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .card,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .card{border:1px solid rgba(22,21,19,.12);box-shadow:0 1px 4px #0000001f;margin-inline-end:8px}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper,.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper{position:absolute;height:100%;top:0;width:52px;z-index:1}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg,rgba(255,255,255,0),var(--chat-bar-color-error-message-background) 60%);inset-inline-end:0}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg,var(--chat-bar-color-error-message-background) 40%,rgba(255,255,255,0));inset-inline-start:0}[dir=rtl] .interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper,[dir=rtl] .previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg,var(--chat-bar-color-error-message-background) 40%,rgba(255,255,255,0))}[dir=rtl] .interaction-container .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper,[dir=rtl] .previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg,rgba(255,255,255,0),var(--chat-bar-color-error-message-background) 60%)}[dir=rtl] .interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next,[dir=rtl] .interaction-container .response-messages-wrapper .response-message.card-message-horizontal .previous,[dir=rtl] .previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next,[dir=rtl] .previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .previous{transform:rotate(180deg)}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next,.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .previous,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .previous{position:absolute;width:36px;height:36px;left:8px;padding:0;overflow:hidden;background-color:var(--chat-bar-color-card-nav-button);border:none;box-shadow:0 2px 4px #0000001a;top:calc(50% - 18px);justify-content:center}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next:hover,.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .previous:hover,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next:hover,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .previous:hover{background-color:var(--chat-bar-color-card-nav-button-hover)}.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next:focus,.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .next:active,.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .previous:focus,.interaction-container .response-messages-wrapper .response-message.card-message-horizontal .previous:active,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next:focus,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .next:active,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .previous:focus,.previous-interaction .response-messages-wrapper .response-message.card-message-horizontal .previous:active{background-color:var(--chat-bar-color-card-nav-button-focus)}.interaction-container .response-messages-wrapper .response-message .embeddedAction,.previous-interaction .response-messages-wrapper .response-message .embeddedAction{border:1px solid rgba(122,115,110,.2509803922);border-radius:4px;cursor:pointer;font:600 12px/16px var(--chat-bar-font-family);height:20px;padding:2px 6px}.interaction-container .response-messages-wrapper .response-message .embeddedAction:hover,.previous-interaction .response-messages-wrapper .response-message .embeddedAction:hover{text-decoration:underline}.interaction-container .response-messages-wrapper .response-message .embeddedAction.display-link,.previous-interaction .response-messages-wrapper .response-message .embeddedAction.display-link{border:none;color:var(--chat-bar-color-links);padding:0}.interaction-container .response-messages-wrapper .response-message .embeddedAction.display-link:focus-visible,.previous-interaction .response-messages-wrapper .response-message .embeddedAction.display-link:focus-visible{text-decoration:underline}.interaction-container .response-messages-wrapper .response-message .embeddedAction.display-icon,.previous-interaction .response-messages-wrapper .response-message .embeddedAction.display-icon{padding:0;border:none}.interaction-container .user-message-wrapper,.previous-interaction .user-message-wrapper{align-items:flex-start;justify-content:flex-start;max-width:100%}.interaction-container .user-message-wrapper .user-message,.previous-interaction .user-message-wrapper .user-message{color:var(--chat-bar-color-text-secondary);font:400 12px/16px var(--chat-bar-font-family);max-width:100%}.interaction-container .user-message-wrapper .user-message .message-wrapper,.previous-interaction .user-message-wrapper .user-message .message-wrapper{color:inherit;font:inherit}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble{color:inherit;font:inherit;min-height:16px}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .message-text,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .message-text{word-break:normal;overflow-wrap:anywhere;color:inherit;font:inherit}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-title,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-title{color:inherit;font:inherit}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button{align-items:center;border:0;cursor:pointer;height:36px;justify-content:center;margin:0;transition:all .3s ease-out;width:36px}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:hover svg,.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:focus-visible svg,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:hover svg,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:focus,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button svg,.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button img,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button svg,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button img{width:20px;height:20px;flex-shrink:0}.interaction-container .user-message-wrapper .user-message .message-wrapper .message-bubble .message-user-postback>img,.previous-interaction .user-message-wrapper .user-message .message-wrapper .message-bubble .message-user-postback>img{max-height:32px;max-width:32px}.interaction-container .user-message-wrapper .message-highlight,.previous-interaction .user-message-wrapper .message-highlight{background-color:var(--chat-bar-color-success-50);border-radius:0 4px 4px 0;flex:0 0 6px;height:16px;margin-inline:-16px 10px}.interaction-container .message,.previous-interaction .message{max-width:100%}.interaction-container .message.card-message-horizontal,.previous-interaction .message.card-message-horizontal{margin-inline:0}.interaction-container .message.card-message-horizontal .card-message-cards,.previous-interaction .message.card-message-horizontal .card-message-cards{padding-inline-start:0}.interaction-container .message-bubble-tabular-message,.interaction-container .message-bubble-form-message,.previous-interaction .message-bubble-tabular-message,.previous-interaction .message-bubble-form-message{width:unset;max-width:100%;border-bottom-left-radius:0!important}.interaction-container .message-global-actions,.previous-interaction .message-global-actions{margin-top:0;padding-bottom:8px}.interaction-container .attachment-placeholder,.previous-interaction .attachment-placeholder{justify-content:center}.interaction-container .attachment-placeholder svg,.interaction-container .attachment-placeholder img,.interaction-container .attachment-placeholder video,.previous-interaction .attachment-placeholder svg,.previous-interaction .attachment-placeholder img,.previous-interaction .attachment-placeholder video{max-width:100%}.interaction-container .attachment-controls .attachment-button,.interaction-container .attachment-controls a,.previous-interaction .attachment-controls .attachment-button,.previous-interaction .attachment-controls a{align-items:center;background-color:transparent;display:flex;justify-content:center;padding:2px}.interaction-container .typing-cue-wrapper.typing-cue-wrapper,.previous-interaction .typing-cue-wrapper.typing-cue-wrapper{width:60%}.interaction-container .reasoning-indicator,.previous-interaction .reasoning-indicator{overflow:hidden}.interaction-container .reasoning-indicator .reasoning-text,.previous-interaction .reasoning-indicator .reasoning-text{color:var(--chat-bar-color-text-disabled);font:400 12px/16px var(--chat-bar-font-family);display:flex}.interaction-container .reasoning-indicator .thinking-bar,.previous-interaction .reasoning-indicator .thinking-bar{animation:reasoning-indicator 5s ease-in-out infinite}.interaction-container .message-block,.previous-interaction .message-block{flex-direction:column}.interaction-container .cancel-response-button.cancel-response-button,.previous-interaction .cancel-response-button.cancel-response-button{background-color:var(--chat-bar-color-black);border-radius:10000px;bottom:66px;height:20px;position:fixed;right:16px;width:20px}.interaction-container .cancel-response-button.cancel-response-button svg,.previous-interaction .cancel-response-button.cancel-response-button svg{fill:var(--chat-bar-color-white);height:8px;width:8px}.transcript-wrapper-container{background-color:var(--chat-bar-color-surface-neutral-10);height:auto;padding:12px 16px;max-height:100%;overflow:auto;position:relative}.transcript-wrapper-container .response-messages-wrapper{align-items:flex-start;justify-content:flex-start;max-width:100%;margin-inline-end:24px}.transcript-wrapper-container .response-messages-wrapper .response-message{color:var(--chat-bar-color-text-primary);font:400 13.75px/16px var(--chat-bar-font-family);max-width:100%}.transcript-wrapper-container .response-messages-wrapper .response-message a{color:var(--chat-bar-color-links)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble.error,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message.error,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message.error{color:inherit;font:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .message-header,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .message-header,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .message-header{color:inherit;font:inherit;margin-top:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .message-text,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .message-text,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .message-text,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item{color:inherit;font:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-row,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-row,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-row{display:flex;flex-flow:row nowrap}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-lg,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-md,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item .form-message-field.form-message-value.font-size-sm,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item .form-message-field.form-message-value.font-size-sm{color:inherit;font:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item.c2k-reference,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item.c2k-reference,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item.c2k-reference{justify-content:flex-start}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble .form-message .form-message-item.c2k-reference .form-row,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-form-message .form-message .form-message-item.c2k-reference .form-row,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .message-bubble-tabular-message .form-message .form-message-item.c2k-reference .form-row{align-items:flex-end;gap:4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item{color:var(--chat-bar-color-form-text);display:flex;flex-flow:row wrap;justify-content:space-between}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row{align-items:stretch;display:flex;flex:1 0 100%;gap:4px;max-width:100%;margin:2px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row.separator{border-top:1px solid var(--chat-bar-color-table-separator);margin-top:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column{display:flex;flex-flow:column wrap;flex:0 1 auto;min-width:0}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.stretch{flex-grow:1}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-center{justify-content:center}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-start{justify-content:flex-start}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column.align-end{justify-content:flex-end}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field{height:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg{margin-top:28px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md{margin-top:16px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-default{margin-top:4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox{inset-inline:0;min-width:100%;max-width:unset}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference{justify-content:flex-start}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row{color:#161513a6;display:flex;flex-basis:fit-content;flex-flow:row nowrap;line-height:16px;margin-inline-end:8px;max-width:100%;width:auto}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row .form-row-column:not(:last-child){margin-inline-end:6px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.c2k-reference .form-row span.delimiter{margin-inline-end:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item.with-border{border-bottom:1px solid var(--chat-bar-color-table-separator);padding-bottom:4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key{color:var(--chat-bar-color-form-label);flex:1;line-height:16px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-lg{font-size:14px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-md{font-size:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-size-sm{font-size:10px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-bold{font-weight:700}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-md{font-weight:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.font-weight-light{font-weight:400}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-key.with-margin{cursor:auto;margin-bottom:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item>.form-message-field:not(:last-child){margin-bottom:16px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value{word-break:normal;overflow-wrap:anywhere}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-lg{font-size:18px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-md{font-size:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-size-sm{font-size:13.8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold{font-weight:700}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-md{font-weight:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.font-weight-light{font-weight:300}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value.with-top-margin{margin-top:2px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field .form-message-value button.action-postback{margin-inline-start:0}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-1{flex-basis:100%;max-width:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2{flex-basis:calc(50% - 12px);max-width:calc(50% - 12px);height:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-last-child(2){margin-bottom:0}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(2n) .popupContent{inset-inline-start:calc(50% - 7px)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(2n) .listbox{inset-inline:0}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox{min-width:calc(50% - 28px)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field{display:flex;flex-direction:column;overflow:visible;position:relative;width:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.disabled{cursor:not-allowed}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value{border-radius:4px;background-color:var(--chat-bar-color-form-input-background);color:var(--chat-bar-color-form-input-text);border:1px solid var(--chat-bar-color-form-input-border);font-size:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value:focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value:focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value:focus{border-color:var(--chat-bar-color-form-input-border-focus);box-shadow:0 0 0 1px var(--chat-bar-color-form-input-border-focus) inset;outline:1px solid transparent}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .input:disabled,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:disabled,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled{opacity:.5;cursor:not-allowed}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.input:not(:disabled,.disabled),.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.textarea:not(:disabled,.disabled),.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled){border-color:var(--chat-bar-color-form-error)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value{height:44px;padding:0 12px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button{cursor:pointer;width:20px;height:20px;margin-inline-end:-8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper{align-items:center;display:flex;height:44px;padding-inline-end:4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focus{border-color:var(--chat-bar-color-form-input-border-focus);box-shadow:0 0 0 1px var(--chat-bar-color-form-input-border-focus) inset;outline:1px solid transparent}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled{opacity:.5;pointer-events:none}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .input{width:calc(100% - 36px);border:none;box-shadow:none!important;outline:1px solid transparent;height:40px;margin-inline-start:1px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon{justify-content:center;margin-inline-start:0;color:var(--chat-bar-color-form-input-text)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value{overflow:auto;padding:11px 12px;resize:none}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container{display:flex;max-width:max-content}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled{cursor:not-allowed;opacity:.5}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .label{display:flex;min-height:36px;align-items:center;padding:7.5px 0;border-bottom:1px solid transparent}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input{margin:0 8px 0 4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container{background-color:var(--chat-bar-color-form-input-background);border-radius:4px;border:1px solid var(--chat-bar-color-form-input-border);display:flex;min-height:44px;flex-direction:row;cursor:text}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled{opacity:.5;pointer-events:none}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus{border-color:var(--chat-bar-color-form-input-border-focus);box-shadow:0 0 0 1px var(--chat-bar-color-form-input-border-focus) inset;outline:1px solid transparent}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options{display:flex;flex-wrap:wrap;padding:0 12px 5px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty{padding-top:5px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before{content:attr(data-placeholder)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option{line-height:16px;display:flex;align-items:center;cursor:default;border-radius:4px;border:1px solid var(--chat-bar-color-form-input-border);color:var(--chat-bar-color-form-input-text);background-clip:padding-box;font-size:12px;margin-inline-end:6px;margin-top:5px;padding-inline:6px 4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close{cursor:pointer;height:16px;width:16px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox{border:1px solid var(--chat-bar-color-table-separator);border-radius:4px;display:flex;flex-direction:column;margin-top:3px;max-width:calc(100% - 32px);min-width:calc(100% - 32px);z-index:3}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box{display:flex;flex-direction:column;padding:0 12px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text{color:var(--chat-bar-color-form-label);font-size:inherit;height:44px;padding:12px 0;border-bottom:1px solid var(--chat-bar-color-table-separator)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search{flex-shrink:0;margin:12px;padding-inline-end:36px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper{position:relative;height:0}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon{position:absolute;inset-inline-end:21px;bottom:23px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list{animation:none;display:block;max-height:400px;margin:1px 0 2px;overflow-y:auto;padding:8px 0;z-index:3}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li{height:auto;margin:0;padding:12px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected{border-top:1px solid rgb(34,126,158);background-color:#e4f1f7}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected:last-child,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected:last-child{box-shadow:inset 0 -1px #227e9e}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected+li,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected+li{border-top:1px solid rgb(34,126,158)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle{position:relative;width:36px;height:20px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input{display:none}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:disabled+.round-slider{cursor:not-allowed;opacity:.5}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider{background-color:#227e9e;border-color:#227e9e}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider:before{inset-inline:auto 1px;transition:height .3s cubic-bezier(0,0,.2,1),width .3s cubic-bezier(0,0,.2,1),right .3s cubic-bezier(0,0,.2,1)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider{position:absolute;cursor:pointer;background-color:#8b8580;transition:background-color .2s linear .1s,opacity .2s linear .1s,border-color .2s linear .1s;border:1px solid transparent;border-radius:4px;height:20px;width:36px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before{border-radius:4px;width:16px;height:16px;inset-inline:1px auto;position:absolute;content:"";bottom:1px;background-color:var(--chat-bar-color-form-background);transition:height .3s cubic-bezier(0,0,.2,1),width .3s cubic-bezier(0,0,.2,1),left .3s cubic-bezier(0,0,.2,1)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value{word-break:normal;overflow-wrap:anywhere}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback{background:var(--chat-bar-color-form-actions-background);color:var(--chat-bar-color-form-actions-text);border-color:var(--chat-bar-color-form-actions-border)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover{color:var(--chat-bar-color-form-actions-text-hover);background:var(--chat-bar-color-form-actions-background-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path{fill:var(--chat-bar-color-form-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active{background:var(--chat-bar-color-form-actions-background-focus);color:var(--chat-bar-color-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path{fill:var(--chat-bar-color-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions{display:flex;font:inherit;flex-flow:column nowrap;gap:8px;margin-top:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback{align-items:center;background-color:transparent;border:1px solid var(--chat-bar-color-focus-outline);border-radius:4px;border-width:thin;color:var(--chat-bar-color-text-primary);display:flex;font:inherit;flex-flow:row wrap;flex-shrink:0;gap:8px;justify-content:center;max-width:100%;padding:8px 16px;width:max-content}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:disabled,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:disabled,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:disabled{border-color:var(--chat-bar-color-border-top);color:var(--chat-bar-color-text-disabled);cursor:default}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:focus,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:hover,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:focus{background-color:var(--chat-bar-color-action-surface-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:focus-visible,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:focus-visible,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:focus-visible{outline:1px dotted var(--chat-bar-color-focus-outline)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions .widget-button.action-postback:active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-global-actions .widget-button.action-postback:active,.transcript-wrapper-container .response-messages-wrapper .response-message .card-actions .widget-button.action-postback:active{background-color:var(--chat-bar-color-action-surface-active)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-actions:last-child{margin-bottom:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback{align-items:center;display:flex;justify-content:center;height:24px;width:24px}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback.disabled{display:none}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback img{filter:grayscale(100%) brightness(.15) opacity(.7)}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback:hover img{filter:grayscale(100%) brightness(.5) opacity(1)}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-value .widget-button.action-postback:focus-visible img{filter:grayscale(100%) brightness(.5) opacity(1)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message{width:100%;max-width:unset;padding:0;color:var(--chat-bar-color-table-text);overflow:hidden}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .popupContent,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .popupContent{max-width:280px;position:absolute;height:auto;border-radius:8px;z-index:3;box-shadow:0 4px 4px #0000001a;border:1px solid rgba(22,21,19,.1215686275);background:var(--chat-bar-color-bot-message-background);display:none;inset-inline-start:-4px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .results-page-status,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .results-page-status{align-items:center;background-color:var(--chat-bar-color-table-background);color:var(--chat-bar-color-table-text);display:flex;flex-direction:row;font-size:inherit;justify-content:flex-end;line-height:16px;padding:12px 16px;border-top:1px solid var(--chat-bar-color-table-separator)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message~.message-footer,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message~.message-footer{margin-top:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback{background:var(--chat-bar-color-table-actions-background);color:var(--chat-bar-color-table-actions-text);border-color:var(--chat-bar-color-table-actions-border)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--chat-bar-color-table-actions-text-hover);background:var(--chat-bar-color-table-actions-background-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--chat-bar-color-table-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background:var(--chat-bar-color-table-actions-background-focus);color:var(--chat-bar-color-table-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--chat-bar-color-table-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions{border-top:1px solid var(--chat-bar-color-table-separator);padding:12px 0;margin-top:auto}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value{word-break:normal;overflow-wrap:anywhere}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary{background:var(--chat-bar-color-primary-form-actions-background);color:var(--chat-bar-color-primary-form-actions-text);border:var(--chat-bar-color-primary-form-actions-border)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover{background:var(--chat-bar-color-primary-form-actions-background-hover);color:var(--chat-bar-color-primary-form-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path{fill:var(--chat-bar-color-primary-form-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active{background:var(--chat-bar-color-primary-form-actions-background-focus);color:var(--chat-bar-color-primary-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path{fill:var(--chat-bar-color-primary-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger{background:var(--chat-bar-color-danger-form-actions-background);color:var(--chat-bar-color-danger-form-actions-text);border:var(--chat-bar-color-danger-form-actions-border)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover{background:var(--chat-bar-color-danger-form-actions-background-hover);color:var(--chat-bar-color-danger-form-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path{fill:var(--chat-bar-color-danger-form-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active{background:var(--chat-bar-color-danger-form-actions-background-focus);color:var(--chat-bar-color-danger-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path{fill:var(--chat-bar-color-danger-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message{color:var(--chat-bar-color-form-text)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message{overflow:visible}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message .message-actions{border-top:none;padding-top:0}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message.edit-form-message .form-message-key{min-height:16px}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .results-page-status{background-color:var(--chat-bar-color-form-background);color:var(--chat-bar-color-form-text)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback{background:var(--chat-bar-color-form-actions-background);color:var(--chat-bar-color-form-actions-text);border-color:var(--chat-bar-color-form-actions-border)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover{color:var(--chat-bar-color-form-actions-text-hover);background:var(--chat-bar-color-form-actions-background-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path{fill:var(--chat-bar-color-form-actions-text-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):active{background:var(--chat-bar-color-form-actions-background-focus);color:var(--chat-bar-color-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.transcript-wrapper-container .response-messages-wrapper .response-message .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path{fill:var(--chat-bar-color-form-actions-text-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-field,.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-heading,.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-item{word-break:normal;overflow-wrap:anywhere}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-field:hover .popupContent,.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-heading:hover .popupContent,.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-item:hover .popupContent{display:flex}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper{overflow:auto}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message-table-title-wrapper{background-color:var(--chat-bar-color-table-header-background);border-bottom:1px solid var(--chat-bar-color-table-title-separator);padding:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message-table-title-wrapper .table-message-table-title{color:var(--chat-bar-color-table-header-text);font-size:inherit;font-weight:700;line-height:16px;margin:4px 8px}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message{min-width:100%;max-width:200%;border-collapse:collapse}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-headings{align-items:center;color:var(--chat-bar-color-table-header-text);background-color:var(--chat-bar-color-table-header-background);display:flex}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-headings .table-message-heading{font-size:inherit;font-weight:700;line-height:16px;padding:16px;min-width:120px}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row{border-top:1px solid var(--chat-bar-color-table-separator);display:flex;align-items:center}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item{color:var(--chat-bar-color-table-text);font-size:inherit;line-height:20px;min-width:120px;padding:10px 16px}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-lg{font-size:18px}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-md{font-size:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-sm{font-size:13.8px}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-bold{font-weight:700}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-md{font-weight:inherit}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-light{font-weight:300}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value .action-url{width:unset}.transcript-wrapper-container .response-messages-wrapper .response-message .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value :hover{background-color:unset}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message-header{align-items:center;color:var(--chat-bar-color-form-header-text);display:flex;font-weight:700;line-height:20px;padding-bottom:16px;text-align:start}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper{align-items:center;display:flex;flex:1;margin-top:2px;min-height:20px}.disabled.disabled .transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper>*{display:none}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .form-hint-required{color:var(--chat-bar-color-form-required-tip);font-size:12px}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error{display:flex}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error{background-color:var(--chat-bar-color-error-message-background);border:thin dashed var(--chat-bar-color-form-error);border-radius:4px;margin:10px 0;padding:8px;width:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error.disabled{display:none}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error .field-error-icon{top:0}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error.form-error .field-error-text{color:var(--chat-bar-color-error-title);font-size:14px;font-weight:700;margin-inline-start:8px}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error .field-error-icon{flex-shrink:0;fill:var(--chat-bar-color-form-error);height:16px;width:16px}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper .field-error .field-error-text{color:var(--chat-bar-color-form-error-text);font-size:12px;margin-inline-start:4px}.transcript-wrapper-container .response-messages-wrapper .response-message .form-hint-wrapper-end{justify-content:flex-end}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row{cursor:pointer}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row:hover{background-color:var(--chat-bar-color-table-row-background-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:hover,.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:active,.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row .widget-button:focus{background-color:unset}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child,.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child{min-width:unset;padding:0}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child .widget-button,.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child .widget-button{justify-content:center;margin:0 2px;transition:transform .25s ease-in-out}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-headings .table-message-heading:last-child .widget-button.rotate-180,.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .table-message-row .table-message-item:last-child .widget-button.rotate-180{transform:rotate3d(0,0,1,180deg)}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .form-message-item{margin:0;transition:all .25s ease-in-out;border-bottom:none}.transcript-wrapper-container .response-messages-wrapper .response-message .tableform-message .form-message-item:last-child{border-top:1px solid var(--chat-bar-color-table-bottom)}.transcript-wrapper-container .response-messages-wrapper .response-message .form-message>.form-hint-wrapper{margin-block:8px}.transcript-wrapper-container .response-messages-wrapper .response-message span.highlight{background-color:var(--chat-bar-color-form-highlight)}.transcript-wrapper-container .response-messages-wrapper .response-message .footer-form{width:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .footer-form .message-bubble-form-message{background:transparent;border:none;width:100%}.transcript-wrapper-container .response-messages-wrapper .response-message .footer-form .message-bubble-form-message .form-message-item{background:transparent;padding:0}.transcript-wrapper-container .response-messages-wrapper .response-message .footer-form .message-bubble-form-message .form-message-item .form-message-key{color:var(--chat-bar-color-footer-form-label)}.transcript-wrapper-container .response-messages-wrapper .response-message .card{width:252px;border-radius:6px;padding:12px 16px;margin-block-end:8px;justify-content:flex-start;flex-shrink:0;color:var(--chat-bar-color-card-text);background:var(--chat-bar-color-card-background);overflow:hidden}.transcript-wrapper-container .response-messages-wrapper .response-message .card .card-content{margin-bottom:12px}.transcript-wrapper-container .response-messages-wrapper .response-message .card .card-image{display:block;width:calc(100% + 32px);margin:-12px -16px 10px;min-height:88px;background-color:var(--chat-bar-color-attachment-placeholder)}.transcript-wrapper-container .response-messages-wrapper .response-message .card .card-title{margin-bottom:4px;font-weight:700;word-break:normal;overflow-wrap:anywhere}.transcript-wrapper-container .response-messages-wrapper .response-message .card-message-content{width:100%;position:relative}.transcript-wrapper-container .response-messages-wrapper .response-message .card-message-content .card-message-cards{width:100%;align-items:stretch;display:flex;scroll-behavior:smooth;overflow-x:visible;flex-direction:column;margin:8px 0 0;scrollbar-width:none}.transcript-wrapper-container .response-messages-wrapper .response-message .card-message-content .card-message-cards::-webkit-scrollbar{display:none}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .card-message-cards{flex-direction:row;overflow-x:auto}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .card{border:1px solid rgba(22,21,19,.12);box-shadow:0 1px 4px #0000001f;margin-inline-end:8px}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper,.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper{position:absolute;height:100%;top:0;width:52px;z-index:1}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg,rgba(255,255,255,0),var(--chat-bar-color-error-message-background) 60%);inset-inline-end:0}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg,var(--chat-bar-color-error-message-background) 40%,rgba(255,255,255,0));inset-inline-start:0}[dir=rtl] .transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg,var(--chat-bar-color-error-message-background) 40%,rgba(255,255,255,0))}[dir=rtl] .transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg,rgba(255,255,255,0),var(--chat-bar-color-error-message-background) 60%)}[dir=rtl] .transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next,[dir=rtl] .transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .previous{transform:rotate(180deg)}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next,.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .previous{position:absolute;width:36px;height:36px;left:8px;padding:0;overflow:hidden;background-color:var(--chat-bar-color-card-nav-button);border:none;box-shadow:0 2px 4px #0000001a;top:calc(50% - 18px);justify-content:center}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next:hover,.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .previous:hover{background-color:var(--chat-bar-color-card-nav-button-hover)}.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next:focus,.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .next:active,.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .previous:focus,.transcript-wrapper-container .response-messages-wrapper .response-message.card-message-horizontal .previous:active{background-color:var(--chat-bar-color-card-nav-button-focus)}.transcript-wrapper-container .response-messages-wrapper .response-message .embeddedAction{border:1px solid rgba(122,115,110,.2509803922);border-radius:4px;cursor:pointer;font:600 12px/16px var(--chat-bar-font-family);height:20px;padding:2px 6px}.transcript-wrapper-container .response-messages-wrapper .response-message .embeddedAction:hover{text-decoration:underline}.transcript-wrapper-container .response-messages-wrapper .response-message .embeddedAction.display-link{border:none;color:var(--chat-bar-color-links);padding:0}.transcript-wrapper-container .response-messages-wrapper .response-message .embeddedAction.display-link:focus-visible{text-decoration:underline}.transcript-wrapper-container .response-messages-wrapper .response-message .embeddedAction.display-icon{padding:0;border:none}.transcript-wrapper-container .user-message-wrapper{align-items:flex-start;justify-content:flex-start;max-width:100%;margin-inline-end:24px}.transcript-wrapper-container .user-message-wrapper .user-message{color:var(--chat-bar-color-text-secondary);font:400 12px/16px var(--chat-bar-font-family);max-width:100%}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper{color:inherit;font:inherit}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble{color:inherit;font:inherit;min-height:16px}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .message-text{word-break:normal;overflow-wrap:anywhere;color:inherit;font:inherit}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-title{color:inherit;font:inherit}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button{align-items:center;border:0;cursor:pointer;height:36px;justify-content:center;margin:0;transition:all .3s ease-out;width:36px}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:hover svg,.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button svg,.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .attachment-button img{width:20px;height:20px;flex-shrink:0}.transcript-wrapper-container .user-message-wrapper .user-message .message-wrapper .message-bubble .message-user-postback>img{max-height:32px;max-width:32px}.transcript-wrapper-container .user-message-wrapper .message-highlight{background-color:var(--chat-bar-color-success-50);border-radius:0 4px 4px 0;flex:0 0 6px;height:16px;margin-inline:-16px 10px}.transcript-wrapper-container .scroll-down-button-wrapper{bottom:65px;right:50%;position:fixed}.transcript-wrapper-container .scroll-down-button-wrapper .widget-button{align-items:center;border:0;cursor:pointer;height:36px;justify-content:center;margin:0;transition:all .3s ease-out;width:36px;background-color:#fff;border-radius:35px;box-shadow:0 6px 12px #0003;padding:8px}.transcript-wrapper-container .scroll-down-button-wrapper .widget-button:hover svg,.transcript-wrapper-container .scroll-down-button-wrapper .widget-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.transcript-wrapper-container .scroll-down-button-wrapper .widget-button:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.transcript-wrapper-container .scroll-down-button-wrapper .widget-button svg,.transcript-wrapper-container .scroll-down-button-wrapper .widget-button img{width:20px;height:20px;flex-shrink:0}.transcript-wrapper-container .scroll-down-button-wrapper .widget-button:hover{background-color:#e9e7e7}.transcript-wrapper-container .scroll-down-button-wrapper .widget-button:active{background-color:#d4d7d3}.transcript-container .widget-button{align-items:center;border:0;cursor:pointer;height:36px;justify-content:center;margin:0;transition:all .3s ease-out;width:36px}.transcript-container .widget-button:hover svg,.transcript-container .widget-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.transcript-container .widget-button:focus{outline:1px dotted var(--chat-bar-color-focus-outline)}.transcript-container .widget-button svg,.transcript-container .widget-button img{width:20px;height:20px;flex-shrink:0}.transcript-container .widget-button.pin-button,.transcript-container .widget-button.unpin-button{background-color:transparent;position:fixed;right:16px;z-index:100}.transcript-container .widget-button.pin-button:hover svg,.transcript-container .widget-button.pin-button:focus-visible svg,.transcript-container .widget-button.unpin-button:hover svg,.transcript-container .widget-button.unpin-button:focus-visible svg{fill:var(--chat-bar-color-oracle-red)}.transcript-container .previous-interaction{margin-bottom:12px}.transcript-container .timestamp-container{margin-bottom:8px}.transcript-container .timestamp-container .timestamp-header{font:700 13.75px/16px var(--chat-bar-font-family);font-variant-numeric:lining-nums;text-transform:capitalize}.transcript-container.mode-interaction .message-highlight{display:none}.transcript-container .popup{position:absolute;background-color:var(--chat-bar-color-popup-background);color:var(--chat-bar-color-popup-text);min-width:100%;max-height:280px;display:none;padding:4px 0;border-radius:6px;box-shadow:#00000029 0 4px 8px;overflow-y:auto;z-index:5}.transcript-container .popup .li{display:flex;align-items:center;height:48px;margin:4px 0;cursor:pointer;overflow:hidden;color:var(--chat-bar-color-popup-button-text)}.transcript-container .popup .li.disable{pointer-events:none;cursor:not-allowed;opacity:.5}.transcript-container .popup .li:focus{outline:1px dotted var(--chat-bar-color-focus-outline);outline-offset:1px}.transcript-container .popup .li:hover,.transcript-container .popup .li:focus,.transcript-container .popup .li.active{background-color:var(--chat-bar-color-popup-item-background-hover)}.transcript-container .popup .li .text{padding:0 16px}.transcript-container .popup.expand{display:block;-webkit-animation:scale-in-br .25s cubic-bezier(.25,.46,.45,.94) .2s both;animation:scale-in-br .25s cubic-bezier(.25,.46,.45,.94) .2s both}.flex{display:flex;justify-content:space-between;align-items:center}.col{flex-direction:column}.none{display:none!important}.wrapper{--color-branding: #c0533f;--color-branding-light: #ca4d3c;--color-branding-dark: #9b382a;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #161513;--color-header-background: #F1EFED;--color-header-button-fill: #161513;--color-header-text: #161513;--color-header-button-background-hover: rgba(22, 21, 19, .04);--color-header-button-fill-hover: #161513;--color-conversation-background: #F5F4F2;--color-timestamp: rgba(22, 21, 19, .65);--color-border: #1615131F;--color-typing-indicator: #161513;--color-agent-initials: #FFFFFF;--color-agent-avatar-background: #A890B6;--color-agent-name: rgba(22, 21, 19, .65);--color-bot-message-background: #FFFFFF;--color-bot-text: #161513;--color-user-message-background: #E4E1DD;--color-user-text: #161513;--color-error-message-background: #FFF8F7;--color-error-border: #DC5C5E;--color-error-title: #D63B25;--color-error-text: #161513;--color-card-background: #FFFFFF;--color-card-nav-button: #FFF;--color-card-nav-button-focus: #FBF9F8;--color-card-nav-button-hover: #FBF9F8;--color-actions-background: #fff;--color-actions-background-focus: #fff;--color-actions-background-hover: rgba(22, 21, 19, .04);--color-actions-border: rgba(22, 21, 19, .5);--color-actions-outline-focus: rgb(22, 21, 19);--color-actions-text: #161513;--color-actions-text-focus: #161513;--color-actions-text-hover: #161513;--color-global-actions-background: transparent;--color-global-actions-background-focus: transparent;--color-global-actions-background-hover: rgba(22, 21, 19, .04);--color-global-actions-border: rgba(22, 21, 19, .5);--color-global-actions-text: #161513;--color-global-actions-text-focus: #161513;--color-global-actions-text-hover: #161513;--color-primary-actions-background: rgb(49, 45, 42);--color-primary-actions-background-focus: rgb(49, 45, 42);--color-primary-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-actions-border: transparent;--color-primary-actions-text: #fff;--color-primary-actions-text-focus: #fff;--color-primary-actions-text-hover: #fff;--color-danger-actions-background: rgb(214, 59, 37);--color-danger-actions-background-focus: rgb(214, 59, 37);--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-actions-border: transparent;--color-danger-actions-text: #fff;--color-danger-actions-text-focus: #fff;--color-danger-actions-text-hover: #fff;--color-links: #c0533f;--color-user-links: #c0533f;--color-rating-star: #ececec;--color-rating-star-fill: #f0cc71;--color-horizontal-rule-background: #cbc5bf;--color-attachment-placeholder: #e3e1dc;--color-attachment-footer: #fff;--color-attachment-text: #161513;--color-footer-form-label: rgba(22, 21, 19, .65);--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-background-hover: rgba(22, 21, 19, .04);--color-footer-button-fill-hover: #161513;--color-input-background: #fff;--color-input-border: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer: #161513;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-background: #fff;--color-popup-text: #161513;--color-popup-button-background: #fff;--color-popup-button-text: #161513;--color-popup-horizontal-rule: #cbc5bf;--color-popup-item-background-hover: rgba(22, 21, 19, .04);--color-table-header-background: #f1efec;--color-table-header-text: #161513;--color-table-title-separator: #b3b1af;--color-table-background: #fff;--color-table-text: #161513;--color-table-separator: rgba(22, 21, 19, .1);--color-table-row-background-hover: rgba(22, 21, 19, .04);--color-table-actions-background: transparent;--color-table-actions-background-focus: transparent;--color-table-actions-background-hover: rgba(22, 21, 19, .04);--color-table-actions-border: rgba(22, 21, 19, .5);--color-table-actions-text: #161513;--color-table-actions-text-focus: #161513;--color-table-actions-text-hover: #161513;--color-form-header-background: #f1efec;--color-form-header-text: #161513;--color-form-background: #fff;--color-form-text: #161513;--color-form-input-background: #fff;--color-form-input-border: rgba(22, 21, 19, .5);--color-form-input-border-focus: rgb(14, 114, 151);--color-form-input-text: #161513;--color-form-label: rgba(22, 21, 19, .65);--color-form-required-tip: rgba(22, 21, 19, .65);--color-form-error: rgba(179, 49, 31);--color-form-error-text: rgba(22, 21, 19, .65);--color-form-actions-background: transparent;--color-form-actions-background-focus: transparent;--color-form-actions-background-hover: rgba(22, 21, 19, .04);--color-form-actions-border: rgba(22, 21, 19, .5);--color-form-actions-text: #161513;--color-form-actions-text-focus: #161513;--color-form-actions-text-hover: #161513;--color-primary-form-actions-background: rgb(49, 45, 42);--color-primary-form-actions-background-focus: rgb(49, 45, 42);--color-primary-form-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-form-actions-border: transparent;--color-primary-form-actions-text: #fff;--color-primary-form-actions-text-focus: #fff;--color-primary-form-actions-text-hover: #fff;--color-danger-form-actions-background: rgb(214, 59, 37);--color-danger-form-actions-background-focus: rgb(214, 59, 37);--color-danger-form-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-form-actions-border: transparent;--color-danger-form-actions-text: #fff;--color-danger-form-actions-text-focus: #fff;--color-danger-form-actions-text-hover: #fff;--bubble-max-width: 680px;--width-full-screen: 375px;--widget-max-height: calc(100vh - 60px) ;--position-top: 0;--position-left: 0;--position-right: 20px;--position-bottom: 20px;--font-family: "Oracle Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;--color-search-bar-separator: rgba(22, 21, 19, .12);position:fixed;box-sizing:border-box;text-transform:none;z-index:10000;color:var(--color-text);font-size:13.75px;line-height:16px;font-family:var(--font-family);-webkit-font-smoothing:antialiased}.wrapper.classic{--color-branding: #025e7e;--color-branding-light: #0e7295;--color-branding-dark: #06485f;--color-launch-icon-background: #025e7e;--color-text: #161513;--color-text-light: #3a3631;--color-header-background: #025e7e;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-text: #fff;--color-conversation-background: #fff;--color-timestamp: #5b5652;--color-border: #1615131F;--color-typing-indicator: #227e9e;--color-bot-message-background: #e5f1ff;--color-user-message-background: #ececec;--color-card-background: #e5f1ff;--color-card-nav-button: #4190ac;--color-card-nav-button-focus: #5fa2ba;--color-card-nav-button-hover: #0e7295;--color-actions-background: transparent;--color-actions-background-focus: transparent;--color-actions-background-hover: rgba(14, 114, 149, .04);--color-actions-border: rgb(14, 114, 149);--color-actions-text: rgb(14, 114, 149);--color-actions-text-focus: rgb(14, 114, 149);--color-actions-text-hover: rgb(14, 114, 149);--color-global-actions-background: #fff;--color-global-actions-background-focus: #fff;--color-global-actions-background-hover: rgba(14, 114, 149, .04);--color-global-actions-border: rgb(14, 114, 149);--color-global-actions-text: rgb(14, 114, 149);--color-global-actions-text-focus: rgb(14, 114, 149);--color-global-actions-text-hover: rgb(14, 114, 149);--color-primary-actions-background: rgb(14, 114, 149);--color-primary-actions-background-focus: rgb(14, 114, 149);--color-primary-actions-background-hover: rgba(14, 114, 149, .95);--color-links: #0e7295;--color-user-links: #0e7295;--color-agent-name: #5b5652;--color-attachment-footer: #e5f1ff;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-fill-hover: #025e7e;--color-visualizer: #025e7e;--color-primary-form-actions-background: rgb(14, 114, 149);--color-primary-form-actions-background-focus: rgb(14, 114, 149);--color-primary-form-actions-background-hover: rgba(14, 114, 149, .95);--color-notification-badge-background: #9a0007;--color-notification-badge-text: #fff;--color-popup-button-text: #025e7e}.wrapper.redwood-dark{--color-branding: #c0533f;--color-branding-light: #ca4d3c;--color-branding-dark: #9b382a;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #fcfbfa;--color-header-background: #201e1c;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-button-background-hover: rgba(255, 255, 255, .04);--color-header-text: #fff;--color-conversation-background: #3a3631;--color-timestamp: #fcfbfa;--color-border: #FCFBFA1F;--color-typing-indicator: #fff;--color-bot-message-background: #655f5c;--color-bot-text: #fff;--color-user-message-background: #fff;--color-user-text: #161513;--color-card-background: #655f5c;--color-card-nav-button: #d5b364;--color-card-nav-button-focus: #f7e0a1;--color-card-nav-button-hover: #b39554;--color-actions-background: #655f5c;--color-actions-background-focus: #655f5c;--color-actions-background-hover: rgba(22, 21, 19, .3);--color-actions-border: #fff;--color-actions-text: #fff;--color-actions-text-focus: #fff;--color-actions-text-hover: #fff;--color-global-actions-background: #3a3631;--color-global-actions-background-focus: #3a3631;--color-global-actions-background-hover: rgba(22, 21, 19, .3);--color-global-actions-border: #fff;--color-global-actions-text: #fff;--color-global-actions-text-focus: #fff;--color-global-actions-text-hover: #fff;--color-primary-actions-background: #fff;--color-primary-actions-background-focus: #fff;--color-primary-actions-background-hover: #fff linear-gradient(rgb(251, 249, 248), rgb(251, 249, 248));--color-primary-actions-text: #161513;--color-primary-actions-text-focus: #161513;--color-primary-actions-text-hover: #161513;--color-danger-actions-background-focus: rgb(214, 59, 37);--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgba(255, 255, 255, .08), rgba(255, 255, 255, .08));--color-links: #f7e0a1;--color-user-links: #c0533f;--color-agent-name: #fcfbfa;--color-footer-form-label: #fcfbfa;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-input-background: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-button-text: #201e1c}.wrapper:not(.embedded):not(.contextual-widget):not(.search-bar-widget-wrapper):not(.popup-content-wrapper){bottom:var(--position-bottom);left:var(--position-left);top:var(--position-top);right:var(--position-right)}.wrapper *{box-sizing:border-box}.wrapper .widget-button{position:relative;max-width:100%;padding:9px 16px;margin:0 0 8px;min-height:36px;line-height:16px;font-size:13.75px;font-weight:600;font-family:inherit;border-radius:4px;border-width:thin;border-style:solid;cursor:pointer;overflow:hidden;flex-shrink:0;word-break:normal;overflow-wrap:anywhere}.wrapper .widget-button:disabled{opacity:.5;cursor:not-allowed}.wrapper .widget-button.icon{width:36px;height:36px;padding:8px;margin:0;margin-inline-start:4px;border:none;border-radius:4px;color:var(--color-text);background-color:transparent;justify-content:center}.wrapper .widget-button.icon.with-label{width:auto;max-width:200px}.wrapper .widget-button.icon.with-label svg,.wrapper .widget-button.icon.with-label img{margin-right:4px}.wrapper .widget-button.icon.label-only{width:auto;max-width:200px}.wrapper .widget-button.icon.label-only svg,.wrapper .widget-button.icon.label-only img{display:none}.wrapper .widget-button:not(:disabled):focus{outline:1px dotted var(--color-actions-outline-focus);outline-offset:1px}.wrapper .widget-button svg,.wrapper .widget-button img{width:20px;height:20px;flex-shrink:0}.wrapper .button{position:absolute;right:0;bottom:0;height:48px;width:48px;max-width:unset;padding:0;margin:0;border:none;background-position:center center;background-repeat:no-repeat;cursor:pointer;justify-content:center;align-items:center;z-index:10000;color:var(--color-text);background-color:var(--color-launch-icon-background);border-radius:0;overflow:visible}.wrapper .button svg,.wrapper .button img{height:unset;width:unset;max-width:100%;max-height:100%}.wrapper .button:not(:disabled):hover,.wrapper .button:not(:disabled):focus,.wrapper .button:not(:disabled):active{background-color:var(--color-launch-icon-background)}@media screen and (min-width: 769px){.wrapper .button{height:64px;width:64px}}.wrapper .dialog-wrapper{position:absolute;top:0;left:0;right:0;width:100%;height:100%}.wrapper .dialog-wrapper .dialog-backdrop{position:absolute;background:#0003;height:100%;width:100%;z-index:5}.wrapper .dialog-wrapper .dialog{box-shadow:#00000029 0 4px 8px;border-radius:6px;position:relative;max-width:450px;min-height:48px;max-height:60%;top:30%;left:0;right:0;padding:8px 16px;margin:8px auto;width:calc(100% - 16px);z-index:5;animation:dialog-in .2s cubic-bezier(.22,.45,.42,.92) both;background-color:var(--color-popup-background);overflow-y:auto}.wrapper .dialog-wrapper .dialog.dialog-out{animation:dialog-out .2s cubic-bezier(.5,.07,.68,.48) both}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper{margin:16px 0}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon{width:20px;height:20px;max-width:20px;max-height:20px;margin-inline-end:8px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon img,.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon svg{max-width:20px;max-height:20px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-content{line-height:1.4;margin-inline-end:28px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-content .dialog-title{font-family:var(--font-family);font-size:18px;font-weight:700;color:var(--color-popup-text);word-break:normal;overflow-wrap:anywhere}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-content .dialog-description{color:var(--color-popup-text);opacity:.6;font-size:13px;margin-top:8px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-label{color:var(--color-popup-text);font-size:large}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input{font-size:medium;min-height:36px;width:100%;margin:0 0 10px;padding:10px;color:var(--color-form-input-text);border:1px solid var(--color-form-input-border);border-radius:4px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid transparent}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input:invalid{border:1px solid var(--color-form-error)}.wrapper .dialog-wrapper .dialog .dialog-close-button{margin-inline-start:0}.wrapper .dialog-wrapper .dialog .action-wrapper{width:100%;margin:16px 0 6px;gap:16px}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action{background-color:var(--color-popup-button-background);border-color:var(--color-popup-button-text);color:var(--color-popup-button-text);border-style:solid;margin:0;height:34px;justify-content:center;flex:1 0 auto}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action:hover{background-color:var(--color-footer-button-background-hover)}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action:last-child{margin:0}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action.filled{background-color:var(--color-popup-button-text);color:var(--color-popup-button-background)}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action.filled:hover{opacity:.9}.wrapper .dialog-wrapper.modeless{top:56px;height:auto}.wrapper .dialog-wrapper.modeless .dialog{gap:16px;top:0}.wrapper .dialog-wrapper.modeless .dialog .dialog-icon-content-wrapper,.wrapper .dialog-wrapper.modeless .dialog .dialog-icon-content-wrapper .dialog-content{margin:0}.wrapper .dialog-wrapper.modeless .dialog .dialog-icon-content-wrapper .dialog-content .dialog-title{font-size:16px;line-height:1.3333;font-weight:400}.wrapper .header{height:56px;padding:0 8px;background-color:var(--color-header-background);color:var(--color-header-text)}.wrapper .header .logo{flex:0 0 auto;max-width:100px;height:36px;max-height:36px;overflow:hidden;padding:0}.wrapper .header .header-info-wrapper{flex-direction:column;flex-wrap:nowrap;width:100%;min-width:0;padding:0;margin:0 8px}.wrapper .header .header-info-wrapper .title{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:1.125em;font-weight:700}.wrapper .header .header-info-wrapper .subtitle{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .header .header-info-wrapper .connection-status{font-weight:700;font-size:10px;justify-content:center;padding:0;margin:0;text-transform:uppercase;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.wrapper .header .header-gap{flex:auto}.wrapper .header-actions{flex:1 0 auto;justify-content:flex-end;flex-direction:inherit}.wrapper .header-button svg>path{fill:var(--color-header-button-fill)}.wrapper .header-button:not(:disabled):hover{background-color:var(--color-header-button-background-hover)}.wrapper .header-button:not(:disabled):hover svg>path{fill:var(--color-header-button-fill-hover)}.wrapper .footer{max-width:100%;padding:0;position:relative;background-color:var(--color-footer-background);z-index:3;box-shadow:0 -1px 4px #0000001a;border-top:1px solid rgba(22,21,19,.1)}.wrapper .footer .footer-mode-keyboard{margin:5px;background-color:var(--color-input-background);color:var(--color-input-text);border:1px solid var(--color-input-border);border-radius:6px}.wrapper .footer .footer-mode-voice{height:60px;padding:14px 0;background:var(--color-visualizer-container-background);justify-content:center}.wrapper .footer .footer-mode-voice .footer-visualizer-wrapper{max-width:296px;height:32px}.wrapper .footer .footer-logo{flex:0 0 auto;max-width:100px;max-height:36px;overflow:hidden;padding:0}.wrapper .footer.mode-keyboard .button-switch-kbd,.wrapper .footer.mode-keyboard .footer-mode-voice,.wrapper .footer.mode-voice .button-switch-voice{display:none}.wrapper .user-input{box-sizing:border-box;flex:1 1 auto;min-height:44px;min-width:0;padding:14px 4px 14px 10px;margin:0;font-size:16px;font-family:inherit;text-align:start;line-height:16px;outline:1px solid transparent;resize:none;border:none;background-color:transparent;color:var(--color-input-text)}.wrapper .user-input:focus,.wrapper .user-input:focus-visible{outline:1px solid rgba(22,21,19,0)}.wrapper .footer-actions{margin-inline-end:2px}.wrapper .footer-button.button-send{background-color:var(--color-footer-button-fill);border-radius:50%}.wrapper .footer-button.button-send svg>path{fill:var(--color-input-background)}.wrapper .footer-button.button-send:not(:disabled):hover{background-color:var(--color-footer-button-fill-hover)}.wrapper .footer-button.button-send:not(:disabled):hover svg>path{fill:var(--color-input-background)}.wrapper .footer-button svg>path{fill:var(--color-footer-button-fill)}.wrapper .footer-button:not(:disabled):hover{background-color:var(--color-footer-button-background-hover)}.wrapper .footer-button:not(:disabled):hover svg>path{fill:var(--color-footer-button-fill-hover)}.wrapper .autocomplete-items{position:absolute;bottom:56px;width:100%;max-height:280px;overflow-y:auto;background-color:var(--color-input-background);box-shadow:0 -1px 4px #0000001a;margin:0 -5px;padding:0}.wrapper .autocomplete-items .autocomplete-item{align-items:center;display:flex;margin:0;min-height:40px;padding:8px 16px;cursor:pointer}.wrapper .autocomplete-items .autocomplete-item:hover,.wrapper .autocomplete-items .autocomplete-item.autocomplete-active{background-color:var(--color-card-nav-button-hover)}.wrapper .autocomplete-items .autocomplete-item:first-of-type{margin-top:8px}.wrapper .autocomplete-items .autocomplete-item:last-of-type{margin-bottom:8px}.wrapper .autocomplete-items .autocomplete-item .strong{font-weight:700}.wrapper .autocomplete-items .autocomplete-item::marker{content:none}.wrapper .conversation{display:flex;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-x:hidden;overflow-y:auto;position:relative;scroll-behavior:smooth;width:100%;padding:16px}.wrapper .conversation .conversation-pane .message-date,.wrapper .conversation .conversation-pane .relative-timestamp{font-size:12px;margin:8px 0;color:var(--color-timestamp);text-align:start}.wrapper .conversation .conversation-pane .message-date.right,.wrapper .conversation .conversation-pane .relative-timestamp.right{text-align:end}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal{margin-inline-start:-52px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions{margin-inline-start:52px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards{padding-inline-start:52px}.wrapper .conversation .conversation-pane.bot-icon .relative-timestamp.left{margin-inline-start:36px}.wrapper .conversation .conversation-pane.user-icon .relative-timestamp.right{margin-inline-end:36px}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 36px))}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 68px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 72px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 104px))}.wrapper .conversation .cancel-response-button{background-color:var(--color-branding);border-radius:10000px;bottom:0;box-shadow:0 0 4px #00000040;height:36px;inset-inline-start:100%;position:sticky;width:36px;z-index:100;animation:cancel-button-entrance .25s ease-in forwards;transition:all .25s ease-in-out}.wrapper [dir=rtl] .conversation .cancel-response-button{inset-inline-start:calc(100% - 36px)}.wrapper .conversation .cancel-response-button .cancel-response-button-icon path{fill:#fff}.wrapper .conversation .cancel-response-button:hover{background-color:var(--color-branding-light);box-shadow:0 0 4px #00000040}.wrapper .conversation .cancel-response-button:active{background-color:var(--color-branding-dark);box-shadow:0 0 4px #00000040}.wrapper .conversation .cancel-response-button:focus{outline:none;box-shadow:0 0 4px #00000040}.wrapper .conversation .cancel-response-button:focus:not(:focus-visible){box-shadow:0 0 4px #00000040}.wrapper .conversation .cancel-response-button.hide{animation:cancel-button-exit .2s ease-out forwards}.wrapper .timestamp-container{display:inline-block;position:relative;text-align:center;width:100%}.wrapper .timestamp-container .timestamp-header{background-color:var(--color-conversation-background);color:var(--color-timestamp);display:inline-block;font-size:12px;font-weight:700;padding:0 8px;margin:16px 0;position:relative;text-align:center;text-transform:capitalize;z-index:1}.wrapper .timestamp-container .conversation-separator{border:none;border-top:1px solid var(--color-border);position:absolute;margin:0;top:50%;width:100%}.wrapper .hr{margin:24px 0;font-size:12px;color:var(--color-horizontal-rule-background)}.wrapper .hr:before{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-end:10px}.wrapper .hr:after{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-start:10px}.wrapper .card-actions,.wrapper .form-actions,.wrapper .message-actions,.wrapper .message-global-actions{margin-top:6px;display:flex;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap}.wrapper .card-actions.form-message-actions-col,.wrapper .form-actions.form-message-actions-col,.wrapper .message-actions.form-message-actions-col,.wrapper .message-global-actions.form-message-actions-col{flex-basis:100%;max-width:100%}.wrapper .card-actions:not(.col) .action-postback,.wrapper .form-actions:not(.col) .action-postback,.wrapper .message-actions:not(.col) .action-postback,.wrapper .message-global-actions:not(.col) .action-postback{margin-inline-end:8px}.wrapper .card-actions:not(.col) .action-postback:last-child,.wrapper .form-actions:not(.col) .action-postback:last-child,.wrapper .message-actions:not(.col) .action-postback:last-child,.wrapper .message-global-actions:not(.col) .action-postback:last-child{margin-inline-end:0}.wrapper .action-postback,.wrapper .form-message-item .form-message-value .action-postback,.wrapper .message-bubble-tabular-message .table-message-item .action-postback{background:var(--color-actions-background);border-color:var(--color-actions-border);color:var(--color-actions-text);display:flex;flex-direction:row;gap:10px;text-align:start}.wrapper .action-postback:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--color-actions-text-hover);background-color:var(--color-actions-background-hover)}.wrapper .action-postback:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--color-actions-text-hover)}.wrapper .action-postback:not(:disabled):focus,.wrapper .action-postback:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background-color:var(--color-actions-background-focus);color:var(--color-actions-text-focus)}.wrapper .action-postback:not(:disabled):focus svg>path,.wrapper .action-postback:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--color-actions-text-focus)}.wrapper .action-postback.primary,.wrapper .form-message-item .form-message-value .action-postback.primary,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary{background:var(--color-primary-actions-background);color:var(--color-primary-actions-text);border:var(--color-primary-actions-border)}.wrapper .action-postback.primary:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover{background:var(--color-primary-actions-background-hover);color:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):focus,.wrapper .action-postback.primary:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active{background:var(--color-primary-actions-background-focus);color:var(--color-primary-actions-text-focus)}.wrapper .action-postback.primary:not(:disabled):focus svg>path,.wrapper .action-postback.primary:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-actions-text-focus)}.wrapper .action-postback.danger,.wrapper .form-message-item .form-message-value .action-postback.danger,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger{background:var(--color-danger-actions-background);color:var(--color-danger-actions-text);border:var(--color-danger-actions-border)}.wrapper .action-postback.danger:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover{background:var(--color-danger-actions-background-hover);color:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):focus,.wrapper .action-postback.danger:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active{background:var(--color-danger-actions-background-focus);color:var(--color-danger-actions-text-focus)}.wrapper .action-postback.danger:not(:disabled):focus svg>path,.wrapper .action-postback.danger:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-actions-text-focus)}.wrapper .action-postback.display-link,.wrapper .form-message-item .form-message-value .action-postback.display-link,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.display-link{outline:1px solid transparent;border:none;min-height:unset;background:transparent;padding:0}.wrapper .action-postback.display-link:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback.display-link:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.display-link:not(:disabled):hover{background:transparent;text-decoration:underline}.wrapper .action-postback.c2k-action,.wrapper .form-message-item .form-message-value .action-postback.c2k-action,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.c2k-action{border-radius:0;color:#227e9e;border:none;padding:0;min-height:unset;font-size:16px;background:transparent;margin-bottom:0}.wrapper .action-postback.c2k-action:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback.c2k-action:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.c2k-action:not(:disabled):hover{color:#227e9e}.wrapper .action-postback.c2k-action:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback.c2k-action:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.c2k-action:not(:disabled):hover svg>path{fill:#227e9e}.wrapper .action-postback .icon-enter,.wrapper .form-message-item .form-message-value .action-postback .icon-enter,.wrapper .message-bubble-tabular-message .table-message-item .action-postback .icon-enter{animation:icon-enter .2s ease-in}.wrapper .action-postback .icon-exit,.wrapper .form-message-item .form-message-value .action-postback .icon-exit,.wrapper .message-bubble-tabular-message .table-message-item .action-postback .icon-exit{animation:icon-exit .2s ease-out}.wrapper .message-global-actions{margin-top:8px}.wrapper .message-global-actions.stars{display:block}.wrapper .message-global-actions .widget-button{background:var(--color-global-actions-background);color:var(--color-global-actions-text);border-color:var(--color-global-actions-border)}.wrapper .message-global-actions .widget-button:not(:disabled):hover{background-color:var(--color-global-actions-background-hover);color:var(--color-global-actions-text-hover)}.wrapper .message-global-actions .widget-button:not(:disabled):hover svg>path{fill:var(--color-global-actions-text-hover)}.wrapper .message-global-actions .widget-button:not(:disabled):focus,.wrapper .message-global-actions .widget-button:not(:disabled):active{background-color:var(--color-global-actions-background-focus);color:var(--color-global-actions-text-focus)}.wrapper .message-global-actions .widget-button:not(:disabled):focus svg>path,.wrapper .message-global-actions .widget-button:not(:disabled):active svg>path{fill:var(--color-global-actions-text-focus)}.wrapper .message-bubble{position:relative;display:flex;flex-direction:column;align-items:flex-start;margin:2px 0 0;padding:6px 16px;color:var(--color-bot-text);background:var(--color-bot-message-background);min-height:28px;line-height:16px;overflow:hidden;max-width:100%;border-radius:2px 10px 10px 2px;word-break:normal;overflow-wrap:anywhere}.wrapper .message-bubble>*{width:100%}.wrapper .message-bubble.before-card{border-radius:2px 10px 10px}.wrapper .message-bubble .video-wrapper{max-width:100%}.wrapper .message-bubble.error{background-color:var(--color-error-message-background);color:var(--color-error-text);border:1px dashed var(--color-error-border)}.wrapper .message-bubble.error .message-icon path{fill:var(--color-error-title)}.wrapper .message-bubble.error .message-title{color:var(--color-error-title)}.wrapper .message-bubble span.highlight{background-color:#8fbfd066}.wrapper .message-bubble .message-with-icon{display:flex;align-items:flex-start;justify-content:space-between}.wrapper .message-bubble .message-with-icon .message-icon{width:24px;height:24px;align-items:center;margin-inline-end:16px}.wrapper .message-bubble .message-with-icon .message-text{word-break:normal;overflow-wrap:anywhere}.wrapper .message-bubble.message-header{margin-bottom:2px}.wrapper .message-bubble.message-footer{margin-top:2px}.wrapper .message-bubble .message-user-postback>img{max-height:32px;max-width:32px}.wrapper .message-bubble .message-bubble{border:0;margin-top:8px;padding:0}.wrapper .message-bubble .message-bubble:not(:first-child){margin-top:8px}.wrapper .messages-wrapper{max-width:90%;align-items:flex-start}.wrapper .messages-wrapper .agent-name{position:relative;bottom:3px;max-width:111.1111111111%;height:16px;font-size:12px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--color-agent-name)}.wrapper .messages-wrapper .screen-reader-only{height:1px;left:-20000px;overflow:hidden;position:absolute;top:auto;width:1px}.wrapper .messages-wrapper .message-list{width:100%;align-items:flex-start}.wrapper .message{width:100%;white-space:pre-wrap}.wrapper .message .embeddedAction{border:1px solid rgba(122,115,110,.2509803922);border-radius:4px;cursor:pointer;font-size:12px;font-weight:600;height:20px;line-height:16px;padding:2px 6px}.wrapper .message .embeddedAction:hover{text-decoration:underline}.wrapper .message .embeddedAction.display-link{border:none;color:var(--color-links);padding:0}.wrapper .message .embeddedAction.display-link:focus-visible{text-decoration:underline}.wrapper .message .embeddedAction.display-icon{padding:0;border:none}.wrapper .message .action-wrapper{display:flex;flex-direction:column;position:relative}.wrapper .message .action-wrapper .widget-button:not(:disabled):hover+div>.tooltip{display:block;position:absolute;background-color:var(--color-bot-message-background);max-width:296px;border-radius:2px;box-shadow:0 1px 4px #0000001f;padding:8px;z-index:3;font-size:13px;font-weight:400;inset-inline-start:-16px;line-height:20px;margin-top:-4px;word-break:normal;overflow-wrap:anywhere}.wrapper .message a{color:var(--color-links)}.wrapper .message b{font-weight:700}.wrapper .message .widget-button.anchor-btn{padding:0}.wrapper .message .widget-button.anchor-btn a{display:block;text-decoration:inherit;color:inherit;padding:10px 20px}.wrapper .message .widget-button:last-child{margin-bottom:0}.wrapper .message .message-wrapper{display:flex;align-items:flex-start;flex-direction:column;width:100%;max-width:100%}.wrapper .message:first-child .message-bubble:not(.message-footer){margin-top:0}.wrapper .message:first-child .message-bubble:not(.message-footer) .message-bubble{margin-top:8px}.wrapper .message:first-child .card-message-content:first-child .card-message-cards{margin-top:0}.wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px}.wrapper .message:last-child .message-bubble:last-child .message-bubble{border-radius:0}.wrapper .message:last-child .message-bubble:last-child.edit-form-message .form-message-header{border-radius:1px 9px 0 0}.wrapper .message:last-child .message-bubble:last-child.edit-form-message .form-message-item{border-radius:1px 9px 9px}.wrapper .message:last-child .card-message-content:last-child .card-message-cards{margin-bottom:-8px}.wrapper .message.card-message-horizontal{margin-inline-start:-16px;width:calc(var(--width-full-screen) - 12px)}.wrapper .message.card-message-horizontal .message-header,.wrapper .message.card-message-horizontal .message-footer,.wrapper .message.card-message-horizontal .message-global-actions{margin-inline-start:16px;max-width:calc(.9*(100% - 28px))}.wrapper .message.card-message-horizontal .message-header{border-radius:2px 10px 10px}.wrapper .message.card-message-horizontal .card-message-cards{flex-direction:row;overflow-x:auto;padding-inline-start:16px}.wrapper .message.card-message-horizontal .card{border:1px solid rgba(22,21,19,.12);box-shadow:0 1px 4px #0000001f;margin-inline-end:8px}.wrapper .message.card-message-horizontal .next-wrapper,.wrapper .message.card-message-horizontal .prev-wrapper{position:absolute;height:100%;top:0;width:52px;z-index:1}.wrapper .message.card-message-horizontal .next-wrapper{inset-inline-end:0;background:linear-gradient(90deg,rgba(255,255,255,0),var(--color-conversation-background) 60%)}.wrapper .message.card-message-horizontal .prev-wrapper{inset-inline-start:0;background:linear-gradient(90deg,var(--color-conversation-background) 40%,rgba(255,255,255,0))}.wrapper [dir=rtl] .message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg,var(--color-conversation-background) 40%,rgba(255,255,255,0))}.wrapper [dir=rtl] .message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg,rgba(255,255,255,0),var(--color-conversation-background) 60%)}.wrapper [dir=rtl] .message.card-message-horizontal .next,.wrapper [dir=rtl] .message.card-message-horizontal .previous{transform:rotate(180deg)}.wrapper .message.card-message-horizontal .next,.wrapper .message.card-message-horizontal .previous{position:absolute;z-index:10;width:36px;height:36px;left:8px;padding:0;overflow:hidden;background-color:var(--color-card-nav-button);border:none;box-shadow:0 2px 4px #0000001a;top:calc(50% - 18px);justify-content:center}.wrapper .message.card-message-horizontal .next:hover,.wrapper .message.card-message-horizontal .previous:hover{background-color:var(--color-card-nav-button-hover)}.wrapper .message.card-message-horizontal .next:focus,.wrapper .message.card-message-horizontal .next:active,.wrapper .message.card-message-horizontal .previous:focus,.wrapper .message.card-message-horizontal .previous:active{background-color:var(--color-card-nav-button-focus)}.wrapper .message-block{justify-content:flex-start;align-items:flex-start;margin-bottom:8px}.wrapper .message-block.right{flex-direction:row-reverse}.wrapper .message-block.right .icon-wrapper{margin:unset;margin-inline-start:8px}.wrapper .message-block.right .messages-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message a{color:var(--color-user-links)}.wrapper .message-block.right .messages-wrapper .message .message-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:10px 2px 2px 10px}.wrapper .message-block.right .messages-wrapper .message .message-bubble:not(.error){color:var(--color-user-text);background:var(--color-user-message-background)}.wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}.wrapper .message-block.right .message-date{text-align:right}.wrapper .icon-wrapper{margin-inline-end:8px;width:28px;height:28px;min-height:28px;min-width:28px;border-radius:4px;overflow:hidden;z-index:1;display:flex;align-items:center;justify-content:center}.wrapper .icon-wrapper.agent-avatar{background:var(--color-agent-avatar-background);margin-top:16px}.wrapper .icon-wrapper .message-icon{height:100%;max-height:100%;max-width:100%;width:100%;color:var(--color-timestamp);overflow:hidden;text-overflow:ellipsis}.wrapper .icon-wrapper .agent-icon{position:relative;min-width:20px;min-height:20px;font-weight:700;font-size:16px;line-height:20px;text-align:center;color:var(--color-agent-initials)}.wrapper .attachment{width:100%}.wrapper .attachment .attachment-placeholder{background-color:var(--color-attachment-placeholder);max-width:calc(100% + 32px);min-width:228px;min-height:88px;max-height:230px;margin:-6px -16px 0;justify-content:center;overflow:hidden}.wrapper .attachment .attachment-placeholder>*{max-width:100%}.wrapper .attachment .attachment-placeholder .attachment-icon{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon svg{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon img{width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio{height:50px;width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio::-webkit-media-controls-enclosure{background-color:transparent}.wrapper .attachment .attachment-placeholder .attachment-video{aspect-ratio:1}.wrapper .attachment .attachment-footer{background-color:var(--color-attachment-footer);color:var(--color-attachment-text);margin:0 -16px -6px;height:50px;padding:16px 4px 16px 16px}.wrapper .attachment .attachment-footer.with-actions{border-bottom:thin solid rgba(22,21,19,.1);margin-bottom:6px}.wrapper .attachment .attachment-footer .attachment-title{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .card{width:252px;border-radius:6px;padding:12px 16px;margin-block-end:8px;justify-content:flex-start;flex-shrink:0;color:var(--color-bot-text);background:var(--color-card-background);overflow:hidden}.wrapper .card .card-content{margin-bottom:12px}.wrapper .card .card-image{display:block;width:calc(100% + 32px);margin:-12px -16px 10px;min-height:88px;background-color:var(--color-attachment-placeholder)}.wrapper .card .card-title{margin-bottom:4px;font-weight:700;word-break:normal;overflow-wrap:anywhere}.wrapper .card .card-description{color:var(--color-text-light)}.wrapper .card-message-content{width:100%;position:relative}.wrapper .card-message-content .card-message-cards{width:100%;align-items:stretch;display:flex;scroll-behavior:smooth;overflow-x:visible;flex-direction:column;margin:8px 0 0;scrollbar-width:none}.wrapper .card-message-content .card-message-cards::-webkit-scrollbar{display:none}.wrapper .message-bubble-tabular-message,.wrapper .message-bubble-form-message{width:111%;max-width:unset;border-radius:0 8px 8px;padding:0;background-color:var(--color-table-background);color:var(--color-table-text);border:1px solid var(--color-table-header-background);overflow:hidden}.wrapper .message-bubble-tabular-message .popupContent,.wrapper .message-bubble-form-message .popupContent{max-width:280px;position:absolute;height:auto;border-radius:8px;z-index:3;box-shadow:0 4px 4px #0000001a;border:1px solid rgba(22,21,19,.1215686275);background:var(--color-bot-message-background);display:none;inset-inline-start:-4px}.wrapper .message-bubble-tabular-message .results-page-status,.wrapper .message-bubble-form-message .results-page-status{align-items:center;background-color:var(--color-table-background);color:var(--color-table-text);display:flex;flex-direction:row;font-size:13.75px;justify-content:flex-end;line-height:16px;padding:12px 16px;border-top:1px solid var(--color-table-separator)}.wrapper .message-bubble-tabular-message~.message-footer,.wrapper .message-bubble-form-message~.message-footer{margin-top:8px}.wrapper .message-bubble-tabular-message .message-actions .action-postback,.wrapper .message-bubble-tabular-message .table-message-item .action-postback{background:var(--color-table-actions-background);color:var(--color-table-actions-text);border-color:var(--color-table-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--color-table-actions-text-hover);background:var(--color-table-actions-background-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--color-table-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background:var(--color-table-actions-background-focus);color:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions,.wrapper .message-bubble-form-message .message-actions{border-top:1px solid var(--color-table-separator);padding:12px 16px;margin-top:auto}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary,.wrapper .message-bubble-form-message .message-actions .action-postback.primary,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary,.wrapper .message-bubble-form-message .form-actions .action-postback.primary,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary{background:var(--color-primary-form-actions-background);color:var(--color-primary-form-actions-text);border:var(--color-primary-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover{background:var(--color-primary-form-actions-background-hover);color:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active{background:var(--color-primary-form-actions-background-focus);color:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger,.wrapper .message-bubble-form-message .message-actions .action-postback.danger,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger,.wrapper .message-bubble-form-message .form-actions .action-postback.danger,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger{background:var(--color-danger-form-actions-background);color:var(--color-danger-form-actions-text);border:var(--color-danger-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover{background:var(--color-danger-form-actions-background-hover);color:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active{background:var(--color-danger-form-actions-background-focus);color:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-form-message{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message.edit-form-message{overflow:visible}.wrapper .message-bubble-form-message.edit-form-message .message-actions{border-top:none;padding-top:0}.wrapper .message-bubble-form-message.edit-form-message .form-message-header{border-radius:0 7px 0 0}.wrapper .message-bubble-form-message.edit-form-message .form-message-item{border-radius:0 7px 7px}.wrapper .message-bubble-form-message.edit-form-message>.form-message>.form-hint-wrapper{padding-inline:16px}.wrapper .message-bubble-form-message .results-page-status{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message .message-actions .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .form-message-field,.wrapper .table-message-heading,.wrapper .table-message-item{word-break:normal;overflow-wrap:anywhere}.wrapper .form-message-field:hover .popupContent,.wrapper .table-message-heading:hover .popupContent,.wrapper .table-message-item:hover .popupContent{display:flex}.wrapper .table-message-wrapper{overflow:auto}.wrapper .table-message-wrapper .table-message-table-title-wrapper{background-color:var(--color-table-header-background);border-bottom:1px solid var(--color-table-title-separator);padding:8px}.wrapper .table-message-wrapper .table-message-table-title-wrapper .table-message-table-title{color:var(--color-table-header-text);font-size:14px;font-weight:600;line-height:16px;margin:4px 8px}.wrapper .table-message-wrapper .table-message{min-width:100%;max-width:200%;border-collapse:collapse}.wrapper .table-message-wrapper .table-message .table-message-headings{align-items:center;color:var(--color-table-header-text);background-color:var(--color-table-header-background);display:flex}.wrapper .table-message-wrapper .table-message .table-message-headings .table-message-heading{font-size:12px;font-weight:600;line-height:16px;padding:16px;min-width:120px}.wrapper .table-message-wrapper .table-message .table-message-row{border-top:1px solid var(--color-table-separator);display:flex;align-items:center}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item{color:var(--color-table-text);font-size:16px;line-height:20px;min-width:120px;padding:10px 16px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-lg{font-size:18px;line-height:23.5px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-md{font-size:16px;line-height:21px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-sm{font-size:13.8px;line-height:18px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-bold{font-weight:600}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-md{font-weight:400}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-light{font-weight:300}.wrapper .form-message-header{align-items:center;background-color:var(--color-form-header-background);color:var(--color-form-header-text);display:flex;font-weight:700;line-height:20px;padding:16px;text-align:start}.wrapper .form-hint-wrapper{align-items:center;display:flex;flex:1;margin-top:2px;min-height:20px}.wrapper .disabled.disabled .form-hint-wrapper>*{display:none}.wrapper .form-hint-wrapper .form-hint-required{color:var(--color-form-required-tip);font-size:12px}.wrapper .form-hint-wrapper .field-error{display:flex}.wrapper .form-hint-wrapper .field-error.form-error{background-color:var(--color-error-message-background);border:thin dashed var(--color-error-border);border-radius:4px;margin:10px 0;padding:8px;width:100%}.wrapper .form-hint-wrapper .field-error.form-error.disabled{display:none}.wrapper .form-hint-wrapper .field-error.form-error .field-error-icon{top:0}.wrapper .form-hint-wrapper .field-error.form-error .field-error-text{color:var(--color-error-title);font-size:14px;font-weight:600;margin-inline-start:8px}.wrapper .form-hint-wrapper .field-error .field-error-icon{flex-shrink:0;fill:var(--color-form-error);height:16px;width:16px}.wrapper .form-hint-wrapper .field-error .field-error-text{color:var(--color-form-error-text);font-size:12px;margin-inline-start:4px}.wrapper .form-hint-wrapper-end{justify-content:flex-end}.wrapper .form-message-item{color:var(--color-form-text);background-color:var(--color-form-background);display:flex;flex-flow:row wrap;justify-content:space-between;padding:16px}.wrapper .form-message-item .form-row{align-items:stretch;display:flex;flex:1 0 100%;gap:4px;max-width:100%;margin:2px}.wrapper .form-message-item .form-row.separator{border-top:1px solid var(--color-table-separator);margin-top:8px}.wrapper .form-message-item .form-row .form-row-column{display:flex;flex-flow:column wrap;flex:0 1 auto;min-width:0}.wrapper .form-message-item .form-row .form-row-column.stretch{flex-grow:1}.wrapper .form-message-item .form-row .form-row-column.align-center{justify-content:center}.wrapper .form-message-item .form-row .form-row-column.align-start{justify-content:flex-start}.wrapper .form-message-item .form-row .form-row-column.align-end{justify-content:flex-end}.wrapper .form-message-item .form-row .form-row-column .form-message-field{height:100%}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg{margin-top:28px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md{margin-top:16px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-default{margin-top:8px}.wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox{min-width:100%;inset-inline-start:0;max-width:unset}.wrapper .form-message-item.c2k-reference{justify-content:flex-start}.wrapper .form-message-item.c2k-reference .form-row{color:#161513a6;display:flex;flex-basis:fit-content;flex-flow:row nowrap;line-height:16px;max-width:100%;width:auto}.wrapper .form-message-item.c2k-reference .form-row span.delimiter{margin-inline-end:8px}.wrapper .form-message-item.c2k-reference .form-row .form-message-value .c2k-action{margin:1px 0 0 4px}.wrapper .form-message-item.with-border{border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-key{color:var(--color-form-label);flex:1;line-height:16px;min-height:16px}.wrapper .form-message-item .form-message-key.font-size-lg{font-size:14px;line-height:18px}.wrapper .form-message-item .form-message-key.font-size-md{font-size:12px;line-height:15.5px}.wrapper .form-message-item .form-message-key.font-size-sm{font-size:10px;line-height:13px}.wrapper .form-message-item .form-message-key.font-weight-bold{font-weight:700}.wrapper .form-message-item .form-message-key.font-weight-md{font-weight:600}.wrapper .form-message-item .form-message-key.font-weight-light{font-weight:400}.wrapper .form-message-item .form-message-key.with-margin{cursor:auto;margin-bottom:8px}.wrapper .form-message-item>.form-message-field:not(:last-child){margin-bottom:16px}.wrapper .form-message-item .form-message-field .form-message-value{word-break:normal;overflow-wrap:anywhere}.wrapper .form-message-item .form-message-field .form-message-value.font-size-lg{font-size:18px;line-height:23.5px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-md{font-size:16px;line-height:21px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-sm{font-size:13.8px;line-height:18px}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold{font-weight:600}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-md{font-weight:400}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-light{font-weight:300}.wrapper .form-message-item .form-message-field .form-message-value.with-top-margin{margin-top:2px}.wrapper .form-message-item .form-message-field .form-message-value button.action-postback{margin-inline-start:0}.wrapper .form-message-item .form-message-field.form-message-field-col-1{flex-basis:100%;max-width:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2{flex-basis:calc(50% - 12px);max-width:calc(50% - 12px);height:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-last-child(2){margin-bottom:0}.wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(2n) .popupContent{inset-inline-start:calc(50% - 7px)}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(2n) .listbox{inset-inline:auto 16px}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox{min-width:calc(50% - 28px)}.wrapper .form-message-item .form-message-field.edit-form-message-field{display:flex;flex-direction:column;overflow:visible;width:100%}.wrapper .form-message-item .form-message-field.edit-form-message-field.disabled{cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value{border-radius:4px;background-color:var(--color-form-input-background);color:var(--color-form-input-text);border:1px solid var(--color-form-input-border);font-size:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field .input:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid transparent}.wrapper .form-message-item .form-message-field.edit-form-message-field .input:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled{opacity:.5;cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.input:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.textarea:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled){border-color:var(--color-form-error)}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value{height:44px;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button{cursor:pointer;width:20px;height:20px;margin-inline-end:-8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper{align-items:center;display:flex;height:44px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid transparent}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .input{width:calc(100% - 36px);border:none;box-shadow:none;outline:1px solid transparent;height:40px;margin-inline-start:1px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon{margin-inline-start:0;color:var(--color-form-input-text)}.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value{overflow:auto;padding:11px 12px;resize:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container{display:flex;max-width:max-content}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .label{display:flex;min-height:36px;align-items:center;padding:7.5px 0;border-bottom:1px solid transparent}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input{margin:0 8px 0 4px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container{background-color:var(--color-form-input-background);border-radius:4px;border:1px solid var(--color-form-input-border);display:flex;min-height:44px;flex-direction:row;cursor:text}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid transparent}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options{display:flex;flex-wrap:wrap;padding:0 12px 5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty{padding-top:5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before{content:attr(data-placeholder)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option{line-height:16px;display:flex;align-items:center;cursor:default;border-radius:4px;border:1px solid var(--color-form-input-border);color:var(--color-form-input-text);background-clip:padding-box;font-size:12px;margin-inline-end:6px;margin-top:5px;padding-inline:6px 4px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close{cursor:pointer;height:16px;width:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox{border:1px solid var(--color-table-separator);border-radius:4px;display:flex;flex-direction:column;margin-top:3px;inset-inline-start:16px;max-width:calc(100% - 32px);min-width:calc(100% - 32px);z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box{display:flex;flex-direction:column;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text{color:var(--color-form-label);font-size:13.75px;height:44px;padding:12px 0;border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search{flex-shrink:0;margin:12px;padding-inline-end:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper{position:relative;height:0}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon{position:absolute;inset-inline-end:21px;bottom:23px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list{animation:none;display:block;max-height:400px;margin:1px 0 2px;overflow-y:auto;padding:8px 0;z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li{height:auto;margin:0;padding:12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected{border-top:1px solid rgb(34,126,158);background-color:#e4f1f7}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected:last-child,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected:last-child{box-shadow:inset 0 -1px #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected+li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected+li{border-top:1px solid rgb(34,126,158)}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle{position:relative;width:36px;height:20px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:disabled+.round-slider{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider{background-color:#227e9e;border-color:#227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider:before{inset-inline:auto 1px;transition:height .3s cubic-bezier(0,0,.2,1),width .3s cubic-bezier(0,0,.2,1),right .3s cubic-bezier(0,0,.2,1)}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider{position:absolute;cursor:pointer;background-color:#8b8580;transition:background-color .2s linear .1s,opacity .2s linear .1s,border-color .2s linear .1s;border:1px solid transparent;border-radius:4px;height:20px;width:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before{border-radius:4px;width:16px;height:16px;inset-inline:1px auto;position:absolute;content:"";bottom:1px;background-color:var(--color-form-background);transition:height .3s cubic-bezier(0,0,.2,1),width .3s cubic-bezier(0,0,.2,1),left .3s cubic-bezier(0,0,.2,1)}.wrapper .form-message-item .form-actions,.wrapper .form-message-item .form-message-value{word-break:normal;overflow-wrap:anywhere}.wrapper .form-message-item .form-actions .action-postback,.wrapper .form-message-item .form-message-value .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .tableform-message .table-message-row{cursor:pointer}.wrapper .tableform-message .table-message-row:hover{background-color:var(--color-table-row-background-hover)}.wrapper .tableform-message .table-message-row .widget-button:hover,.wrapper .tableform-message .table-message-row .widget-button:active,.wrapper .tableform-message .table-message-row .widget-button:focus{background-color:unset}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child,.wrapper .tableform-message .table-message-row .table-message-item:last-child{min-width:unset;padding:0}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child .widget-button,.wrapper .tableform-message .table-message-row .table-message-item:last-child .widget-button{margin:0 2px;transition:transform .25s ease-in-out}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child .widget-button.rotate-180,.wrapper .tableform-message .table-message-row .table-message-item:last-child .widget-button.rotate-180{transform:rotate3d(0,0,1,180deg)}.wrapper .tableform-message .form-message-item{margin:0;padding:16px;transition:all .25s ease-in-out;border-bottom:none}.wrapper .tableform-message .form-message-item:last-child{border-top:1px solid var(--color-table-bottom)}.wrapper .footer-form{width:100%}.wrapper .footer-form .message-bubble-form-message{background:transparent;border:none;width:100%}.wrapper .footer-form .message-bubble-form-message .form-message-item{background:transparent;padding:0}.wrapper .footer-form .message-bubble-form-message .form-message-item .form-message-key{color:var(--color-footer-form-label)}.wrapper.embedded .open{width:100%;height:100%}.wrapper.embedded .open .widget{border-radius:0;width:100%;min-width:100%;max-width:100%;height:100%;position:inherit;box-shadow:none;max-height:unset}.wrapper.popup-content-wrapper{background:#16151366;width:100vw;height:100vh;position:fixed;z-index:10000;top:0;left:0;display:flex;align-items:center;justify-content:center}.wrapper.popup-content-wrapper .popup-dialog{overflow:hidden;max-width:600px;border-radius:6px;box-shadow:0 6px 12px #0003;max-height:calc(100vh - 16px)}.wrapper.popup-content-wrapper .popup-dialog .popup-header{justify-content:flex-end;background-color:#fff;height:56px;padding:0 8px}.wrapper.popup-content-wrapper .popup-dialog .message-bubble{width:auto;padding:32px;margin-top:0;border-radius:0;overflow:auto;max-height:calc(100vh - 16px)}.wrapper.popup-content-wrapper .popup-dialog .message-bubble:last-child{border-radius:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-header{display:none}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message{padding:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message:last-child .form-message-header{border-radius:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message:last-child .form-message-item{border-radius:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-header{padding:32px 32px 12px;border-radius:0;justify-content:space-between}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-item{padding:0 32px 32px;border-radius:0}.wrapper .full-screen-modal{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:1000000;background-color:#000c}.wrapper .modal-header{background:linear-gradient(180deg,rgba(0,0,0,.5),transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.wrapper .modal-header .close-btn{border:none;background:transparent;cursor:pointer}.wrapper .full-screen-image{position:absolute;max-width:100vw;max-height:100vh;margin:auto;top:0;bottom:0;left:0;right:0}.wrapper .typing-cue-wrapper{width:32px;margin:auto;display:flex}.wrapper .typing-cue-wrapper .typing-cue{position:relative;left:0;right:0;margin:auto;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1.55s infinite linear alternate;animation-delay:.25s;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue:before,.wrapper .typing-cue-wrapper .typing-cue:after{content:"";display:inline-block;position:absolute;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1.55s infinite linear alternate;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue:before{left:-12px;animation-delay:0s}.wrapper .typing-cue-wrapper .typing-cue:after{left:12px;animation-delay:.5s}.wrapper .hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .rating-root{display:flex}.wrapper [dir=rtl] .rating-root{flex-direction:row-reverse}.wrapper .rating-wrapper{display:flex;margin-top:8px}.wrapper [dir=rtl] .rating-wrapper{flex-direction:row-reverse}.wrapper .rating-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .star-label{background-color:transparent;border:0;cursor:pointer;padding:0}.wrapper .star-label>svg>path{fill:var(--color-rating-star)}.wrapper .star-input.active+label>svg>path{fill:var(--color-rating-star-fill)}.wrapper .star-input:disabled+.star-label{cursor:not-allowed;filter:brightness(.8)}.wrapper .rating-star-icon{height:32px;width:32px}.wrapper.expanded .widget:not(.drag){animation:scale-in-br .25s cubic-bezier(.25,.46,.45,.94) .2s both}.wrapper.expanded .widget.sidepanel{animation:unset}.wrapper.expanded .widget .resizable{width:4px;height:100%;top:0;left:0;background-color:transparent;position:absolute;z-index:10000;cursor:col-resize}.wrapper.expanded .widget .resizable.right-resize{right:0;left:unset}.wrapper.expanded .widget .resizable.top-resize{width:100%;height:4px;cursor:row-resize}.wrapper.expanded .widget .resizable.corner{height:8px;width:8px;cursor:nwse-resize}.wrapper.expanded .widget .resizable.corner.right-resize{cursor:nesw-resize}.wrapper.expanded:not(.pos-left) .right-resize{display:none}.wrapper.expanded .button:not(.drag){animation:scale-out-center .25s cubic-bezier(.55,.085,.68,.53) forwards}.wrapper.collapsed .widget:not(.drag){animation:scale-out-br .25s cubic-bezier(.55,.085,.68,.53) forwards}.wrapper.collapsed .widget.sidepanel{animation:unset}.wrapper.collapsed .notification-badge{background-color:var(--color-notification-badge-background);color:var(--color-notification-badge-text);right:-5px;top:-5px;align-items:center;border-radius:24px;display:flex;font-size:14px;height:24px;justify-content:center;position:absolute;text-align:center;width:32px}.wrapper.collapsed .button:not(.drag){animation:scale-in-center .25s cubic-bezier(.25,.46,.45,.94) .2s both}.wrapper.pos-left .widget{right:unset;left:calc(var(--position-left) * -1);max-width:100vw}.wrapper.pos-left.expanded .widget:not(.drag){animation:scale-in-bl .25s cubic-bezier(.25,.46,.45,.94) .2s both}.wrapper.pos-left.expanded .widget .left-resize{display:none}.wrapper.pos-left.collapsed .widget{animation:scale-out-bl .25s cubic-bezier(.55,.085,.68,.53) forwards}.wrapper .ellipsis{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.wrapper .popup{position:absolute;background-color:var(--color-popup-background);color:var(--color-popup-text);min-width:140px;max-height:280px;display:none;padding:4px 0;border-radius:6px;box-shadow:#00000029 0 4px 8px;overflow-y:auto;z-index:5}.wrapper .popup .li{display:flex;align-items:center;height:48px;margin:4px 0;cursor:pointer;overflow:hidden;color:var(--color-popup-button-text)}.wrapper .popup .li svg>path{fill:var(--color-popup-text)}.wrapper .popup .li#action-menu-option-lang{border-top:1px solid var(--color-popup-horizontal-rule)}.wrapper .popup .li.disable{pointer-events:none;cursor:not-allowed;opacity:.5}.wrapper .popup .li:focus{outline:1px dotted var(--color-actions-outline-focus);outline-offset:1px}.wrapper .popup .li:hover,.wrapper .popup .li:focus,.wrapper .popup .li.active{background-color:var(--color-popup-item-background-hover)}.wrapper .popup .li .icon{margin-inline-start:16px;height:20px;width:20px}.wrapper .popup .li .text{padding:0 16px}.wrapper .popup.expand{display:block;-webkit-animation:scale-in-br .25s cubic-bezier(.25,.46,.45,.94) .2s both;animation:scale-in-br .25s cubic-bezier(.25,.46,.45,.94) .2s both}.wrapper .popup.action-menu,.wrapper .popup.language-selection-menu{top:50px;bottom:unset}.wrapper .popup.action-menu.expand,.wrapper .popup.language-selection-menu.expand{display:block;-webkit-animation:scale-in-tr .25s cubic-bezier(.25,.46,.45,.94) .2s both;animation:scale-in-tr .25s cubic-bezier(.25,.46,.45,.94) .2s both}.wrapper .popup.language-selection-menu{max-height:calc(100% - 280px)}.wrapper .popup.share-popup-list{bottom:50px;left:unset}.wrapper .spinner{height:48px;width:48px}.wrapper .spinner svg{animation-duration:.75s;-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.wrapper .spinner svg circle{fill:transparent;stroke:var(--color-user-text);stroke-width:2px;stroke-dasharray:128px;stroke-dashoffset:82px}.wrapper .webview-container{position:absolute;width:100%;height:80%;bottom:0;box-shadow:0 -4px 32px #0000001a;z-index:10}.wrapper .webview-container .webview-header svg{fill:var(--color-actions-text)}.wrapper .webview-container .webview-header .widget-button{color:var(--color-actions-text)}.wrapper .webview-container .spinner{position:absolute;margin:auto;left:0;right:0;top:40%}.wrapper .webview-container .iframe{width:100%;height:100%;background:var(--color-conversation-background);border:none}.wrapper .webview-container .webview-error{position:absolute;bottom:0;background:var(--color-popup-background);width:calc(100% - 32px);margin:10px 16px;padding:6px 16px;border-radius:6px;display:flex;align-items:center;box-shadow:0 -4px 32px #0000001a}.wrapper .webview-container .webview-error .webview-error-button-close{border:none}.wrapper .webview-container .webview-alt-link{color:var(--color-links)}.wrapper .webview-container.webview-container-close{animation:webview-slide-out-bottom .4s cubic-bezier(.55,.085,.68,.53) both}.wrapper .webview-container.webview-container-open{animation:webview-slide-in-bottom .4s cubic-bezier(.25,.46,.45,.94) both}.wrapper .pin-button-wrapper{position:sticky;display:flex;justify-content:end;top:0;z-index:2}.wrapper .pin-button-wrapper .widget-button{border:0px;background-color:#fff}.wrapper .pin-button-wrapper .widget-button:hover{background-color:#e9e7e7}.wrapper .pin-button-wrapper .widget-button:active{background-color:#d7d5d3}.wrapper .scroll-down-button-wrapper{position:sticky;display:flex;justify-content:center;bottom:-8px;padding-bottom:16px;background:linear-gradient(180deg,#fff0,#fff)}.wrapper .scroll-down-button-wrapper .widget-button{border-radius:35px;background-color:#fff;box-shadow:0 6px 12px #0003}.wrapper .scroll-down-button-wrapper .widget-button:hover{background-color:#e9e7e7}.wrapper .scroll-down-button-wrapper .widget-button:active{background-color:#d7d5d3}.widget{position:absolute;bottom:calc(var(--position-bottom) * -1);border-radius:6px 6px 0 0;box-shadow:0 -4px 32px #0000001a;right:calc(var(--position-right) * -1);width:100vw;min-width:100vw;max-width:100vw;max-height:var(--widget-max-height);margin:0;overflow:hidden;text-decoration:none;text-transform:none;z-index:10000;align-items:stretch;background:var(--color-conversation-background)}.widget.large-size{--bubble-max-width: 780px}.wrapper .widget.large-size{font-size:18px;line-height:24px}.wrapper .widget.large-size .card{padding:24px}.wrapper .widget.large-size .card .card-content{margin-bottom:24px}.wrapper .widget.large-size .card .card-image{margin:-24px -24px 10px;width:calc(100% + 48px)}.wrapper .widget.large-size .message-bubble{line-height:24px;padding:16px 24px}.wrapper .widget.large-size .attachment .attachment-placeholder{margin:-16px -24px 0;max-width:calc(100% + 48px)}.wrapper .widget.large-size .attachment .attachment-footer{margin:0 -24px -16px}.wrapper .widget.large-size .widget-button:not(.icon){height:44px}.wrapper .widget.large-size .footer{border-radius:20px 20px 0 0;margin:0 24px;overflow:hidden}.wrapper .widget.large-size .footer.left{margin-inline-start:68px}.wrapper .widget.large-size .footer.right{margin-inline-end:68px}.wrapper .widget.large-size .footer-actions{margin-inline-end:10px}.wrapper .widget.large-size .user-input{font-size:18px;line-height:24px;min-height:60px;padding:18px 12px 18px 18px}.wrapper .widget.medium-size{font-size:16px;line-height:20px}.wrapper .widget.medium-size .card{padding:16px}.wrapper .widget.medium-size .card .card-content{margin-bottom:16px}.wrapper .widget.medium-size .card .card-image{margin-top:-16px}.wrapper .widget.medium-size .message-bubble{line-height:20px;padding:8px 16px}.wrapper .widget.medium-size .attachment .attachment-placeholder{margin:-8px -16px 0}.wrapper .widget.medium-size .attachment .attachment-footer{margin:0 -16px -8px}.wrapper .widget.medium-size .footer{border-radius:20px 20px 0 0;margin:0 24px;overflow:hidden}.wrapper .widget.medium-size .user-input{font-size:16px;line-height:20px;min-height:60px;padding:20px 12px 20px 10px}.wrapper .widget.large-size .icon-wrapper,.wrapper .widget.medium-size .icon-wrapper{height:36px;width:36px;min-height:36px;min-width:36px}.wrapper .widget.large-size .message.card-message-horizontal,.wrapper .widget.medium-size .message.card-message-horizontal{margin-inline-start:-24px}.wrapper .widget.large-size .message.card-message-horizontal .message-header,.wrapper .widget.large-size .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .message.card-message-horizontal .message-global-actions{margin-inline-start:24px;max-width:calc(.9*(100% - 36px))}.wrapper .widget.large-size .message.card-message-horizontal .card-message-cards,.wrapper .widget.medium-size .message.card-message-horizontal .card-message-cards{padding-inline-start:24px}.wrapper .widget.large-size .card,.wrapper .widget.medium-size .card{width:344px}.wrapper .widget.large-size .conversation,.wrapper .widget.medium-size .conversation{padding:16px 24px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal{margin-inline-start:-68px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions{margin-inline-start:68px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards{padding-inline-start:68px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .relative-timestamp.left,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .relative-timestamp.left{margin-inline-start:44px}.wrapper .widget.large-size .conversation .conversation-pane.user-icon .relative-timestamp.right,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .relative-timestamp.right{margin-inline-end:44px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:min(var(--bubble-max-width),.9 * (100% - 44px))}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:min(var(--bubble-max-width),.9 * (100% - 92px))}.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:min(var(--bubble-max-width),.9 * (100% - 88px))}.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:min(var(--bubble-max-width),.9 * (100% - 136px))}.wrapper .widget.large-size .message-bubble-tabular-message,.wrapper .widget.large-size .message-bubble-form-message,.wrapper .widget.medium-size .message-bubble-tabular-message,.wrapper .widget.medium-size .message-bubble-form-message{padding:0}.widget .alert-wrapper{position:absolute;top:48px;width:100%}.widget .alert-wrapper .alert-prompt{position:relative;left:0;right:0;width:auto;margin:6px;padding:10px;border-radius:10px;z-index:11}.widget .msg-icon{padding:5px 10px 0 0}.widget .msg{flex-grow:1}.sidepanel-content-wrapper{display:flex;width:100vw}.sidepanel-content-wrapper>*{flex-grow:1}.sidepanel-content-wrapper .wrapper:not(.contextual-widget){position:absolute;bottom:0;right:0;height:100vh;flex-grow:unset;width:0;min-width:0;max-width:0;flex-shrink:0;--width-full-screen: 375px}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded{min-width:100vw;max-width:100vw}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded:after{content:"";background-color:transparent;position:absolute;top:0;left:0;width:4px;height:100%;cursor:col-resize;z-index:10000}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag{transition:unset}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag:after{background-color:#ccc}.sidepanel-content-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;min-width:unset;max-width:unset;height:100%;max-height:100%;box-shadow:none;border-radius:0}.contextual-widget-wrapper{position:relative}.contextual-widget-wrapper .widget-wrapper{position:sticky;height:0;z-index:1;top:8px;max-width:100%}.contextual-widget-wrapper .widget-wrapper .container{position:absolute;right:-44px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget{position:relative;width:272px;border-radius:6px;background-color:#f5f4f2;box-shadow:0 6px 12px #0003}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size{width:36px;box-shadow:0 1px 4px #0000001f;border-radius:4px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:first-child{border-bottom:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:not(:first-child){display:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size>:not(:last-child){border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size .widget-button{background:#f5f4f2;margin-inline-start:0;border-radius:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size{width:416px;display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .conversation .message-wrapper{border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .footer.enabled{display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:only-child,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:nth-child(2){border:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header{height:44px;background:#f5f4f2;padding:8px 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .logo{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .title{height:16px;font-weight:400;font-size:12px;line-height:16px;color:#161513b2}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message{display:flex;height:76px;border-radius:6px;border:1px solid rgba(22,21,19,.1215686275);margin:0 12px 12px;background:#fef9f2;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-icon{height:18px;margin:8px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info{margin:8px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .error-text{color:#8f520a;line-height:20px;font-weight:700}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .reset-button{cursor:pointer;line-height:16px;font-size:13.75px;font-weight:600;margin-top:8px;color:#161513}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions{margin-top:0;padding:12px 12px 4px;background:#fff}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions button.action-postback{height:auto}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper{padding:0 12px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions{margin-top:0;margin-bottom:4px;padding:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions .action-postback{background:transparent}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble{font-size:13.75px;line-height:16px;margin-top:0;margin-bottom:0;background:transparent;border-radius:0;min-height:unset;padding:0!important}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble .message-text{margin-bottom:12px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer-form{display:none}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner{background-color:#f5f4f2;box-sizing:border-box;width:154px;height:52px;padding:8px 12px;border-radius:6px;box-shadow:0 6px 12px #0003;position:sticky;top:8px;bottom:8px;z-index:1;display:flex;align-items:center}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon.spin{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-text{width:70px;height:16px;font-size:12px;line-height:16px;color:#161513b2}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .close-button{border:transparent;cursor:pointer;background:#f5f4f2;width:36px;height:36px;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner>:not(:last-child){margin-inline-end:4px}.contextual-widget-wrapper .widget-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;height:100%;border-radius:6px}.search-bar-widget-wrapper{--font-family: "Oracle Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;display:flex;height:100%;min-height:44px;position:relative}.search-bar-widget-wrapper .dialog-wrapper,.search-bar-widget-wrapper .dialog-wrapper .dialog{position:relative}.search-bar-widget-wrapper .footer{border:none;box-shadow:none;background:transparent;width:100%;display:flex}.search-bar-widget-wrapper .footer.mode-voice+.search-bar-widget .search-bar-popup{display:none}.search-bar-widget-wrapper .footer .footer-mode-keyboard{align-items:center;display:flex;flex-flow:row nowrap;margin:0;border:0;background:transparent;height:100%;position:relative;width:100%}.search-bar-widget-wrapper .footer .footer-mode-keyboard .footer-logo{margin-inline-start:4px}.search-bar-widget-wrapper .footer .footer-mode-voice{position:absolute;left:0;right:0;top:calc(100% + 2px);border:1px solid rgba(22,21,19,.12);border-radius:0 0 6.06px 6.06px}.search-bar-widget-wrapper .footer .user-input{font-family:var(--font-family);height:100%;line-height:16px;min-height:34px;padding:14px 4px 4px}.search-bar-widget-wrapper .footer .footer-actions{height:100%}.search-bar-widget-wrapper .footer .footer-actions .share-popup-list{max-height:unset;bottom:unset;animation:none}.search-bar-widget-wrapper .autocomplete-items{max-height:unset;top:56px;bottom:unset}.search-bar-widget-wrapper .search-bar-widget{position:absolute;bottom:0;height:0;width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content{position:relative;top:4px;background:#fff;min-width:100%;width:100%;max-width:100%;border-radius:6.06px;border:1px solid rgba(22,21,19,.12);padding:8px;box-shadow:0 12px 20px #00000047;max-height:40vh;overflow:hidden auto;scroll-behavior:smooth;scrollbar-width:thin;transition:all .2s ease-in-out}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup{position:relative;display:flex;flex-direction:column;--color-conversation-background: #fff}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup:empty{display:none}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .user-message{font-weight:700;font-size:large;margin-bottom:8}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .user-message:first-child{padding-inline-end:24px}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .user-message:not(:first-child){margin-top:16px}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message{max-width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message.card-message-horizontal{margin-inline:0;width:100vw}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-bubble.error{background:var(--color-bot-message-background);border:none;color:var(--color-bot-text)}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-bubble-tabular-message,.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-bubble-form-message{width:unset;max-width:100%;margin-inline:16px;border-radius:0}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-global-actions{margin-top:0;padding-inline:16px;padding-bottom:8px}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .attachment-placeholder{padding-inline-start:16px;background-color:transparent}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .attachment-placeholder .attachment-image,.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .attachment-placeholder .attachment-video{max-height:inherit;max-width:inherit}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .attachment-placeholder .attachment-video{aspect-ratio:unset}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup-pinned{margin-top:-32px}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .input-popup-slot{position:relative}.search-bar-widget-wrapper .search-bar-popup-separator{border:1px solid var(--color-search-bar-separator);height:0;margin:8px 0}.search-bar-widget-wrapper .input-start-slot,.search-bar-widget-wrapper .input-end-slot,.search-bar-widget-wrapper .input-popup-slot{word-break:normal;overflow-wrap:anywhere}.search-bar-widget-wrapper .input-end-slot{flex:1 1 auto;overflow-x:auto}.search-bar-widget-pinned-wrapper{position:relative;width:100%;background:#fff;padding:8px;overflow:hidden auto;scroll-behavior:smooth;scrollbar-width:thin;z-index:0}.search-bar-widget-pinned-wrapper .search-bar-popup-pinned{margin-top:-32px}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content:empty{display:none}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .user-message{font-weight:700;font-size:large;margin-bottom:8}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .user-message:first-child{padding-inline-end:24px}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .user-message:not(:first-child){margin-top:16px}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .message{max-width:100%}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .message.card-message-horizontal{margin-inline:0;width:100vw}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .message-bubble.error{background:var(--color-bot-message-background);border:none;color:var(--color-bot-text)}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .message-bubble-tabular-message,.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .message-bubble-form-message{width:unset;max-width:100%;margin-inline:16px;border-radius:0}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .message-global-actions{margin-top:0;padding-inline:16px;padding-bottom:8px}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .attachment-placeholder{padding-inline-start:16px;background-color:transparent}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .attachment-placeholder .attachment-image,.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .attachment-placeholder .attachment-video{max-height:inherit;max-width:inherit}.search-bar-widget-pinned-wrapper .search-bar-widget-pinned-content .attachment-placeholder .attachment-video{aspect-ratio:unset}.image-preview-wrapper{background:#000c;height:100%;position:fixed;top:0;left:0;width:100%;z-index:10000}.image-preview-wrapper .image-preview-header{align-items:center;background:linear-gradient(180deg,rgba(0,0,0,.5),transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.image-preview-wrapper .image-preview-header .image-preview-close{background:transparent;border:none;cursor:pointer;height:36px;width:36px}.image-preview-wrapper .image-preview-header .image-preview-close .image-preview-close-icon{fill:#fff;height:100%;width:100%}.image-preview-wrapper .image-preview{bottom:0;left:0;margin:auto;max-height:100vh;max-width:100vw;position:absolute;right:0;top:0}.arrow-icon{margin-inline-end:2px;width:32px;height:32px;display:flex;align-items:center;flex-shrink:0}@media screen and (min-width: 426px){.wrapper.pos-left .widget{left:0}.wrapper:not(.embedded) .widget:not(.sidepanel){max-width:calc(100vw - var(--position-right))}.wrapper:not(.embedded).pos-left .widget:not(.sidepanel){max-width:calc(100vw - var(--position-left))}.widget:not(.sidepanel){width:var(--width-full-screen);min-width:unset;max-height:var(--widget-max-height);bottom:0;right:0}.user-input{font-size:13.75px}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget){position:sticky;top:0}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget).expanded{min-width:375px;max-width:800px}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget) .widget{border-left:thin solid #ccc}}@media (prefers-reduced-motion){.open,.close{animation:none}}[dir=rtl] .wrapper *{direction:rtl}[dir=rtl] .wrapper{text-align:right}[dir=rtl] .wrapper .widget.open{animation:scale-in-bl .25s cubic-bezier(.25,.46,.45,.94) .2s both}[dir=rtl] .wrapper .widget.close{animation:scale-out-bl .25s cubic-bezier(.55,.085,.68,.53) forwards}[dir=rtl] .wrapper .message-bubble{border-radius:10px 2px 2px 10px}[dir=rtl] .wrapper .message-block .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:2px 10px 10px 2px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px}[dir=rtl] .wrapper .button{left:0;right:unset}[dir=rtl] .wrapper .popup.expand{-webkit-animation:scale-in-bl .25s cubic-bezier(.25,.46,.45,.94) .2s both;animation:scale-in-bl .25s cubic-bezier(.25,.46,.45,.94) .2s both}[dir=rtl] .wrapper .popup.action-menu.expand,[dir=rtl] .wrapper .popup.language-selection-menu.expand{-webkit-animation:scale-in-tl .25s cubic-bezier(.25,.46,.45,.94) .2s both;animation:scale-in-tl .25s cubic-bezier(.25,.46,.45,.94) .2s both}',vl=wl,_l=["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"],xl=o=>_l.includes(o==null?void 0:o.toLowerCase()),kl=["allow-downloads-without-user-activation","allow-downloads","allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-storage-access-by-user-activation","allow-top-navigation","allow-top-navigation-by-user-activation"],yl=o=>o.map(e=>e.toLowerCase()).filter(e=>kl.includes(e)),Sl=1e3,ts="none",Cl=.8,go="webview-container",ho=`${go}-open`,uo=`${go}-close`;class Tl{constructor(e,s,t){this._util=s,this._settings=t,this._heightRatio=Cl,this._props={closeButtonIcon:Ge,closeButtonType:"icon",errorInfoBar:!0,referrerPolicy:"no-referrer-when-downgrade",sandbox:[],size:"tall"},this._isOpen=!1,this._isErrorViewOpen=!1,this.setProps(e||{}),this._cssPrefix=t.name}setProps(e){Array.isArray(e.sandbox)&&e.sandbox.length&&(e.sandbox=yl(e.sandbox));const s=Object.assign(Object.assign({},this._props),e);s.closeButtonIcon||(s.closeButtonIcon=this._props.closeButtonIcon),s.closeButtonType||(s.closeButtonType="icon"),s.size||(s.size="tall"),xl(s.referrerPolicy)||(s.referrerPolicy="no-referrer-when-downgrade"),s.size==="full"&&(this._heightRatio=1),this._props=s,this._isOpen=!1,this._isErrorViewOpen=!1}open(e){if(this._component){const s=this._util,t=100;this._component.style.height=`${t*this._heightRatio}%`,s.removeCSSClass(this._component,uo,ts),s.addCSSClass(this._component,ho),this._component.insertBefore(this._loadingIndicator,this._webView),this._webView.onload=()=>{this._loadingIndicator.remove(),s.removeCSSClass(this._webView,ts)},this._props.title||(this._title.textContent=e),this._props.errorInfoBar&&setTimeout(()=>{this._isOpen&&!this._isErrorViewOpen&&(this._errorView=this._createErrorView(),e&&(this._errorAltLink.href=e),s.removeCSSClass(this._errorView,ts),this._component.append(this._errorView),this._isErrorViewOpen=!0)},Sl),this._isOpen=!0}}close(){const e=this._util,s=400;this._isOpen=!1,e.removeCSSClass(this._component,ho),e.addCSSClass(this._component,uo),this._removeErrorView(),this._webView.setAttribute("src",""),setTimeout(()=>{e.addCSSClass(this._component,ts),e.removeCSSClass(this._webView,ts)},s)}render(){const e=this._util,s=this._props;return this._component=e.createDiv(["webview-container"]),this._header=e.createDiv(["header","webview-header","flex"]),this._title=e.createTextDiv(["title","webview-title","ellipsis"]),this._closeButton=e.createIconButton({css:["header-button","webview-button-close"],icon:s.closeButtonIcon,iconCss:[],title:s.closeButtonLabel}),this._closeButton.id=`${this._cssPrefix}-webview-button-close`,this._loadingIndicator=this._createLoadingIndicator(),this._webView=e.createElement("iframe",["iframe","webview"]),this._webView.name=`${this._settings.name}-webview`,this._webView.title=s.accessibilityTitle,s.title&&(this._title.textContent=s.title),s.closeButtonType==="label"?(this._closeButton.classList.add(`${this._cssPrefix}-label-only`),this._closeButton.append(document.createTextNode(s.closeButtonLabel))):s.closeButtonType==="iconWithLabel"&&(this._closeButton.classList.add(`${this._cssPrefix}-with-label`),this._closeButton.append(document.createTextNode(s.closeButtonLabel))),this._webView.setAttribute("referrerpolicy",s.referrerPolicy),this._props.sandbox.length&&this._props.sandbox.forEach(t=>{this._webView.sandbox.add(t)}),e.addCSSClass(this._component,ts),this._closeButton.onclick=()=>{this.close()},this._header.append(this._title,this._closeButton),this._component.append(this._header,this._webView),this._component}_createLoadingIndicator(){return new qr(this._util).render()}_createErrorView(){const e=this._util,s=e.createDiv(["webview-error","flex"]);this._errorInfoText=e.createDiv(["webview-error-text"]),this._setErrorTextWithLink(this._props.errorInfoText);const t=e.createIconButton({css:["webview-error-button-close"],icon:this._props.closeButtonIcon,iconCss:[],title:this._props.errorInfoDismissLabel});return t.onclick=this._removeErrorView.bind(this),s.append(this._errorInfoText,t),s}_setErrorTextWithLink(e){var s;const t=this._util,a=Tm(e);let r;const i=/\{0\}(.*)\{\/0\}/g,n=(s=i.exec(a))===null||s===void 0?void 0:s[1];if(n){const p=t.createAnchor("",n,["webview-alt-link"]);r=a.replace(Xe(i),p.outerHTML)}else r=t.createAnchor("",a,["webview-alt-link"]).outerHTML;this._errorInfoText.innerHTML=r,this._errorAltLink=this._errorInfoText.querySelector("a")}_removeErrorView(){const e=this._util;this._isErrorViewOpen&&(e.addCSSClass(this._errorView,ts),setTimeout(()=>{this._component.removeChild(this._errorView),this._isErrorViewOpen=!1},600))}}const la="none",El="closeSearchbarPopup",Al="dataDisplay";class Il extends He{get _shouldDisplayPopupSlot(){return this.__popupSlotDisplayState}set _shouldDisplayPopupSlot(e){e!==this.__popupSlotDisplayState&&(this.__popupSlotDisplayState=e,this._popupSlot&&(this._popupSlot.dataset.display=`${e}`,this._popupSlot.dispatchEvent(new CustomEvent(Al,{detail:e}))))}constructor(e,s,t,a){super(),this._settings=e,this._util=s,this._widgetComponent=t,this._eventDispatcher=a,this._logger=new O("SearchBarWidgetComponent"),this._isListeningDocumentClick=!1,this._isPopupOpen=!1,this._currentInteraction=[],this.__popupSlotDisplayState=!1,this.closePopup=()=>{if(this._shouldDisplayPopupSlot=!1,!this._isPopupOpen)return;this._isPopupOpen=!1;const d=this._getFooterTextArea();if(!d)return;const u=this._util,b=d.getAttribute("aria-expanded")==="true"?this.footer.getSuggestionsList():this._popup;b&&u.addCSSClass(b,la),this.blur()},this._onDocumentClick=d=>{const u=d.target;u.isConnected&&!this.footer.element.contains(u)&&!this._popup.contains(u)&&this.closePopup()};const{getSuggestions:r,sendMessage:i,uploadFile:n,onSpeechToggle:p,shareUserLocation:l,sendUserTypingStatusMessage:c,setHotkeyMap:m}=this._widgetComponent;this._cssPrefix=this._settings.name;const h=d=>{this._shouldDisplayPopupSlot=!1,i.call(t,d)};this._footer=new na(this._util,h,n.bind(t),this._settings,r.bind(t),p.bind(t),l.bind(t),c.bind(t),this._eventDispatcher,t,m.bind(t)),this._settings.showTypingIndicator&&(this._typingIndicator=new ao(Z.LEFT,this._settings,this._util))}get footer(){return this._footer}get typingIndicator(){return this._typingIndicator}render(){const e=this._settings,s=this._util,t=document.querySelector(`#${e.targetElement}`);let a;if(t){const r=s.createDiv(["flex-row-nowrap","search-bar-widget-wrapper","wrapper"]),i=s.createDiv(["search-bar-widget"]),n=s.createDiv(["search-bar-widget-content",la]);this._popup=n,a=s.createDiv(["search-bar-popup"]),this.element=t,this._widgetComponent.element=t,this.footer.render();const p=this.footer.element;s.setChatWidgetWrapper(r);const l=s.createElement("hr",["search-bar-popup-separator","none"],!1);l.role="none",this._popupContentSeparator=l;const c=s.createDiv(["input-popup-slot"]);c.id=`${this._cssPrefix}-input-popup-slot`,c.addEventListener(El,this.closePopup),c.dataset.display=`${this._shouldDisplayPopupSlot}`,this._popupSlot=c,n.append(a,l,c),i.append(n),p.append(i);const m=s.createDiv(["input-end-slot"]);m.id=`${this._cssPrefix}-input-end-slot`,r.append(p,m),t.append(r),this._chatWrapper=a,this._addDocumentClickListener(),L(p,"click",this._addDocumentClickListener),this._observeActiveTextArea(),this._observePopupSlot(),this._observeChatContainer(),this._observeSearchBarWidgetWrapper(r)}else this._logger.error(`Cannot fetch search bar using the passed target element: ${e.targetElement}`);return a}renderMessage(e,s,t){const a=this._chatWrapper;if(!a||!Js(e))return;const r=this._renderMessage(e,s,a);if(!r)return;const i=Me(e);this._util.addCSSClass(r,`${i?"skill":"user"}-message`),i?this._handleSkillMessage(r,t):this._handleUserMessage(r),this._currentInteraction.push(r)}showMessage(e,s){const t=this._util.getMessage(s.render());t.id=e,this._handleSkillMessage(t,!1)}clearInteraction(){this._clearCurrentInteraction()}openPopup(){return this._isPopupOpen?!0:this._shouldOpenPopup()?(this._openPopup(),!0):!1}focus(){const e=this._footer.element.querySelector(`.${this._cssPrefix}-footer-mode-keyboard`);this._util.addCSSClass(e,"search-bar-widget-focus")}blur(){const e=this._footer.element.querySelector(`.${this._cssPrefix}-footer-mode-keyboard`);this._util.removeCSSClass(e,"search-bar-widget-focus")}_renderMessage(e,s,t){const a=this._settings.delegate;if(a&&a.render){const r=this._util.createDiv(["message"]);if(r.id=e.msgId,r.lang=this._settings.locale,t.append(r),a.render(e))return null;r.remove()}return s.render()}_handleSkillMessage(e,s){const t=this._latestSkillMessageElement;s&&t?(this._currentInteraction=this._currentInteraction.filter(a=>a!==t),t.replaceWith(e)):this._chatWrapper.append(e),this._latestSkillMessageElement=e}_handleUserMessage(e){var s;this._clearCurrentInteraction(),(s=this._chatWrapper)===null||s===void 0||s.prepend(e)}_addDocumentClickListener(){this._isListeningDocumentClick||(this._isListeningDocumentClick=!0,document.addEventListener("click",this._onDocumentClick,!0))}_openPopup(){this._isPopupOpen||(this._isPopupOpen=!0,this._shouldDisplayPopupSlot=!0,this._util.removeCSSClass(this._popup,la),this._addDocumentClickListener(),this.focus())}_shouldOpenPopup(){var e,s;const t=(e=this.footer.getSuggestionsList())===null||e===void 0?void 0:e.hasChildNodes(),a=!!this._popup||!!this._popupSlot;return t||!a?!1:this._chatWrapper.hasChildNodes()||((s=this._popupSlot)===null||s===void 0?void 0:s.hasChildNodes())}_updateSeparatorVisibility(){var e,s;((e=this._chatWrapper)===null||e===void 0?void 0:e.childElementCount)>0&&((s=this._popupSlot)===null||s===void 0?void 0:s.childElementCount)>0?this._showSeparatorInPopup():this._hideSeparatorInPopup()}_showSeparatorInPopup(){this._util.removeCSSClass(this._popupContentSeparator,"none")}_hideSeparatorInPopup(){this._util.addCSSClass(this._popupContentSeparator,"none")}_observeActiveTextArea(){const e=this._getFooterTextArea(),s=()=>{this._shouldDisplayPopupSlot=!0},t=()=>{this._shouldDisplayPopupSlot=!1};L(e,"focus",()=>{this.footer.isProgrammaticFocus()?t():s(),this.openPopup()}),L(e,"blur",()=>{this._isPopupOpen||t()}),L(e,"click",()=>{s(),this.openPopup()}),L(e,"keyup",a=>{a.key!==T.Return&&s()}),L(e,"keydown",()=>{this.openPopup()||this.closePopup(),e.value.length===0&&e.scrollTo({top:0,behavior:"instant"})})}_observePopupSlot(){new MutationObserver(s=>{s.forEach(t=>{t.type==="childList"&&(t.addedNodes.length>0?this._shouldDisplayPopupSlot&&this.openPopup():t.removedNodes.length>0&&(this._shouldOpenPopup()||this.closePopup()),this._updateSeparatorVisibility())})}).observe(this._popupSlot,{childList:!0,subtree:!1})}_observeChatContainer(){new MutationObserver(s=>{s.forEach(t=>{t.type==="childList"&&(t.removedNodes.length>0&&(this._shouldOpenPopup()||this.closePopup()),this._updateSeparatorVisibility())})}).observe(this._chatWrapper,{childList:!0,subtree:!1})}_observeSearchBarWidgetWrapper(e){let t;L(e,"keydown",a=>{a.key===T.Tab&&(t=setTimeout(()=>{this.closePopup()},200))}),L(e,"keyup",a=>{a.key===T.Tab&&clearTimeout(t)})}_getFooterTextArea(){return this.footer.element.querySelector("textarea")}_clearCurrentInteraction(){this._latestSkillMessageElement=null,this._currentInteraction.forEach(e=>e.remove()),this._currentInteraction=[]}}var be=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const bo=window.BroadcastChannel,ma="collapsed",fo="expanded",je="large",Fs="none",wo=250,Se=setTimeout,Ml=[f.Suggest,f.SessionClosed,f.CloseSession,f.Status],Ll=[f.Text,f.Attachment,f.Location,f.FormSubmission],vo=375,_o=800,Dl=600,Pl=1024,xo=500,zl=200;class Rl extends He{constructor(e,s,t){var a,r,i;super(),this.skillMessages=[],this.contextWidgetMap={},this._messages=[],this._logger=new O("ChatComponent"),this._attachmentDivs=[],this._unreadMsgCount=0,this._latestSkillMessages=[],this._isNewMessage=!0,this._isTTSMute=!0,this._isInitMessageSent=!1,this._isExpanded=!1,this._isFilterClear=!1,this._isFirstMessage=!0,this._isResponseReceived=!1,this._messageIDs=[],this._lastMessageHasGlobalAction=!1,this._streamChunkWaitTimeout=3e4,this._accessKeyElementsMap=new Map,this._streamIdComponentMap=new Map,this._isASRActive=!1,this._visualizerColor="",this._revertToVoiceInputMode=!1,this._onChatServerStatusChange=n=>be(this,void 0,void 0,function*(){var p,l;if(Number.isInteger(n)&&n!==M.Open){this._stopBroadcaster(),this._footer.isDisabled()||(this._footer.disable(),(p=this._header)===null||p===void 0||p.disable(),this._logger.debug("WebSocket not open, send message button disabled")),this._onDisconnection(),n===M.Connecting&&!this._settings.searchBarMode?this.showTypingIndicator():this.hideTypingIndicator();for(const c of this._attachmentDivs)this._handleUploadError(c.fileName,A.UploadNetworkFail,c.divId);this._multiLangChat&&this._multiLangChat.disableComponent(!0)}else this._lastMessageTime=void 0,this.hideTypingIndicator(),this._footer.isDisabled()&&(this._footer.disable(!1),(l=this._header)===null||l===void 0||l.disable(!1),this._logger.debug("Connection established, send message button enabled")),this._onConnection();this._onConnectionStatusChange(n)}),this._onCoreOpen=n=>be(this,void 0,void 0,function*(){if(n){const p=this._settings;p.URI=n.URI,p.clientAuthEnabled||(p.userId=n.userId,p.channelId=n.channelId)}yield this._updateChannelUserIds(),this._setComponentIds(),this._sendInitMessages()}),this._processActionCall=n=>be(this,void 0,void 0,function*(){const p=yield n.getPayload();this._util.createAnchor(`tel:${p}`,"").click()}),this._processActionClient=n=>be(this,void 0,void 0,function*(){var p;const l=this._localeText,c=yield n.getPayload();if(c instanceof HTMLElement)try{yield li(c),this._showAlertDialog(l.copySuccessMessage,lm,2e3),(p=n.onSuccess)===null||p===void 0||p.call(n)}catch(h){this._showAlertDialog(l.copyFailureMessage,vs,2e3)}else this._eventDispatcher.trigger(c.actionType,c)}),this._processActionLocation=n=>{this.shareUserLocation()},this._processActionPopup=n=>{this._processActionUrl(n)},this._processActionPostback=n=>be(this,void 0,void 0,function*(){this._disablePastActions(this._latestSkillMessages),this._scrollToBottom();const p=yield n.getPayload(),{label:l,imageUrl:c}=n,m={};p["system.replaceMessage"]&&(m.hidden=!0);const h=ve({postback:p,text:c?this._util.createImageIcon({icon:c}).outerHTML:l,type:f.Postback});try{this.sendMessage(h,m)}catch(d){this._enablePastActions(this._latestSkillMessages)}}),this._processActionShare=n=>be(this,void 0,void 0,function*(){if(navigator.share){const p=yield n.getPayload();navigator.share({text:p,title:n.label})}else this._showAlertDialog(this._localeText.shareFailureMessage,vs)}),this._processActionSubmitForm=n=>be(this,void 0,void 0,function*(){const p=n.messageComponent;if(!p.validateForm())return;this._scrollToBottom();const l=p.getSubmittedFields();if(this._enableConversationHistory){const h=this.getMessages();h.slice().reverse().some(d=>{if(d.msgId!==p.msgId||d.messagePayload.type!==f.EditForm)return!1;const u=d.messagePayload;return It(u)?u.fields.forEach(b=>{gs(b)||(b.defaultValue=l[b.id])}):u.formRows.forEach(b=>{b.columns.forEach(v=>{v.fields.forEach(k=>{gs(k)||(k.defaultValue=l[k.id])})})}),!0}),this._storageService.setItem(this._chatStorageId,JSON.stringify(h))}const c=yield n.getPayload(),m={postback:c,submittedFields:l,type:f.FormSubmission};c||delete m.postback;try{this.sendMessage(ve(m),{hidden:!0})}catch(h){this._onSendMessageFailure(h)}}),this._processActionUrl=n=>be(this,void 0,void 0,function*(){const p=this._settings,l=yield n.getPayload();this._util.createAnchor(l,"",[],p.openLinksInNewWindow,p.linkHandler).click()}),this._processActionWebview=n=>be(this,void 0,void 0,function*(){const p=yield n.getPayload();this._util.createAnchor(p,"",[],this._settings.openLinksInNewWindow,this._webviewLinkHandler).click()}),this._actionProcessorMap={call:this._processActionCall,client:this._processActionClient,location:this._processActionLocation,popup:this._processActionPopup,postback:this._processActionPostback,share:this._processActionShare,submitForm:this._processActionSubmitForm,url:this._processActionUrl,webview:this._processActionWebview},this._onMessageActionClick=n=>{this.onSpeechToggle(!1);try{this._actionProcessorMap[n.type](n)}catch(p){this._logger.warn("Error processing user action",n,p)}},this._disposeStream=()=>{this._footer.disable(!1),clearTimeout(this._runningStreamTimer),this._streamIdComponentMap.delete(this._activeStreamId),this._activeStreamId=void 0,this._textStreamMessage=void 0},this._processStreamTimeout=()=>{var n;console.debug(`[stream]: Cancel stream due to timeout for ID: ${this._activeStreamId}.`),this._footer.disable(!1),(n=this._streamIdComponentMap.get(this._activeStreamId))===null||n===void 0||n.markEnd(),this.hideTypingIndicator(),this._activeStreamId=void 0},this._onCoreError=n=>{n.showToUser&&n.error==="CAStatusError"&&this._showAlertDialog(this._localeText.connectionFailureMessage,ga)},this._onASRStart=()=>{var n,p;const l=this._settings.searchBarMode?this._searchBar.element:this._footer.element;qs(l)&&((n=this._searchBar)===null||n===void 0||n.closePopup(),(p=this._searchBar)===null||p===void 0||p.focus(),this._isASRActive=!0,this._footer.setRecognitionRequested(!0),this._footer.setVoiceRecording(!0),this._scrollToBottom(),this._visualizerColor=Mm("--color-visualizer",this._settings.name))},this._onASRStop=()=>{var n;this._isASRActive=!1,this._footer.setVoiceRecording(!1),(n=this._searchBar)===null||n===void 0||n.blur()},this._onASRError=n=>{const p=this._localeText;let l="";switch(n==null?void 0:n.message){case X.RecognitionMultipleConnection:{l=p.errorSpeechMultipleConnection;break}case X.RecognitionNotReady:{l=p.errorSpeechInvalidUrl;break}case X.RecognitionTooMuchSpeechTimeout:case X.RecognitionProcessingFailure:{l=p.errorSpeechTooMuchTimeout;break}case X.RecognitionNoResponse:{l=p.errorSpeechNoResponse;break}case X.RecognitionNoWebServer:{l=p.errorSpeechNoWebServer;break}default:{l=p.errorSpeechUnavailable;break}}this._showAlertDialog(l,vs),this._onASRStop()},this._onASRResponse=n=>{this._isASRActive&&this._onSpeechRecognition(n)},this._onASRVisualData=n=>{this._isASRActive&&this._footer.updateVisualizer(n,this._visualizerColor)},this._onSendMessageFailure=n=>{this._logger.warn("[sendMessage] Failed to send message",n)},this.onCancelResponseHide=()=>{this._latestUserRequestId=null,this._settings.focusOnNewMessage!=="action"&&this._footer.focusTextArea()},this.onCancelResponseClick=()=>{const n=this._latestUserRequestId;n&&(this._canceledRequests.add(n),this._core.cancelRequest(n)),this._ttsCancel(),this._saveCanceledRequestIdsToSession(),this._triggerTextStreamEnd(),this.hideTypingIndicator(),this._footer.disable(!1)},this._core=e,this._settings=s,this._connect=t&&H(t.connect)?t.connect:()=>{this._core.connect().catch(n=>this._logger.error("Failed to connect to backend:",n))},this._openChat=t&&H(t.openChat)?t.openChat:()=>{},this._closeChat=t&&H(t.closeChat)?t.closeChat:()=>{},this._eventDispatcher=(t==null?void 0:t.eventDispatcher)||ps(),this._handleSessionEnd=t&&H(t.handleSessionEnd)?t.handleSessionEnd:()=>{},this._receivedMessage=t&&H(t.receivedMessage)?t.receivedMessage:n=>{this._eventDispatcher.trigger(U.MESSAGE_RECEIVED,n),this._eventDispatcher.trigger(U.MESSAGE,n)},this._sentMessage=t&&H(t.sentMessage)?t.sentMessage:n=>{this._eventDispatcher.trigger(U.MESSAGE_SENT,n),this._eventDispatcher.trigger(U.MESSAGE,n)},this._onConnectionStatusChange=t&&H(t.onConnectionStatusChange)?t.onConnectionStatusChange:()=>{},this._getUnreadMessagesCount=t&&H(t.getUnreadMessagesCount)?t.getUnreadMessagesCount:()=>this.getUnreadMsgsCount(),this._util=(t==null?void 0:t.util)||new Vo(this._settings),this._cssPrefix=this._settings.name,this._currentLocale=this._settings.locale,this._localeText=Object.assign(Object.assign({},this._settings.i18n.en),this._settings.i18n[this._settings.locale]),this._isOpen=!1,this._isExpanded=((a=this._settings.initMessageOptions)===null||a===void 0?void 0:a.sendAt)==="init"||this._settings.openChatOnLoad||this._settings.embedded,this._isInitMessageSent=this._settings.enableHeadless,this._isResizable=!this._settings.embedded&&!this._settings.sidepanel&&this._settings.enableResizableWidget,this._enableDefaultBotResponse=this._settings.enableDefaultClientResponse,this._enableConversationHistory=this._settings.enableLocalConversationHistory&&this._settings.storageType!==Fe.CUSTOM,this._messageOptions={webCore:e,onMessageActionClicked:this._onMessageActionClick},this._currentWidthRange="default",this._settings.enableTabsSync||(this._initBroadcaster=()=>{}),this._settings.threadId&&(this._currentThreadId=this._settings.threadId,this._core.setCurrentThreadId(this._settings.threadId)),this._messageReceivedListener=n=>{var p;if(!Me(n))return;const{endOfTurn:l,messagePayload:c,requestId:m,threadId:h}=n;if(this._canceledRequests.has(m))return;l&&((p=this._cancelResponseComponent)===null||p===void 0||p.hide());const d=!!(h!=null&&h.startsWith(`${Cs.UIWidget}:`));let u;if(d&&(u=this.contextWidgetMap[h]),!c){console.warn("Message Payload Not available");return}if(c.type===f.ExecuteApplicationActionCommand){const b=c;d?u.showFullSizeWidget():this._stopDefaultMessages(!!l),b.actionType===Tt.CUSTOM&&(b.threadId=h),this._eventDispatcher.trigger(b.actionType,b);return}if(d)u.onMessageReceived(n);else{const b=c.type===f.Command&&c.command==="noReply";h!==this._currentThreadId?this._filterMessages(h).then(()=>{b||this._onMessageReceived(n)}):b||this._onMessageReceived(n)}},this._core.on(E.Open,this._onCoreOpen),this._core.on(E.State,this._onChatServerStatusChange),this._core.on(E.MessageReceived,this._messageReceivedListener),this._core.on(E.CoreError,this._onCoreError),this._core.on(E.ASRStart,this._onASRStart),this._core.on(E.ASRStop,this._onASRStop),this._core.on(E.ASRError,this._onASRError),this._core.on(E.ASRResponse,this._onASRResponse),this._core.on(E.ASRVisualData,this._onASRVisualData),this._settings.enableVoiceOnlyMode&&(this._ttsStopListener=()=>this._resumeVoiceMode(),this._core.on(E.TTSStop,this._ttsStopListener)),this._settings.enableBotAudioResponse&&(this._isTTSMute=this._settings.initBotAudioMuted),this._settings.searchBarMode?(this._searchBar=new Il(this._settings,this._util,this,this._eventDispatcher),this._footer=this._searchBar.footer,this._typingIndicator=this._searchBar.typingIndicator,this._scrollToBottom=()=>{},this.updateNotificationBadge=()=>{},this._updateRelativeTimestamp=()=>{}):(this._header=new dl(this._settings,this._util,(r=this._closeChat)===null||r===void 0?void 0:r.bind(this),this.clearConversationHistory.bind(this),this.onToggleNarration.bind(this),this._core,this._showEndConversationDialog.bind(this),this.setHotkeyMap.bind(this),this),this._footer=new na(this._util,this.sendMessage.bind(this),this.uploadFile.bind(this),this._settings,this.getSuggestions.bind(this),this.onSpeechToggle.bind(this),this.shareUserLocation.bind(this),this.sendUserTypingStatusMessage.bind(this),this._eventDispatcher,this,this.setHotkeyMap.bind(this)),this._settings.showTypingIndicator&&(this._typingIndicator=new ao(Z.LEFT,this._settings,this._util)),this._settings.timestampMode==="relative"||this._settings.timestampMode==="default"?this._relativeTimestamp=new sl(this._settings,this._util):this._updateRelativeTimestamp=()=>{}),((i=this._settings.focusOnNewMessage)===null||i===void 0?void 0:i.toLowerCase())!=="action"&&(this._focusMessageFirstAction=()=>{}),this.configureStorage(),this._fetchStorageItems(),this._core.isConnected()&&this._sendInitMessages()}render(){const e=this._settings,s=this._util;typeof window!="undefined"&&(this._appendStyleSheet(),Pm(e.position,s),e.font&&s.updateCSSVar("font",e.font),e.fontFamily&&s.updateCSSVar("font-family",e.fontFamily),e.fontSize&&s.updateCSSVar("font-size",e.fontSize)),e.searchBarMode?this._recentMsgDiv=this._searchBar.render():(this.element=this._createElement(),this._appendWidget(),e.multiLangChat&&this._initMultiLangChat());const t=this._core.getState();this._onChatServerStatusChange(t),t===M.Open&&this._onCoreOpen(),this._configHotkeys(e),e.searchBarMode||this.loadPreviousConversations()}embedInElement(e){const s=document.querySelector(`#${e}`);if(!s)throw new Error("Can not embed chat widget.");this._util.addCSSClass(s,"wrapper",this._settings.theme,"embedded"),this.appendToElement(s)}showChat(){if(!this._isOpen){const e=this._util;e.removeCSSClass(this.element,ma),e.addCSSClass(this.element,fo),e.removeCSSClass(this.chatWidgetDiv,Fs),this._settings.embedded||Se(()=>{e.addCSSClass(this._botButton,Fs)},wo),this._isOpen=!0,this._isExpanded=!0,this.updateNotificationBadge(0),this._scrollToBottom(),this._footer.focusTextArea(),this._sendInitMessages(),this._revertToVoiceInputMode&&(this._resumeVoiceMode(),this._revertToVoiceInputMode=!1)}}isOpen(){return this._isOpen}close(){this.onClose()}onClose(){if(this._isOpen){const e=this._util;this._ttsCancel(),this._footer.getInputMode()===ke.VOICE&&(this._revertToVoiceInputMode=!0,this._suspendVoiceMode()),e.removeCSSClass(this.element,fo),e.addCSSClass(this.element,ma),this._settings.embedded||(e.removeCSSClass(this._botButton,Fs),Se(()=>{e.addCSSClass(this.chatWidgetDiv,Fs),this._botButton.focus()},wo),this.updateNotificationBadge(this._getUnreadMessagesCount())),this._isOpen=!1}}sendExitEvent(){const e={messagePayload:{type:f.CloseSession},userId:this._settings.userId};if(this._settings.delegate&&this._settings.delegate.beforeEndConversation&&H(this._settings.delegate.beforeEndConversation))try{this._settings.delegate.beforeEndConversation(e).then(s=>{s&&this.sendMessage(s,{hidden:!0,delegate:!1}).catch(this._onSendMessageFailure)})}catch(s){this._logger.error(s)}else this.sendMessage(e,{hidden:!0,delegate:!1}).catch(this._onSendMessageFailure);this._isInitMessageSent=!1}updateNotificationBadge(e){var s;this._unreadMsgCount=e,e>0?this._botNotificationBadge&&(this._botNotificationBadge.innerText=`${e}`,this._botButton.append(this._botNotificationBadge)):!((s=this._botNotificationBadge)===null||s===void 0)&&s.parentElement&&this._botNotificationBadge.remove()}onToggleNarration(e){this._toggleNarration(e),this._eventDispatcher.trigger(U.CLICK_AUDIO_RESPONSE_TOGGLE,e)}remove(){var e;super.remove(),(e=this._header)===null||e===void 0||e.remove(),this._core.off(E.Open,this._onCoreOpen),this._core.off(E.State,this._onChatServerStatusChange),this._core.off(E.MessageReceived,this._messageReceivedListener),this._core.off(E.CoreError,this._onCoreError),this._core.off(E.ASRStart,this._onASRStart),this._core.off(E.ASRStop,this._onASRStop),this._core.off(E.ASRError,this._onASRError),this._core.off(E.ASRResponse,this._onASRResponse),this._core.off(E.ASRVisualData,this._onASRVisualData),this._ttsStopListener&&this._core.off(E.TTSStop,this._ttsStopListener),this._settings.embedded&&window.removeEventListener("resize",this._resizeEventListener);const s=this._hotkeysManager;s&&s.remove(),this._settings.enableSpeech&&window.removeEventListener("visibilitychange",this._visibilitychangeEventListener)}clearConversationHistory(e=!1){e?this._clearChatPane(e):(this.clearMessages(this._settings.userId),this._clearChatPane(),this._broadcastAction({type:"actionClearHistory"})),this._lastMessageSenderType=null,this._messageIDs=[],this.skillMessages=[],this._stopDefaultMessages(),this.updateNotificationBadge(0)}clearMessages(e,s){const t=this._settings;if(t.storageType===Fe.CUSTOM){const a=t.conversationHistoryProvider;H(a==null?void 0:a.deleteMessages)?a.deleteMessages({threadId:t.threadId}):this._logger.warn("Can not clear conversation history. Pass conversationHistoryProvider object with deleteMessages function when custom storage is enabled.")}else{const a=`${t.name}-${e}-messages`;(s?window[s]:this._storageService).getItem(a)&&this._storageService.removeItem(a)}}clearAllMessage(){const e=window==null?void 0:window.localStorage,s=(e==null?void 0:e.length)||0;if(s){const t=/oda-chat-.*-messages/g;for(let a=0;a<s;a++){const r=e.key(a);r!=null&&r.match(t)&&e.removeItem(r)}}}setUserInputMessage(e){this._footer.setUserInputText(e)}setUserInputPlaceholder(e){this._footer.setUserInputPlaceholder(e)}getWebViewComponent(){return this._webViewComponent}refreshWebView(e){this._webViewComponent.setProps(e),this._webViewElem.remove(),this._webViewElem=this._webViewComponent.render(),this.chatWidgetDiv.append(this._webViewElem)}orientWidgetAnimation(){const e=this.element,s=Math.floor(window.innerWidth/2),t=e.offsetLeft;t<0?e.style.left="10px":t>window.innerWidth&&(e.style.right="10px"),t<s&&this._util.addCSSClass(e,"pos-left")}updateFullScreenWidth(e){const s=this._settings.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv,t=this._util;if(t.updateCSSVar("--width-full-screen",e),s){const a="default",r="medium",i="size",n=parseInt(e);if(n>=Pl){if(this._currentWidthRange===je)return;const p=this._settings.icons;t.addCSSClass(s,`${je}-${i}`);const l=[...p.avatarBot||p.avatarAgent?["left"]:[],...p.avatarUser?["right"]:[]];t.addCSSClass(this._footer.element,...l),t.removeCSSClass(s,`${r}-${i}`),this._currentWidthRange=je}else if(n>=Dl){if(this._currentWidthRange===r)return;t.addCSSClass(s,`${r}-${i}`),t.removeCSSClass(s,`${je}-${i}`),this._currentWidthRange=r}else{if(this._currentWidthRange===a)return;t.removeCSSClass(s,`${r}-${i}`),t.removeCSSClass(s,`${je}-${i}`),this._currentWidthRange=a}this._footer.updateInputHeight(),this.skillMessages.filter(p=>p instanceof aa).forEach(p=>{p.setCardsScrollAttributes(this._currentWidthRange)}),this._scrollToBottom()}}setHeight(e){const s=this.chatWidgetDiv;s&&!this._settings.sidepanel&&(s.style.height=e,this._settings.height=e)}setWidth(e){const s=this._settings.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv;s&&(s.style.width=e,this._settings.width=e,this.updateFullScreenWidth(e))}setSize(e,s){this.setHeight(s),this.setWidth(e)}setMessagePadding(e){this._setElementStyles("message-bubble",{padding:e}),this._settings.messagePadding=e}setChatBubbleIconHeight(e){this._setElementStyles("typing-cue-wrapper",{height:e}),this._settings.height=e}setChatBubbleIconWidth(e){this._setElementStyles("typing-cue-wrapper",{width:e}),this._settings.width=e}setChatBubbleIconSize(e,s){this._setElementStyles("typing-cue-wrapper",{height:s,width:e}),this._settings.width=e,this._settings.height=s}applyDelegates(e){var s;let t;typeof e=="string"?t=Es(e,(s=this.speechFinalResult)===null||s===void 0?void 0:s.speechId):Et(e)?t=As(e):ms(e)?t=ve(e):t=e;const a=t.messagePayload.type,r=this._settings.delegate,i=r.beforePostbackSend,n=r.beforeSend;return a===f.Postback&&H(i)?t=this._executeSendDelegate(t,i):Ll.includes(a)&&H(n)&&(t=this._executeSendDelegate(t,n)),t}sendMessage(e,s){if(this._activeStreamId)return ht();this._stopDefaultMessages(),!this._settings.enableSpeechAutoSend&&this.speechFinalResult&&typeof e=="string"&&e.toLowerCase().includes(this.speechFinalResult.text.toLowerCase())&&(e=Es(e,this.speechFinalResult.speechId)),this._footer.focusTextArea(),this._ttsCancel(),s=s||{},s.delegate===void 0&&(s.delegate=!0),s.delegate&&this._settings.delegate&&(e=this.applyDelegates(e));const t=this._settings.sdkMetadata?Object.assign({version:G},this._settings.sdkMetadata):{version:G};return e&&this._core.sendMessage(e,{sdkMetadata:t}).then(a=>{var r;this._logger.debug("onMessageSent",e),!Ai(a.messagePayload)&&(this._latestUserRequestId=a.requestId,(r=this._sentMessage)===null||r===void 0||r.call(this,a),this._onSendMessage(),this._isResponseReceived=!1,this._enableDefaultBotResponse&&this._startDefaultResponseTimer(),this.speechFinalResult=null,s!=null&&s.hidden?this._lastMessageSenderType=Ae.User:this._onMessageSent(a),this.getAgentDetails()||this.showTypingIndicator())})}uploadFile(e,s){if(this._activeStreamId)return ht();const t=this._localeText;this._ttsCancel(),this._onSendMessage();const a=new Promise((r,i)=>{var n;if(this._settings.enableHeadless){const p=this._settings.sdkMetadata?Object.assign({version:G},this._settings.sdkMetadata):{version:G};this._core.uploadAttachment(e,{sdkMetadata:p}).then(l=>this._core.sendMessage(this._settings.delegate?this.applyDelegates(l):l,{sdkMetadata:p})).then(r).catch(i)}else{this._scrollToBottom();const p=(n=e.name)===null||n===void 0?void 0:n.replace(/[\s:'"\\/[\]~,.;^`()@#%*+=$&!{}?<>|]/g,""),l=ls({prefix:p}),c=this._util.createDiv();if(c.id=l,this._attachmentDivs.push({divId:l,fileName:e.name}),this._setTimestampHeaderIfNewDate(new Date),this._appendMessageToConversation(c),this._maxSize=this.customFileMaxSize?this.customFileMaxSize:s?s.maxSize:zs,e.size>this._maxSize){this._scrollToBottom();const m=this._maxSize/(Ps*Ps);let h=m.toString();ym(m)||(h=m.toFixed(3));const d=`${e.name} - ${t.uploadFailed}`,u=t.uploadFileSizeLimitExceeded.replace("{0}",h);this._displayUploadError(d,u,l),this._updateRelativeTimestamp(Ae.User),i(new Error(u))}else if(e.size===0){this._scrollToBottom();const m=`${e.name} - ${t.uploadFailed}`,h=t.uploadFileSizeZeroByte;this._displayUploadError(m,h,l),this._updateRelativeTimestamp(Ae.User),i(new Error(h))}else{const m=new Yr(e.name,Z.RIGHT,this._settings,this._util),h=this._settings.sdkMetadata?Object.assign({version:G},this._settings.sdkMetadata):{version:G};this._updateRelativeTimestamp(Ae.User),c.append(m.render()),this._scrollToBottom(),this._core.uploadAttachment(e,{sdkMetadata:h}).then(d=>this._core.sendMessage(this._settings.delegate?this.applyDelegates(d):d,{sdkMetadata:h})).then(d=>{var u;const b=d.messagePayload;b.attachment.title=e.name,c.remove(),this._attachmentDivs=this._attachmentDivs.filter(v=>v.divId!==l),this._isFirstMessage=!1,(u=this._sentMessage)===null||u===void 0||u.call(this,d),this._onMessageSent(d),r(d)}).catch(d=>{this._handleUploadError(e.name,d.message,l),i(d)})}}});return a.catch(r=>{this._logger.error(r)}),a}refreshTTS(){this._header.showTTSButton(!!this._settings.ttsService)}getSuggestions(e){if(this._activeStreamId)return ht();if(!this._settings.enableAutocompleteClientCache||this._settings.enableAutocompleteClientCache&&!this._footer.getSuggestionsValid())return this._core.getSuggestions(e).then(t=>(this._footer.displaySuggestions(t),t)).catch(t=>(this._logger.debug("[getSuggestions] Failed to receive suggestions, reset list:",t),[]));const s=this._filterSuggestions(this._footer.getSuggestions(),e);return this._footer!==null&&this._footer.displaySuggestions(s),Promise.resolve(s)}getUnreadMsgsCount(){return this._unreadMsgCount}getMessages(){const e=this._storageService.getItem(this._chatStorageId);let s=[];if(e)try{s=JSON.parse(e).map(t=>Object.assign({},t))}catch(t){this._logger.error("Failed to parse saved chat.")}return s}getAgentDetails(){return this._agentSession}setAgentDetails(e){this._agentSession=Object.assign(Object.assign({},this._agentSession),e),this._setAgentTypingCue(),this._storageService.setItem(this._agentNameStorageId,JSON.stringify(this._agentSession))}setUserAvatar(e){this._settings.icons.avatarUser=e,this._storageService.setItem(this._userAvatarStorageId,e),document.querySelectorAll(`.${this._cssPrefix}-right .${this._cssPrefix}-message-icon`).forEach(t=>{t.parentElement.replaceWith(this._getAvatar(e,this._localeText.avatarUser))})}_saveMessage(e){if(!Js(e))return;const s=Object.assign({date:Date.now()},e);if(this._messages.push(s),this._settings.storageType===Fe.CUSTOM){const t=this._settings.conversationHistoryProvider;H(t==null?void 0:t.saveMessage)?t.saveMessage(s):this._logger.warn("Can not save conversation history. Pass conversationHistoryProvider object with saveMessage function when custom storage is enabled.")}else if(this._enableConversationHistory){const t=this.getMessages();t.length>=this._settings.messageCacheSizeLimit&&t.splice(0,t.length-(this._settings.messageCacheSizeLimit-1)),t.push(s),this._storageService.setItem(this._chatStorageId,JSON.stringify(t))}}configureStorage(){const e=this._settings,{storageType:s,userId:t}=e;this._enableConversationHistory&&(t?s!==Fe.LOCAL&&s!==Fe.SESSION&&(e.storageType=Fe.LOCAL):e.storageType=Fe.SESSION),this._storageService=new no(e.storageType)}setVoiceRecognitionService(e){this._footer.disableVoiceModeButton(!e,{src:"lang"})}enableSpeechSynthesisService(e){this._header.disableTTSButton(!e)}onShareLocation(){this.shareUserLocation()}setPrimaryChatLanguage(e){this._multiLangChat.setTag(e)}onLanguageUpdate(e,s=!0){var t;const a=this._settings.i18n,r=Object.assign(Object.assign(Object.assign({},a.en),a[this._settings.locale]),a[e]);s&&this._broadcastAction({type:"actionLanguage",tag:e}),this._currentLocale=e,this._botButton.title=r.chatButtonTitle||r.chatTitle,this._header.setLocale(r),this._footer.setLocale(r),this._settings.showTypingIndicator&&this._typingIndicator.updateTypingCueLocale(r.typingIndicator),document.querySelectorAll(`.${this._cssPrefix}-message-icon`).forEach(n=>{const l=n.parentElement.parentElement.className.includes(`${this._cssPrefix}-left`)?r.avatarBot:r.avatarUser;n.localName==="img"?n.alt=l:n.setAttribute("aria-label",l)}),this.refreshWebView({accessibilityTitle:r.webViewAccessibilityTitle,closeButtonLabel:r.webViewClose,errorInfoDismissLabel:r.webViewErrorInfoDismiss,errorInfoText:r.webViewErrorInfoText}),this._multiLangChat&&this._multiLangChat.setLocale(r),this._currTimestampHeaderElement&&(this._currTimestampHeaderElement.textContent=Ys(this._currTimestampHeader,{pattern:this._settings.timestampFormat,locale:e})),this._relativeTimestamp&&this._relativeTimestamp.setLocale(r),this._separator&&(this._separator.innerText=r.previousChats),(t=this._cancelResponseComponent)===null||t===void 0||t.setLocale(r),this._localeText=r}showTypingIndicator(){const e=document.querySelector(`#${this._cssPrefix}-connection-error`);e&&e.remove(),this._settings.showTypingIndicator&&(this._settings.searchBarMode?this._typingIndicator.append(this._recentMsgDiv):(this._typingIndicator.append(this._conversationContainer),this._scrollToBottom()))}hideTypingIndicator(){this._settings.showTypingIndicator&&this._typingIndicator.remove()}showConnectionError(){const s={messagePayload:{type:f.Text,text:ni(this._localeText.connectionFailureMessage),globalActions:[{type:R.Postback,label:this._localeText.connectionRetryLabel}]},source:we.Bot},t=We.fromMessage(this._settings,this._util,s,Object.assign(Object.assign({},this._messageOptions),{onMessageActionClicked:()=>{this._connect()},locale:this._currentLocale}));this.showMessage(`${this._cssPrefix}-connection-error`,t)}showMessage(e,s){var t;if(this._settings.searchBarMode)this._searchBar.showMessage(e,s);else{const a=this._util.wrapMessageBlock(s.render(),this._settings.icons.avatarBot,Z.LEFT);a.id=e,this._conversationContainer.append(a)}!((t=this._typingIndicator)===null||t===void 0)&&t.isVisible()&&this.hideTypingIndicator(),this._scrollToBottom()}showWidget(){this._setVisibility(!0)}hideWidget(){this._setVisibility(!1)}_setVisibility(e){const s=this._settings;if(s.embedded||s.enableHeadless)return;const t=this.chatWidgetWrapper,a=`${this._util.cssPrefix}-none`;t&&t.classList.contains(a)===e&&(t.classList.toggle(a),this._eventDispatcher.trigger(e?U.WIDGET_SHOW:U.WIDGET_HIDE))}_updateDefaultResponse(e){if(this._isFirstMessage=!1,!this._isResponseReceived){const s={source:we.Bot,messagePayload:{type:f.Text,text:e},userId:this._settings.userId,msgId:`${Date.now()}`};this._saveMessage(s),this._ttsSpeak(e),this._renderMessagesAndScroll([s])}}_startDefaultResponseTimer(){const e=this._localeText;this._defaultResponseTimer=Se(()=>{this._isFirstMessage&&this._updateDefaultResponse(e.defaultGreetingMessage),this._defaultResponseInterval=setInterval(()=>{this._updateDefaultResponse(e.defaultWaitMessage)},this._settings.defaultWaitMessageInterval*fs),this._waitMessageClearTimer=Se(()=>{clearInterval(this._defaultResponseInterval)},(this._settings.typingIndicatorTimeout-1)*fs),this._defaultResponseTimer=Se(()=>{this.hideTypingIndicator(),this._updateDefaultResponse(e.defaultSorryMessage)},this._settings.typingIndicatorTimeout*fs)},this._settings.defaultGreetingTimeout*fs)}_updateChannelUserIds(){return be(this,void 0,void 0,function*(){if(this._settings.clientAuthEnabled)try{const a=yield this._core.getAuthToken();this._settings.channelId=a.getClaim("channelId"),this._settings.userId=a.getClaim("userId")}catch(a){return}const{name:e,userId:s}=this._settings,t=`${e}-${s}`;this._chatStorageId=`${t}-messages`,this._agentNameStorageId=`${t}-agent-details`,this._userAvatarStorageId=`${t}-user-avatar`})}_setComponentIds(){this._canceledRequestsStorageId=`${this._settings.userId}-canceled-requests`,this._canceledRequests=new Set(this._getCanceledRequestIdsFromSession()),this._initBroadcaster()}_initMultiLangChat(){const e=this._settings;this._multiLangChat=new ul(e.multiLangChat,{webCore:this._core,chatWidget:this,eventDispatcher:this._eventDispatcher,settings:e,synthesisVoices:e.ttsVoice,storageService:new no(e.storageType),util:this._util},this),this._header.addLanguageSelect(this._multiLangChat)}shareUserLocation(){const e=this._localeText;if(navigator&&navigator.geolocation){const s=new Yr(e.requestLocation,Z.RIGHT,this._settings,this._util);this._appendMessageToConversation(s.render()),this._scrollToBottom(),Ft().then(t=>{const a=ve({location:{latitude:t.latitude,longitude:t.longitude,title:void 0},type:f.Location});s.remove(),this.sendMessage(a).catch(this._onSendMessageFailure)},t=>{let a;switch(t.code){case t.PERMISSION_DENIED:a=e.requestLocationDeniedPermission;break;case t.POSITION_UNAVAILABLE:a=e.requestLocationDeniedUnavailable;break;case t.TIMEOUT:a=e.requestLocationDeniedTimeout;break;default:a=e.requestLocationDeniedPermission}this._showAlertDialog(a,vs),s.remove()})}else this._showAlertDialog(e.requestLocationDeniedUnavailable,vs)}_filterSuggestions(e,s){const t=[];for(const a of e)a.search(new RegExp(s,"i"))>=0&&t.push(a);return t}_handleUploadError(e,s,t){const a=this._localeText,r=`${e} - ${a.uploadFailed}`;let i="";switch(s){case A.UploadMaxSize:i=a.uploadFileSizeLimitExceeded.replace("{0}",this._maxSize.toString());break;case A.UploadZeroSize:i=a.uploadFileSizeZeroByte;break;case A.UploadBadFile:i=a.uploadUnsupportedFileType;break;case A.UploadNetworkFail:i=a.uploadFileNetworkFailure;break;case A.UploadUnauthorized:i=a.uploadUnauthorized}this._displayUploadError(r,i,t)}_executeSendDelegate(e,s){var t;const a=$e(e);let r=$e(e),i;e.messagePayload.type===f.Text&&(!((t=e.sdkMetadata)===null||t===void 0)&&t.speechId)&&(i=(e.messagePayload.text||"").toLowerCase());try{r=s(a)}catch(n){this._logger.error(n)}if(r!=null&&r.messagePayload||(r=null),r&&!Qs(r)&&(this._logger.error("The generated delegate message is invalid. Sending original message instead."),r=e),i&&r)if(r.messagePayload)if(r.messagePayload.type===f.Text){const n=r.messagePayload.text;(n==null?void 0:n.toLowerCase().indexOf(i))<0&&delete r.sdkMetadata}else delete r.sdkMetadata;else delete r.sdkMetadata;return r}_displayUploadError(e,s,t){const a=document.querySelector(`#${t}`);if(a){a.firstElementChild&&a.removeChild(a.firstElementChild),this._attachmentDivs=this._attachmentDivs.filter(n=>n.divId!==t);const r=new Wp(e,s,Z.RIGHT,this._settings,this._util,!0),i=this._settings.icons.error||ga;a.append(r.render(i))}}addHeaderAction(e){this._header.addAction(e)}updateHeaderAction(e){this._header.updateHeaderAction(e)}on(e,s){switch(e){case ge.TTSStart:case ge.TTSStop:this._core.on(e,s);break;default:this._eventDispatcher.bind(e,s)}}off(e,s){switch(e){case ge.TTSStart:case ge.TTSStop:this._core.off(e,s);break;default:this._eventDispatcher.unbind(e,s)}}_createElement(){var e,s,t,a,r,i;const n=this._settings,p=this._util,l=this._localeText,c=p.createDiv(n.embedded?[]:["wrapper",n.theme,...n.enableHeadless?["none"]:[]]);this.chatWidgetDiv=p.createDiv(["widget","flex","col"]),this.chatWidgetDiv.setAttribute("role","region"),this.chatWidgetDiv.setAttribute("aria-labelledby",`${this._cssPrefix}-title`),this._util.setChatWidgetWrapper(c);const m=this._header.render();this.chatWidgetDiv.append(this._header.element),n.embedTopStickyId&&this._addCustomBanner(n.embedTopStickyId,this.chatWidgetDiv,["embed-sticky-top"]),this._chatPane=new hl(p),n.enableCancelResponse&&!n.enableHeadless&&!n.searchBarMode&&(this._cancelResponseComponent=new bl({parent:this._chatPane.element,i18n:this._localeText,domUtil:this._util,onHide:this.onCancelResponseHide,onClick:this.onCancelResponseClick})),this._scrollContent=p.createDiv(["conversation-pane",...n.icons.avatarBot?["bot-icon"]:[],...n.icons.avatarUser?["user-icon"]:[]]),n.conversationBeginPosition==="bottom"&&(this._scrollContent.style.marginTop="auto"),n.embedTopScrollId&&this._addCustomBanner(n.embedTopScrollId,this._scrollContent,["embed-scroll-top"]),this._conversationContainer=p.createDiv(["conversation-container"]),this._conversationContainer.setAttribute("role","log"),this._conversationContainer.setAttribute("aria-live","polite"),this._conversationContainer.setAttribute("aria-atomic","false"),this._scrollContent.append(this._conversationContainer),this._chatPane.element.append(this._scrollContent),n.embedBottomScrollId&&this._addCustomBanner(n.embedBottomScrollId,this._chatPane.element,["embed-scroll-bottom"]),n.embedBottomStickyId&&this._addCustomBanner(n.embedBottomStickyId,this.chatWidgetDiv,["embed-sticky-bottom"]),this._footer.render(),(s=n.webViewConfig).accessibilityTitle||(s.accessibilityTitle=l.webViewAccessibilityTitle),(t=n.webViewConfig).closeButtonLabel||(t.closeButtonLabel=l.webViewClose),(a=n.webViewConfig).errorInfoDismissLabel||(a.errorInfoDismissLabel=l.webViewErrorInfoDismiss),(r=n.webViewConfig).errorInfoText||(r.errorInfoText=l.webViewErrorInfoText),(i=n.webViewConfig).closeButtonIcon||(i.closeButtonIcon=n.icons.close),this._webViewComponent=new Tl(n.webViewConfig,p,n),this._webViewElem=this._webViewComponent.render(),this.chatWidgetDiv.append(this._chatPane.element,this._footer.element,this._webViewElem);const h=this._webViewComponent,d=`${this._cssPrefix}-webview`;if(this._webviewLinkHandler={target:d,onclick:function(){h.open(this.href)}},n.linkHandler&&n.linkHandler.target===d&&(n.linkHandler=this._webviewLinkHandler),this._messageOptions={webviewLinkHandler:this._webviewLinkHandler,webCore:this._core,onMessageActionClicked:this._onMessageActionClick},c.append(this.chatWidgetDiv),n.embedded)this._isOpen=!0,p.addCSSClass(c,"open");else{const u=n.icons.launch||(n.colors&&n.colors.branding?yo.replace("#025e7e",n.colors.branding):yo),b="button",v=p.createIconButton({css:[b],icon:u,iconCss:[`${b}-icon`],title:l.chatButtonTitle||l.chatTitle});v.classList.remove(`${this._cssPrefix}-icon`),this._botButton=v,this._botButton.onclick=(e=this._openChat)===null||e===void 0?void 0:e.bind(this),this._botNotificationBadge=p.createTextDiv(["notification-badge"]),c.append(v),this._accessKeyElementsMap.set("launch",v),n.enableDraggableButton&&new No(this._util,v).makeElementDraggable(),n.enableDraggableWidget&&new No(this._util,m,this.chatWidgetDiv).makeElementDraggable(),n.openChatOnLoad||p.addCSSClass(c,ma),p.addCSSClass(this.chatWidgetDiv,Fs)}if(this.chatWidgetWrapper=c,n.sidepanel){const u=b=>{const v=document.body.clientWidth-b.x;if(p.addCSSClass(this.chatWidgetWrapper,"drag"),v<=vo?document.body.style.cursor="w-resize":v>=_o?document.body.style.cursor="e-resize":document.body.style.cursor="col-resize",v>=vo&&v<=_o){const k=`${v}px`;this.chatWidgetWrapper.style.width=k,this.updateFullScreenWidth(k)}b.preventDefault()};c.addEventListener("mousedown",b=>{b.offsetX<4&&document.addEventListener("mousemove",u,!1)},!1),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",u,!1),p.removeCSSClass(this.chatWidgetWrapper,"drag"),this.chatWidgetWrapper.style.removeProperty("cursor"),document.body.style.removeProperty("cursor")},!1)}else this._isResizable&&new og(this.chatWidgetDiv,this.updateFullScreenWidth.bind(this),p).makeWidgetResizable();if(this._settings.enableSpeech){let u=this._footer.getInputMode(),b=!1;this._visibilitychangeEventListener=()=>{u=this._footer.getInputMode(),this._isOpen&&(document.hidden&&u===ke.VOICE?(b=!0,this._suspendVoiceMode()):!document.hidden&&b&&(this._resumeVoiceMode(),b=!1))},window.addEventListener("visibilitychange",this._visibilitychangeEventListener)}return this.chatWidgetWrapper}_appendStyleSheet(){const e=this._settings;e.disableInlineCSS||this._util.insertStyleSheet(vl,`${this._cssPrefix}-redwood-styles`),Dm(e.colors,this._util)}_appendWidget(){var e;const s=this._settings,t=this._util;if(s.embedded)try{const a=document.querySelector(`#${s.targetElement}`);this.embedInElement(s.targetElement),this.updateFullScreenWidth(`${a.clientWidth}px`),window.addEventListener("resize",$s(()=>{this.updateFullScreenWidth(`${a.clientWidth}px`)},xo))}catch(a){this._logger.error("Target Element not specified",a)}else if(s.sidepanel)try{const a=document.querySelector(`#${s.targetElement}`),r=a.parentNode,i=t.createDiv(["sidepanel-content-wrapper"]);r.replaceChild(i,a),t.addCSSClass(this.chatWidgetDiv,"sidepanel"),i.append(a,this.chatWidgetWrapper)}catch(a){this._logger.error("Target Element not specified",a)}else{try{this.appendToElement(document.body)}catch(i){this._logger.error("Initialisation failed as page is not completely loaded. Make sure to initialise the SDK after document.body is available.");return}Se(()=>{this.orientWidgetAnimation()},0),window.addEventListener("resize",$s(()=>{this.orientWidgetAnimation()},xo));const a=s.width,r=s.height;a&&this.setWidth(a),r&&this.setHeight(r),s.openChatOnLoad&&Se((e=this._openChat)===null||e===void 0?void 0:e.bind(this),0)}}_appendMessageToConversation(e){var s;this._settings.searchBarMode||this._conversationContainer.append(e),!((s=this._typingIndicator)===null||s===void 0)&&s.isVisible()&&(this.hideTypingIndicator(),this.showTypingIndicator())}_scrollToBottom(){const e=this._chatPane.element;Se(()=>{e&&(e.scrollTop=e.scrollHeight)},_e.CHAT_SCROLL_DELAY)}_renderMessagesAndScroll(e,s=!0){if(!(e!=null&&e.length))return Promise.resolve();const t=e.filter(i=>Js(i)),a=this._settings.threadId,r=t.filter(i=>i.threadId&&a?i.threadId===a:!0);return r.length?new Promise(i=>{const n={isFresh:s};this._settings.clientAuthEnabled&&this._settings.enableAttachmentSecurity?this._core.getAuthToken().then(p=>{n.authToken=p.token,this._renderMessages(r,n),i(),this._scrollToBottom()}).catch(()=>{this._renderMessages(r,n),i(),this._scrollToBottom()}):(this._renderMessages(r,n),i(),this._scrollToBottom())}):Promise.resolve()}_getAgentNameDiv(e,s){var t,a,r,i;let n;if(Me(e)){let p="";if(e.source===we.Agent){const l=this._settings.icons;!((t=e.messagePayload.channelExtensions)===null||t===void 0)&&t.agentSession||(e.messagePayload.channelExtensions?e.messagePayload.channelExtensions.agentSession=this._agentSession:e.messagePayload.channelExtensions={agentSession:this._agentSession}),!this._agentSession.avatarImage&&l.avatarBot&&s.append(this._getAgentInitialsIcon()),p=this._agentSession.name}else e.source===we.Bot&&(!((a=e.messagePayload.channelExtensions)===null||a===void 0)&&a.agentSession)&&(p=((r=e.messagePayload.channelExtensions)===null||r===void 0?void 0:r.agentSession).name);p&&(n=this._util.createTextDiv(["agent-name"]),n.title=p,n.innerHTML=p,n.setAttribute("aria-hidden","true"),!((i=this._agentSession)===null||i===void 0)&&i.nameTextColor&&(n.style.color=this._agentSession.nameTextColor))}return n}_getAgentInitialsIcon(){const e=this._agentSession||{},s=e.name.split(" ").filter(a=>a);let t=s[0][0];return s.length>1&&(t+=s[s.length-1][0]),this._getAvatar(t.toUpperCase(),e.name,!0)}_setAgentTypingCue(){if(this._settings.showTypingIndicator){const e=this._agentSession||{},s=this._settings.icons,t=this._localeText;s.avatarBot&&(!e.avatarImage&&e.name?this._typingIndicator.updateTypingCueIcon(this._getAgentInitialsIcon()):this._typingIndicator.updateTypingCueIcon(this._getAvatar(e.avatarImage||s.avatarBot,t.avatarAgent||t.avatarBot)))}}_getAvatar(e,s,t=!1){const a=this._util,r=a.createDiv(["icon-wrapper",...t?["agent-avatar"]:[]]),i=this._agentSession||{};let n;return t?(n=a.createTextDiv(["agent-icon"]),n.innerText=e,this._currentWidthRange===je&&a.addCSSClass(this._footer.element,"left"),i.avatarTextColor&&(n.style.color=i.avatarTextColor),i.avatarBackgroundColor&&(r.style.background=i.avatarBackgroundColor)):n=a.createImageIcon({icon:e,iconCss:["message-icon"]}),r.append(n),r.setAttribute("aria-label",s),r}_getTime(e){const s=e?new Date(e):new Date,t=Ys(s,{pattern:this._settings.timestampFormat,locale:this._currentLocale}),a=["message-date"],r=this._util.createTextDiv(a);return r.setAttribute("aria-live","off"),r.setAttribute("aria-hidden","true"),r.innerText=`${t}`,r}_renderMessages(e,s){var t;const{isFresh:a,authToken:r}=s,i=this._settings,n=this._util,p=Object.assign(Object.assign({},this._messageOptions),{locale:this._currentLocale,isFresh:a});r!=null&&r.length&&(p.authToken=r,p.uri=i.URI);const l=H((t=i.delegate)===null||t===void 0?void 0:t.onMessage)&&i.delegate.onMessage;e.forEach(c=>{var m,h,d,u,b,v,k,x,_;const C=Me(c);if(C){const F=ro(c);if(this._messageIDs.includes(F))return;this._messageIDs.push(F)}const g=We.fromMessage(i,n,c,p);if(!g)return;if(l){l(g.render(),{isNewMessage:a,isUserMessage:!C});return}if(g instanceof ia){this._textStreamMessage=c;const F=c.messagePayload;switch(F.streamState){case"start":this._processStreamStart(F,g);break;case"running":this._processStreamUpdate(F);return;case"end":this._processStreamUpdate(F);return}}else this._activeStreamId&&this._disposeStream();const w=C?Ae.Skill:Ae.User,y=this._shouldReplaceMessage(c.messagePayload,w),D=this._shouldAppendMessage(c.messagePayload);if((y||D)&&this._stripUserMessagesUntilLastSkillMessage(),D){const F=this.skillMessages.at(-1);if(F){this._latestSkillMessages.push(F),F.append(g),this._enablePastActions([F]),g.msgId=c.msgId,this._lastMessageSenderType=w,this._lastMessageTime=Date.now(),this._lastMessageHasGlobalAction=((m=c.messagePayload.globalActions)===null||m===void 0?void 0:m.length)!==0,this._lastMessageSenderName=((d=(h=c.messagePayload.channelExtensions)===null||h===void 0?void 0:h.agentSession)===null||d===void 0?void 0:d.name)||"",this._lastMessageSenderSource=c.source,this._focusMessageFirstAction(g),this._updateRelativeTimestamp(Ae.Skill);return}}const Y=y||this._shouldMergeMessages(c,w);let N;if(g.msgId=c.msgId,this._lastMessageSenderType=w,this._lastMessageTime=Date.now(),this._lastMessageHasGlobalAction=c.messagePayload.globalActions&&c.messagePayload.globalActions.length!==0,this._lastMessageSenderName=((b=(u=c.messagePayload.channelExtensions)===null||u===void 0?void 0:u.agentSession)===null||b===void 0?void 0:b.name)||"",C&&(this._lastMessageSenderSource=c.source),Y||(N=n.createDiv(["message-block","flex"]),this._lastMessageBlock=N),km(g)&&(this._pendingFeedback=g),C)this._isNewMessage&&this._onReceiveMessage(g),this.skillMessages.push(g),c.source===we.Agent?(!((v=c.messagePayload.channelExtensions)===null||v===void 0)&&v.agentName&&this.setAgentDetails({name:c.messagePayload.channelExtensions.agentName,avatarImage:i.icons.avatarAgent,nameTextColor:null,avatarTextColor:null,avatarBackgroundColor:null}),!((k=c.messagePayload.channelExtensions)===null||k===void 0)&&k.agentSession&&this.setAgentDetails(c.messagePayload.channelExtensions.agentSession)):(this._storageService.removeItem(this._agentNameStorageId),this._agentSession=null),this._focusMessageFirstAction(g);else if(this._pendingFeedback){const F=c;if(F.messagePayload.type===f.Text||F.messagePayload.type===f.Postback){const os=F.messagePayload;this._pendingFeedback.highlightRating(os.text)}this._pendingFeedback=null}if(i.searchBarMode){this._searchBar.renderMessage(c,g,y);return}const De=i.useCreatedOnTimestamp&&c.createdOn?new Date(c.createdOn):c.date?new Date(c.date):new Date;this._setTimestampHeaderIfNewDate(De),N&&(this._createMessageBlock(c,N),this._appendMessageToConversation(N));const te=(x=this._lastMessageBlock)===null||x===void 0?void 0:x.querySelector('[class*="message-list"]'),Be=this._renderMessage(c,g,te);if(Be&&te){if(c.messagePayload.type===f.Card){const F=te.querySelectorAll('[class*="message-bubble"]');F.length&&F[F.length-1].classList.add(`${this._cssPrefix}-before-card`)}y&&te.lastElementChild?(this._ttsCancel(),this._isOpen||this.updateNotificationBadge(--this._unreadMsgCount),(_=te.lastElementChild)===null||_===void 0||_.replaceWith(Be),this._latestSkillMessages.push(g)):te.append(Be),g instanceof aa&&g.setCardsScrollAttributes(this._currentWidthRange)}this._updateRelativeTimestamp(w)})}_processStreamStart(e,s){const{streamId:t}=e;console.debug(`[stream]: Starting stream for ID: ${t}.`),this._activeStreamId=t,this._streamIdComponentMap.set(t,s),this._footer.disable(),this._resetAndRestartStreamTimer()}_processStreamUpdate(e){const{streamId:s,streamState:t}=e,a=this._streamIdComponentMap.get(s);if(!a){console.debug(`[stream]: Discarded message for inactive stream: ${s}:${t}.`),this._disposeStream();return}switch(a.update(e),t){case"running":console.debug(`[stream]: Running stream for ID: ${s}.`),this._resetAndRestartStreamTimer(),this._activeStreamId=s;break;case"end":console.debug(`[stream]: End stream for ID: ${s}.`),this._disposeStream();break}}_resetAndRestartStreamTimer(){clearTimeout(this._runningStreamTimer),this._runningStreamTimer=Se(this._processStreamTimeout,this._streamChunkWaitTimeout)}_shouldAppendMessage(e){var s;const t=(s=e.channelExtensions)===null||s===void 0?void 0:s.appendMessage;return t==="True"||t}_shouldReplaceMessage(e,s){var t;if(s===Ae.Skill){const a=e.channelExtensions,r=a==null?void 0:a.replaceMessage,i=(t=a==null?void 0:a.websdk)===null||t===void 0?void 0:t.replaceMessage;return Qa(r)||Qa(i)}return!1}_shouldMergeMessages(e,s){var t,a;if(!(Date.now()-this._lastMessageTime<Qc))return!1;if(Me(e)&&e.source===we.Agent&&(!((t=e.messagePayload.channelExtensions)===null||t===void 0)&&t.agentSession)){const i=(a=e.messagePayload.channelExtensions)===null||a===void 0?void 0:a.agentSession;return this._lastMessageSenderName===i.name}return this._lastMessageSenderType===s&&(!Me(e)||e.source===this._lastMessageSenderSource)&&!this._lastMessageHasGlobalAction}_stripUserMessagesUntilLastSkillMessage(){var e;if(!(!((e=this._conversationContainer)===null||e===void 0)&&e.lastElementChild))return;const{name:s}=this._settings,t=`${s}-message-block`,a=`${s}-left`;let r=this._conversationContainer.lastElementChild;for(r&&(r=r.previousElementSibling);r;){const i=r.previousElementSibling;if(r.classList.contains(t)){if(r.classList.contains(a)){this._lastMessageBlock=r;break}r.remove()}r=i}}_createMessageBlock(e,s){const t=this._settings.icons,a=this._localeText,r=this._util,i=this._agentSession||{};let n,p,l;if(Me(e)){if(n=this._getAgentNameDiv(e,s),e.source===we.Agent?(p=t.avatarBot&&(i.avatarImage||!i.name)&&(i.avatarImage||t.avatarAgent||t.avatarBot),l=a.agentMessage.replace("{0}",`${i.name||a.agent}`)):(this._lastMessageSenderSource===we.Agent&&this._settings.showTypingIndicator&&this._typingIndicator.resetTypingCueIcon(),p=t.avatarBot,l=a.skillMessage),r.addCSSClass(s,"left"),p){this._currentWidthRange===je&&r.addCSSClass(this._footer.element,"left");const d=this._getAvatar(p,e.source===we.Agent&&a.avatarAgent||a.avatarBot);d.style.marginTop=n&&"16px",s.append(d)}}else r.addCSSClass(s,"right"),l=a.userMessage,t.avatarUser&&(this._currentWidthRange===je&&r.addCSSClass(this._footer.element,"right"),s.append(this._getAvatar(t.avatarUser,a.avatarUser)));const c=r.createDiv(["messages-wrapper","flex","col"]);n&&c.append(n);const m=this._util.createTextSpan(["screen-reader-only"]);m.innerText=l;const h=r.createDiv(["message-list","flex","col"]);if(c.append(m,h),this._settings.timestampMode==="absolute"){const d=this._settings.useCreatedOnTimestamp&&e.createdOn?new Date(e.createdOn).getTime():e.date,u=this._getTime(d);c.append(u)}s.append(c)}_renderMessage(e,s,t){const a=this._settings.delegate;if(a&&a.render){const r=this._util.createDiv(["message"]);if(r.id=e.msgId,r.lang=this._currentLocale,t.append(r),a.render(e))return null;r.remove()}return s.render()}_setTimestampHeaderIfNewDate(e){this._settings.timestampHeaderMode!=="none"&&(ki(this._currTimestampHeader,e)||(this._currTimestampHeader=new Date(e),this._appendMessageToConversation(this._createTimestampHeader(this._currTimestampHeader))))}_createTimestampHeader(e,s=!0){const t=this._util,a=t.createDiv(["timestamp-container"]),r=t.createTextDiv(["timestamp-header"]),i={pattern:this._settings.timestampHeaderFormat,locale:this._currentLocale};if(r.textContent=this._settings.timestampHeaderMode==="relative"?gi(e,i):Ys(e,i),this._currTimestampHeaderElement=r,a.append(r),s){const n=t.createElement("hr",["conversation-separator"],!1);a.append(n)}return a}_updateRelativeTimestamp(e){this._relativeTimestampElement||(this._relativeTimestampElement=this._relativeTimestamp.render()),this._relativeTimestampElement.remove(),this._relativeTimestamp.refresh(e),this._appendMessageToConversation(this._relativeTimestampElement)}_focusMessageFirstAction(e){e.hasActions()&&Se(()=>{e.focusFirstAction()},290)}_addCustomBanner(e,s,t){const a=document.querySelector(`#${e}`);if(a){const r=this._util.createDiv(t);r.append(a),s.append(r)}else this._logger.error(`Could not find element with ID '${e}'. No element embedded to the chat conversation pane.`)}onSpeechToggle(e){this._ttsCancel(),this._eventDispatcher.trigger(U.CLICK_VOICE_TOGGLE,e),this._toggleSpeech(e)}_suspendVoiceMode(){this._toggleSpeech(!1)}_resumeVoiceMode(){this._toggleSpeech(!0)}_toggleSpeech(e){const s=this._localeText;this._settings.enableSpeech&&(e?(this._hideAlertDialog(),this._settings.speechLocale&&!Na(this._settings.speechLocale)?this._showAlertDialog(s.errorSpeechUnsupportedLocale,vs):this._core.startRecognition().catch(this._onASRError)):(this._core.stopRecognition(),this._footer.setVoiceRecording(!1)))}_onSpeechRecognition(e){if(e)switch(e.type){case"partial":let s=e.text;s.length>0&&(this.speechFinalResult&&(s=`${this.speechFinalResult.text} ${s}`),this._footer.setUserInputText(s));break;case"final":let t=e.text;t.length>0?(this.speechFinalResult&&(t=`${this.speechFinalResult.text} ${t}`),this._footer.setUserInputText(t),this._settings.enableSpeechAutoSend?Se(()=>{const a=Es(t,e.requestId);this.sendMessage(a).then(()=>{var r;this._footer.setUserInputText(""),(r=this._searchBar)===null||r===void 0||r.openPopup()}).catch(this._onSendMessageFailure)},zl):this.speechFinalResult={speechId:e.requestId,text:t}):this.speechFinalResult&&this._footer.setUserInputText(this.speechFinalResult.text);break;case"error":this._onASRError(new Error(e.text));break}}_disablePastActions(e){switch(this._settings.disablePastActions){case"all":e.forEach(s=>{s.disableActions()});break;case"postback":e.forEach(s=>{s.disablePostbacks()})}}_enablePastActions(e){switch(this._settings.disablePastActions){case"all":e.forEach(s=>{s.enableActions()});break;case"postback":e.forEach(s=>{s.enablePostbacks()})}}_onLoadPreviousMessages(){this._disablePastActions(this.skillMessages)}_onReceiveMessage(e){this._settings.disablePastActions!=="none"&&this._latestSkillMessages.push(e)}_onSendMessage(){var e;this._disablePastActions(this._latestSkillMessages),this._latestSkillMessages=[],(e=this._cancelResponseComponent)===null||e===void 0||e.show()}_onConnection(){(this._settings.disablePastActions==="none"?this.skillMessages:this._latestSkillMessages).forEach(s=>{s.enablePostbacks()})}_onDisconnection(){(this._settings.disablePastActions==="none"?this.skillMessages:this._latestSkillMessages).forEach(s=>{s.disablePostbacks()})}_clearChatPane(e=!1){var s;const{searchBarMode:t}=this._settings,a=t?this._recentMsgDiv:this._conversationContainer;let r=!1;for(t&&this._searchBar.clearInteraction(),!((s=this._typingIndicator)===null||s===void 0)&&s.isVisible()&&(r=!0,this.hideTypingIndicator());a.firstChild;)a.removeChild(a.lastChild);r&&this.showTypingIndicator(),this._isFirstMessage=!0,this._currTimestampHeader=null,this._ttsCancel(),e?this._isFilterClear=!0:this._eventDispatcher.trigger(U.CLICK_ERASE)}_initBroadcaster(){const{userId:e,channelId:s}=this._settings;bo&&(this._stopBroadcaster(),this._broadcaster=new bo(`${e}-${s}`),this._broadcaster.onmessage=this._onBroadcastMessage.bind(this))}_stopBroadcaster(){this._broadcaster&&(this._broadcaster.close(),this._broadcaster=null)}_broadcast(e){if(this._broadcaster){const s={type:"message",message:e};if(Me(e)){const t=ro(e);if(this._messageIDs.includes(t))return;s.digest=t}this._broadcaster.postMessage(s)}}_broadcastAction(e){this._broadcaster&&this._broadcaster.postMessage(e)}_onBroadcastMessage(e){var s,t,a,r;const i=e.data;switch(i.type){case"message":const n=i.message.messagePayload;if(n.type===f.Status){const p=n;p.status==="RESPONDING"?this.showTypingIndicator():p.status==="LISTENING"&&this.hideTypingIndicator();return}else if(n.type===f.SessionClosed){(s=this._handleSessionEnd)===null||s===void 0||s.call(this);return}else if(i.digest){if(this._messageIDs.includes(i.digest))return;(t=this._receivedMessage)===null||t===void 0||t.call(this,i.message)}else(a=this._sentMessage)===null||a===void 0||a.call(this,i.message),this._onSendMessage(),this.showTypingIndicator();this._settings.searchBarMode||this.hideTypingIndicator(),this._renderMessagesAndScroll([i.message]);break;case"actionClearHistory":this._clearChatPane();break;case"actionLanguage":(r=this._multiLangChat)===null||r===void 0||r.setTag(i.tag,!1);break}}_showEndConversationDialog(){if(this._settings.wcfsEnableEndConversationButtonToClose&&this._core.getState()===M.Closed)this._handleSessionEnd();else{const e=this._localeText;this._hideAlertDialog();const s=new Cr({title:e.endConversationConfirmMessage||"",description:e.endConversationDescription||"",parent:this.chatWidgetDiv,domUtil:this._util,actions:[{label:e.noText,handler:this._hideAlertDialog.bind(this)},{label:e.yesText,handler:this._endConversation.bind(this),type:"filled"}]});s.open(),this._alertDialog=s}}_endConversation(){this.sendExitEvent(),this._hideAlertDialog()}_showAlertDialog(e,s,t=1e4){if(this._settings.searchBarMode)return;this._hideAlertDialog();const a=new Cr({title:e,icon:s,parent:this._settings.searchBarMode?this._recentMsgDiv:this.chatWidgetDiv,domUtil:this._util,fallbackFocus:()=>{this._footer.focusTextArea()},showDismiss:!0,autoDismiss:!0,autoDismissTimeout:t,dismissLabel:this._localeText.webViewErrorInfoDismiss,modeless:!0});a.open(),this._alertDialog=a}_hideAlertDialog(){this._alertDialog&&(this._alertDialog.close(),this._alertDialog=void 0)}_stopDefaultMessages(e=!0){clearTimeout(this._defaultResponseTimer),clearInterval(this._defaultResponseInterval),clearTimeout(this._waitMessageClearTimer),this._settings.showTypingIndicator&&(e?(this.hideTypingIndicator(),this._typingIndicator.setAutoTimeout(!0),this._isTTSMute&&this._settings.enableVoiceOnlyMode&&this._resumeVoiceMode()):(this._typingIndicator.setAutoTimeout(!1),this.showTypingIndicator()))}_onMessageReceived(e){var s,t;const r=this._settings.delegate;if(this._logger.debug("onMessageReceived",e),this._scrollToBottom(),this._isResponseReceived=!0,this._isFirstMessage=!1,this._settings.enableDefaultClientResponse&&(e.source===we.Agent?this._enableDefaultBotResponse=!1:this._enableDefaultBotResponse||(this._enableDefaultBotResponse=!0)),e){if(r&&r.beforeDisplay&&H(r.beforeDisplay)&&Ji(e)){let i=$e(e);try{i=r.beforeDisplay(i)}catch(n){this._logger.error(n)}if(!i)return;Qs(i)?e=i:this._logger.error("The generated delegate message is invalid. Displaying original message instead.")}switch((s=this._receivedMessage)===null||s===void 0||s.call(this,e),this._broadcast(e),e.messagePayload.type){case f.Status:{const i=e.messagePayload;i.status==="RESPONDING"?this.showTypingIndicator():i.status==="LISTENING"&&this.hideTypingIndicator();break}case f.SessionClosed:{(t=this._handleSessionEnd)===null||t===void 0||t.call(this);break}case f.TextStream:{switch(this._renderMessagesAndScroll([e]),e.messagePayload.streamState){case"start":this._isOpen||this.updateNotificationBadge(++this._unreadMsgCount);break;case"end":this._ttsSpeak(e),this._saveMessage(e);break}break}default:this._renderMessagesAndScroll([e]),this._ttsSpeak(e),this._saveMessage(e),this._isOpen||this.updateNotificationBadge(++this._unreadMsgCount)}this._stopDefaultMessages(!!e.endOfTurn)}}_onMessageSent(e){this._saveMessage(e),this._scrollToBottom(),e&&(this._broadcast(e),e.messagePayload&&!Ml.includes(e.messagePayload.type)&&(this._isOpen||this.updateNotificationBadge(++this._unreadMsgCount),this._renderMessagesAndScroll([e])))}_toggleNarration(e){e||this._ttsCancel(),this._isTTSMute=!e}_filterMessages(e){const s=this._messages.filter(t=>t.threadId===e);return this._currentThreadId=e,this._core.setCurrentThreadId(e),this.clearConversationHistory(!0),this._renderPreviousMessages(s,!1)}_fetchStorageItems(){this._updateChannelUserIds().then(()=>{const e=this._storageService.getItem(this._userAvatarStorageId);e&&(this._settings.icons.avatarUser=e);const s=this._storageService.getItem(this._agentNameStorageId);s&&(this._agentSession=JSON.parse(s),this._setAgentTypingCue())})}_loadMessages(e){const s=this._settings.threadId;this._messages=e.filter(r=>Js(r));const t=this._messages,a=s?t.filter(r=>r.threadId===s):t;return this._renderPreviousMessages(a)}loadPreviousConversations(){return be(this,void 0,void 0,function*(){const e=this._settings;if(e.storageType===Fe.CUSTOM){const s=e.conversationHistoryProvider;H(s==null?void 0:s.getMessages)?s.getMessages({threadId:e.threadId}).then(t=>{this._loadMessages(t.messages)}).catch(t=>this._logger.error("Failed to fetch conversation history with provider.",t)):this._logger.warn("Can not load conversation history. Pass conversationHistoryProvider object with getMessages function when custom storage is enabled.")}else e.enableLocalConversationHistory&&(this._settings.clientAuthEnabled&&!this._chatStorageId?this._updateChannelUserIds().then(()=>{this._loadMessages(this.getMessages())}):this._loadMessages(this.getMessages()));Promise.resolve()})}_renderPreviousMessages(e){return be(this,arguments,void 0,function*(s,t=!0){if(s.length)return this._isNewMessage=!1,this._renderMessagesAndScroll(s.slice(),!1).then(()=>{this._isNewMessage=!0,!t&&this._lastMessageSenderType===Ae.Skill?this._disablePastActions(this.skillMessages.slice(0,this.skillMessages.length-1)):this._onLoadPreviousMessages(),!this._settings.searchBarMode&&(t||this._isFilterClear)&&(this._relativeTimestamp&&(this._relativeTimestamp.setRelativeTime(new Date(s[s.length-1].date)),this._relativeTimestampElement=this._relativeTimestamp.render(),this._appendMessageToConversation(this._relativeTimestampElement)),this._settings.showPrevConvStatus&&(this._separator=this._util.createTextDiv(["hr","flex"]),this._separator.innerText=this._localeText.previousChats,this._appendMessageToConversation(this._separator)),this._isFilterClear&&(this._isFilterClear=!1))})})}_sendInitMessages(){var e;if(this._core.isConnected()&&this._isExpanded&&(this._multiLangChat&&(this._multiLangChat.disableComponent(!1),this._multiLangChat.initLanguage()),!this._isInitMessageSent)){const s=this._settings.initUserProfile;if(s){const t=this._settings.sdkMetadata?Object.assign({version:G},this._settings.sdkMetadata):{version:G};this._core.updateUser(s,{sdkMetadata:t}).then(()=>{this._isInitMessageSent=!0}).catch(a=>{this._logger.error("[sendInitMessages] Failed to update user profile:",a)})}if(this._settings.initUserHiddenMessage){const t=this._settings.initUserHiddenMessage;this.sendMessage(t,{hidden:!0,delegate:!1}).then(()=>{this._isInitMessageSent=!0}).catch(this._onSendMessageFailure)}if(!((e=this._settings.deviceToken)===null||e===void 0)&&e.length){const t=ai();this._core.sendDeviceToken(this._settings.deviceToken,this._settings.deviceType||t).then(()=>{this._isInitMessageSent=!0}).catch(a=>{this._logger.error("[sendInitMessages] Failed to send device token:",a)})}}}_ttsSpeak(e){this._isTTSMute||this._core.speakTTS(e,this._localeText)}_ttsCancel(){this._core.cancelTTS()}sendUserTypingStatusMessage(e,s){this.getAgentDetails()&&this._core.sendUserTypingStatus(e,s).catch(t=>{this._logger.error("[sendUserTypingStatusMessage] Failed to send user typing status:",t)})}_configHotkeys(e){if(e.hotkeys){const s=new pl(e);s.setWidget(this.chatWidgetDiv);const t=e.hotkeys;Object.keys(t).forEach(a=>{const r=this._accessKeyElementsMap.get(a);r&&s.add(t[a],r,a!=="launch")}),this._hotkeysManager=s}}_setElementStyles(e,s){const t=document.querySelectorAll(`.${this._cssPrefix}-${e}`);for(const a of t)for(const[r,i]of Object.entries(s))a.style[r]=i}_saveCanceledRequestIdsToSession(){try{sessionStorage.setItem(this._canceledRequestsStorageId,Array.from(this._canceledRequests).toString())}catch(e){this._logger.warn("Failed to save canceled requests in session",e)}}_getCanceledRequestIdsFromSession(){try{const e=sessionStorage.getItem(this._canceledRequestsStorageId);return e?e.split(","):[]}catch(e){return this._logger.warn("Failed to save canceled requests in session",e),[]}}_triggerTextStreamEnd(){if(!this._textStreamMessage)return;const e=$e(this._textStreamMessage);e.msgId=ls({alphanumeric:!0}),e&&Me(e)&&(e.messagePayload.text=this._streamIdComponentMap.get(this._activeStreamId).freeze(),e.messagePayload.streamState="end",e.endOfTurn=!0,this._onMessageReceived(e))}setHotkeyMap(e,s){this._accessKeyElementsMap.set(e,s)}}const ht=()=>Promise.reject(Error("TextStreamProgress")),V="none",Bs="full-size",Ol=3e3;class Fl extends He{constructor(e,s,t,a,r,i,n,p,l){super(),this._settings=e,this._utils=s,this._elementId=t,this._appContext=a,this._autoShow=r,this._contextWidgetMap=i,this._core=n,this._widgetComponent=p,this._eventDispatcher=l,this._logger=new O("ContextualWidgetComponent"),this._isReset=!1,this._onMessageActionClicked=v=>{switch(v.type){case R.Postback:v.getPayload().then(x=>{const _=x;_!=null&&_.generate?this._sendUpdateContext(Object.assign(Object.assign({},ua(_.fieldInputParameters)),_.additionalInputParameters)):_!=null&&_.showMore?this.showFullSizeWidget():this.sendMessage(As({postback:_,text:v.label,type:f.Postback}))});break;case R.SubmitForm:const k=v.messageComponent;if(!k.validateForm())break;v.getPayload().then(x=>{const _={postback:x,submittedFields:k.getSubmittedFields(),type:f.FormSubmission};x||delete _.postback,this.sendMessage(ve(_))})}},this._cssPrefix=e.name,this._payload={type:f.Text,text:"",globalActions:[{type:R.Postback,label:"Global1",postback:{}},{type:R.Postback,label:"Global2",postback:{}},{type:R.Postback,label:"Global3",postback:{}},{type:R.Postback,label:"Global4",postback:{}}]},this.threadId=`${Cs.UIWidget}:${this._appContext||""}-${this._elementId||""}`,this._sdkMetadata=this._settings.sdkMetadata?Object.assign({version:G},this._settings.sdkMetadata):{version:G},this._settings.icons=Object.assign(Object.assign({},this._settings.icons),{logo:fm}),this._localeText=Object.assign(Object.assign({},this._settings.i18n.en),this._settings.i18n[this._settings.locale]);const{uploadFile:c,getSuggestions:m,onSpeechToggle:h,shareUserLocation:d,sendUserTypingStatusMessage:u,setHotkeyMap:b}=this._widgetComponent;this._footer=new na(s,this.sendMessage.bind(this),c.bind(p),Object.assign(Object.assign({},this._settings),{enableAttachment:!1}),m.bind(p),h.bind(p),d.bind(p),u.bind(p),this._eventDispatcher,p,b.bind(p)),this.contextualElem=document.querySelector(`#${this._elementId}`),this._textElem=this.contextualElem.querySelector("input, textarea"),this._staticActions=[{type:R.Postback,label:"Show more",postback:{showMore:!0}}],this._isFooterEnabled=!1,this._isErrorState=!1,this._isGenerating=!1,this._isStatic=!0,this._messageOptions={webCore:n,onMessageActionClicked:this._onMessageActionClicked}}render(){const e=this._utils,s=e.createDiv(["widget-wrapper"]);this.element=e.createDiv(["contextual-widget"]),this.element.id=this.threadId;const t=e.createDiv(["container","none"]);this.appendToElement(t),s.append(t),this._widgetContainer=t;const a=this.contextualElem.parentNode,r=e.createDiv(["contextual-widget-wrapper"]);a.replaceChild(r,this.contextualElem),r.append(this.contextualElem),document.body.append(s),this.contextualElem.parentElement.insertBefore(s,this.contextualElem);const i=e.createDiv([]);this._chatWidgetDiv=e.createDiv(["widget","flex","col"]),this._chatWidgetDiv.setAttribute("role","region"),this._chatWidgetDiv.setAttribute("aria-labelledby",`${this._cssPrefix}-title`);const n=e.createDiv(["header","flex"]),p=e.createDiv(["header-info-wrapper"]),l=this._localeText.chatTitle,c=this._settings.icons;if(!("logo"in c)||c.logo){const d=e.createImageIcon({icon:c.logo||So,iconCss:["logo"]});n.append(d)}if(l){const d=e.createTextDiv(["title"]);d.id=`${this._cssPrefix}-contextual-title`,d.innerText=l,d.title=l,p.append(d)}const m=e.createIconButton({css:["start-over-button",V],icon:vm,iconCss:[],title:"Start Again"});m.onclick=()=>{this._textElem?this._textElem.value="":this._logger.error("The input element is not found for clearing the filled-in text."),this._isStatic=!0,this._isReset=!0,e.addCSSClass(m,V),this._showMediumSize()},this._startOverBtn=m;const h=e.createIconButton({css:["close-button"],icon:c.close||Ge,iconCss:[],title:"close"});h.onclick=this._toggleWidgetState.bind(this),n.append(p,m,h),this._widgetContent=e.createDiv(["widget-content"]),this._footer.render(),this._footer.disable(!1),this._chatWidgetDiv.append(n,this._widgetContent,this._footer.element),e.addCSSClass(i,"open"),i.append(this._chatWidgetDiv),e.addCSSClass(this.element,"wrapper",this._settings.theme),this.element.append(i),this._payload.globalActions&&(this._globalActions=this._payload.globalActions),this._renderStaticContent(!0)}sendMessage(e,s=!0){return this._textStreamComponent?ht():(typeof e=="string"&&(e=Es(e)),this._footer.focusTextArea(),e&&this._core.sendMessage(e,{sdkMetadata:this._sdkMetadata,threadId:this.threadId}).then(()=>{this._isGenerating=!1,this._utils.removeCSSClass(this._startOverBtn,V),s&&this._showGenerateComponent()}).catch(t=>this._logger.error("[sendMessage] Failed to send message:",t)))}onMessageReceived(e){var s,t;const a=this._settings,r=this._textElem,i=this._utils;if(this._isErrorState=!1,this._isFooterEnabled||(i.addCSSClass(this._footer.element,"enabled"),this._isFooterEnabled=!0),e.messagePayload.llmGenerated){const n=We.fromMessage(a,i,e,this._messageOptions);if(!n)return;if(this._isGenerating=!0,n instanceof ia){const p=e.messagePayload;switch(p.streamState){case"start":this._footer.disable(),n.isCoPilot=!0,n.showDone=this._showDoneText.bind(this),this._onGenerateCallback?this._onGenerateCallback(p):r?(n.textElement=r,n.update(p),this._textStreamComponent=n):this._logger.error("The input element is not found for filling in the generated text.");return;case"running":this._onGenerateCallback?this._onGenerateCallback(p):this._textStreamComponent.update(p);return;case"end":this._footer.disable(!1),this._onGenerateCallback?(this._onGenerateCallback(p),this._showDoneText()):(this._textStreamComponent.update(p),this._textStreamComponent=null),this._isStatic=!1,p.text="",this._renderMessage(e)}}else if(this._textStreamComponent=null,this._isStatic=!1,n instanceof pt){const p=e.messagePayload;this._onGenerateCallback?this._onGenerateCallback(p):(r.innerHTML=Po(p.text),p.text="",this._renderMessage(e)),this._toggleWidgetState()}}else if(!((s=e.messagePayload.channelExtensions)===null||s===void 0)&&s.showInDialog){const n=i.createDiv(["wrapper","popup-content-wrapper"]),p=i.createDiv(["popup-dialog"]),l=We.fromMessage(a,i,e,this._messageOptions);p.append(l.render()),n.append(p);const c=l.actionsWrapper;if(c){const m=c.children;for(let h=0;h<m.length;h++)m[h].addEventListener("click",()=>n.remove())}n.onclick=m=>{p.contains(m.target)||n.remove()},document.body.append(n),this._isStatic=!1,this._toggleWidgetState()}else if(this._isStatic=!1,e.messagePayload.type===f.Error){if(this._isErrorState=!0,(t=this._widgetContent.firstChild)===null||t===void 0||t.remove(),!this._errorDiv){const n=i.createDiv(["error-message"]);n.append(i.createImageIcon({icon:wm,iconCss:["error-icon"]}));const p=i.createDiv(["error-info"]),l=i.createTextDiv(["error-text"]),c=i.createTextDiv(["reset-button"]);c.onclick=()=>{this._isErrorState=!1,this._isStatic=!0,this._showMediumSize()},l.innerText="Something went wrong",c.innerText="Start over",p.append(l,c),n.append(p),this._errorDiv=n}this._widgetContent.append(this._errorDiv),this._showMediumSize()}else this._renderMessage(e),this.showFullSizeWidget()}addText(e){return this._payload.text=e,this}addAction(e,s,t=!1){return this._staticActions.push({type:R.Postback,label:e,postback:{actionId:s,generate:t}}),this}addFieldInputParameter(e,s,t){return this._staticActions.forEach(a=>{const r=a.postback;r.actionId===e&&(r.fieldInputParameters||(r.fieldInputParameters={}),r.fieldInputParameters[s]=t)}),this}addAdditionalInputParameter(e,s,t){return this._staticActions.forEach(a=>{const r=a.postback;r.actionId===e&&(r.additionalInputParameters||(r.additionalInputParameters={}),r.additionalInputParameters[s]=t)}),this}createWidget(){const e=this.contextualElem;return this.element||this.render(),this._autoShow&&e.addEventListener("focus",()=>{this.showWidget()}),this}showWidget(){const e=this._contextWidgetMap;return Object.keys(e).filter(s=>s!==this.threadId).forEach(s=>{e[s].hideWidget()}),this._utils.removeCSSClass(this._widgetContainer,V),this}collapseWidget(){return this._toggleWidgetState(),this}hideWidget(){return this._utils.addCSSClass(this._widgetContainer,V),this}startWidgetInteraction(e){return this._sendUpdateContext(this._getParameters(e)),this}onGeneratedText(e){return this._onGenerateCallback=e,this}_renderMessage(e){var s;const t=We.fromMessage(Object.assign(Object.assign({},this._settings),{actionsLayout:"horizontal",globalActionsLayout:"horizontal"}),this._utils,e,this._messageOptions);(s=this._widgetContent.firstChild)===null||s===void 0||s.remove(),this._widgetContent.append(t.render())}_renderStaticContent(e=!1){this._isStatic&&(e?(this._staticActions.length===1?this._payload.actions=this._staticActions.slice(0):this._payload.actions=this._staticActions.slice(0,2).reverse(),this._payload.globalActions=[]):(this._payload.actions=this._staticActions.slice(1),this._globalActions&&(this._payload.globalActions=this._globalActions.slice(0))),this._renderMessage({messagePayload:this._payload}))}_toggleWidgetState(){const e=this._utils;if(!this._launchDiv){const s=e.createDiv(["minimum-size","contextual-widget","wrapper"]),t=e.createIconButton({css:[],icon:bm,iconCss:[],title:"open"}),a=e.createIconButton({css:[],icon:um,iconCss:[],title:"like"}),r=e.createIconButton({css:[],icon:hm,iconCss:[],title:"dislike"});t.onclick=()=>{this._isStatic||this._isErrorState?this._showMediumSize():this.showFullSizeWidget()},a.onclick=()=>{this.sendMessage(As({postback:{rating:"positive",feedbackType:"llm"},type:R.Postback}),!1)},r.onclick=()=>{this.sendMessage(As({postback:{rating:"negative",feedbackType:"llm"},type:R.Postback}),!1)},s.append(t,a,r),this._widgetContainer.append(s),this._launchDiv=s}e.removeCSSClass(this.element,Bs),e.addCSSClass(this.element,V),this._generateDiv&&e.addCSSClass(this._generateDiv,V),this._doneDiv&&e.addCSSClass(this._doneDiv,V),e.removeCSSClass(this._launchDiv,V),this._isGenerating?e.removeCSSClass(this._launchDiv,"no-feedback"):e.addCSSClass(this._launchDiv,"no-feedback")}_showMediumSize(){const e=this._utils;this._launchDiv&&e.addCSSClass(this._launchDiv,V),this._generateDiv&&e.addCSSClass(this._generateDiv,V),this._doneDiv&&e.addCSSClass(this._doneDiv,V),e.removeCSSClass(this.element,Bs),e.removeCSSClass(this.element,V),this._renderStaticContent(!0),this._isGenerating=!1}showFullSizeWidget(){const e=this._utils;this._launchDiv&&e.addCSSClass(this._launchDiv,V),this._generateDiv&&e.addCSSClass(this._generateDiv,V),this._doneDiv&&e.addCSSClass(this._doneDiv,V),e.addCSSClass(this.element,V),this._renderStaticContent(),e.addCSSClass(this.element,Bs)}_showGenerateComponent(){const e=this._utils;if(!this._generateDiv){const s=e.createDiv(["generate-spinner"]),t=e.createTextDiv(["generate-text"]);t.innerText="Generating...";const a=e.createImageIcon({icon:dm,iconCss:["generate-icon","spin"]}),r=e.createIconButton({css:["close-button",V],icon:Ge,iconCss:[],title:"close"});r.onclick=this._toggleWidgetState.bind(this),s.append(a,t,r),this._widgetContainer.append(s),this._generateDiv=s}this._launchDiv&&e.addCSSClass(this._launchDiv,V),this._doneDiv&&e.addCSSClass(this._doneDiv,V),e.removeCSSClass(this.element,Bs),e.addCSSClass(this.element,V),e.removeCSSClass(this._generateDiv,V)}_showDoneText(){const e=this._utils;if(!this._doneDiv){const s=e.createDiv(["generate-spinner"]),t=e.createTextDiv(["generate-text"]);t.innerText="Done";const a=e.createImageIcon({icon:Io,iconCss:["generate-icon"]});s.append(a,t),this._widgetContainer.append(s),this._doneDiv=s}this._launchDiv&&e.addCSSClass(this._launchDiv,V),e.addCSSClass(this._generateDiv,V),e.removeCSSClass(this._doneDiv,V),e.removeCSSClass(this.element,Bs),e.addCSSClass(this.element,V),setTimeout(this._toggleWidgetState.bind(this),Ol)}_sendUpdateContext(e){this.sendMessage({messagePayload:{type:f.UpdateApplicationContextCommand,source:Cs.UIWidget,context:this._appContext,properties:e,reset:this._isReset}})}_getParameters(e){let s;return this._staticActions.forEach(t=>{const a=t.postback,{fieldInputParameters:r,additionalInputParameters:i}=a;a.actionId===e&&(s=Object.assign(Object.assign({},ua(r)),i))}),s}}const ko="Please try sharing it again, or else type it in.",Vs={badgePosition:{right:"-5px",top:"-5px"},clientAuthEnabled:!1,conversationBeginPosition:"bottom",disablePastActions:"all",displayActionsAsPills:!1,searchBarMode:!1,sidepanel:!1,embedded:!1,embeddedVideo:!0,enableAgentSneakPreview:!1,enableAttachment:!0,enableAttachmentSecurity:!1,enableHeaderActionCollapse:!0,enableAutocomplete:!1,enableAutocompleteClientCache:!1,enableBotAudioResponse:!1,enableCancelResponse:!1,enableClearMessage:!1,enableDefaultClientResponse:!1,enableEmbeddedActions:!0,enableEndConversation:!0,enableHeadless:!1,enableLocalConversationHistory:!1,enableLongPolling:!1,enableResizableWidget:!1,enableSearchHistory:!1,enableSendTypingStatus:!1,enableSecureConnection:!0,enableSpeech:!1,enableSpeechAutoSend:!0,enableTabsSync:!0,enableVoiceOnlyMode:!1,focusOnNewMessage:"input",height:"620px",i18n:{en:{agent:"Agent",agentMessage:"{0} says",attachment_audio:"Audio attachment",attachment_file:"File attachment",attachment_image:"Image attachment",attachment_video:"Video attachment",attachmentAudioFallback:"Your browser does not support embedded audio. However you can {0}download it{/0}.",attachmentVideoFallback:"Your browser does not support embedded video. However you can {0}download it{/0}.",audioResponseOff:"Turn audio response on",audioResponseOn:"Turn audio response off",avatarAgent:"Agent icon",avatarBot:"Bot icon",avatarUser:"User icon",cancelResponse:"Cancel response",card:"Card {0}",cardImagePlaceholder:"Card image",cardNavNext:"Next card",cardNavPrevious:"Previous card",chatTitle:"Chat",clear:"Clear conversation",close:"Close widget",closing:"Closing",connected:"Connected",connecting:"Connecting",connectionFailureMessage:"Sorry, the assistant is unavailable right now. If the issue persists, contact your help desk.",connectionRetryLabel:"Try Again",copyFailureMessage:"Sorry, copying is not available on this device.",copySuccessMessage:"Successfully copied the response text to the clipboard.",defaultGreetingMessage:"Hey, Nice to meet you! Allow me a moment to get back to you.",defaultWaitMessage:"I'm still working on your request. Thank you for your patience!",defaultSorryMessage:"I'm sorry. I can't get you the right content. Please try again.",disconnected:"Disconnected",download:"Download",editFieldErrorMessage:"Field input is invalid",editFormErrorMessage:"Some of the fields need your attention",endConversation:"End Conversation",endConversationConfirmMessage:"Are you sure you want to end the conversation?",endConversationDescription:"This will also clear your conversation history.",errorSpeechInvalidUrl:"ODA URL for connection is not set. Please pass 'URI' parameter during SDK initialization.",errorSpeechNoResponse:"Speech recognition is taking too long. Please try again",errorSpeechNoWebServer:"For microphone access, build and run the app from a web server, not by opening the HTML file directly.",errorSpeechMultipleConnection:"Another voice recognition is ongoing. Can't start a new one.",errorSpeechTooMuchTimeout:"The voice message is too long to recognize and generate text.",errorSpeechUnavailable:"To allow voice messaging, update your browser settings to enable access to your microphone.",errorSpeechUnsupportedLocale:"The locale set for voice recognition is not supported. Please use a valid locale in 'speechLocale' setting.",inputPlaceholder:"Type a message",imageViewerClose:"Close image viewer",imageViewerOpen:"Open image viewer",itemIterator:"Item {0}",language_ar:"Arabic",language_de:"German",language_detect:"Detect Language",language_en:"English",language_es:"Spanish",language_fr:"French",language_hi:"Hindi",language_it:"Italian",language_nl:"Dutch",language_pt:"Portuguese",languageSelectDropdown:"Select chat language",linkField:"Click on the highlighted text to open Link for {0}",menuPin:"View History",noResultText:"No more results",noSpeechTimeout:"The voice could not be detected to perform recognition.",noText:"No",oldLinkAdvisory:"Please note that the content of this link may have been updated since it was originally shared.",openMap:"Open Map",pin:"Close search results",previousChats:"End of previous conversation",ratingStar:"Rate {0} star",recognitionTextPlaceholder:"Speak your message",relTimeDay:"{0}d ago",relTimeHr:"{0}hr ago",relTimeMin:"{0}min ago",relTimeMoment:"A few seconds ago",relTimeMon:"{0}mth ago",relTimeNow:"Now",relTimeYr:"{0}yr ago",requestLocation:"Requesting location",requestLocationDeniedPermission:"To allow sharing your location, update your browser settings to enable access to your location. You can also type in the location instead.",requestLocationDeniedTimeout:`It is taking too long to get your location. ${ko}`,requestLocationDeniedUnavailable:`Your current location is unavailable. ${ko}`,requiredTip:"Required",retryMessage:"Try again",searchBarOverflow:"More actions",searchHistory:"Ask Oracle search history items",scrollDown:"Scroll down to read more",send:"Send message",shareAudio:"Share Audio",shareFailureMessage:"Sorry, sharing is not available on this device.",shareFile:"Share File",shareLocation:"Share Location",shareVisual:"Share Image/Video",skillMessage:"Skill says",showOptions:"Show Options",speak:"Speak a message",typingIndicator:"Waiting for response",unpin:"Pin search results",upload:"Share popup",uploadFailed:"Upload Failed.",uploadFileNetworkFailure:"Upload not completed due to network failure.",uploadFileSizeLimitExceeded:"File size should not be more than {0}MB.",uploadFileSizeZeroByte:"Files of size zero bytes can't be uploaded.",uploadUnauthorized:"Upload request is unauthorized.",uploadUnsupportedFileType:"Unsupported file type.",userMessage:"I say",utteranceGeneric:"Message from skill.",webViewAccessibilityTitle:"In-widget WebView to display links",webViewClose:"Done",webViewErrorInfoDismiss:"Dismiss",webViewErrorInfoText:"Don't see the page? {0}Click here{/0} to open it in a browser.",yesText:"Yes"},ar:{language_ar:"اَلْعَرَبِيَّةُ"},de:{language_de:"Deutsch"},es:{language_es:"Español"},fr:{language_fr:"Français"},hi:{language_hi:"हिन्दी"},it:{language_it:"Italiano"},nl:{language_nl:"Nederlands"},pt:{language_pt:"Português"}},initBotAudioMuted:!0,initMessageOptions:{sendAt:"expand"},disableInlineCSS:!1,isDebugMode:!1,locale:"en",messageCacheSizeLimit:2e3,name:"oda-chat",openChatOnLoad:!1,openLinksInNewWindow:!1,reconnectInterval:5,reconnectMaxAttempts:5,shareMenuItems:[ue.AUDIO,ue.FILE,ue.LOCATION,ue.VISUAL],showConnectionStatus:!1,showPrevConvStatus:!0,showTypingIndicator:!0,speechLocale:Ee.EN_US,theme:io.DEFAULT,timestampMode:"default",timestampHeaderMode:"absolute",defaultGreetingTimeout:5,defaultWaitMessageInterval:5,typingIndicatorTimeout:30,typingStatusInterval:3,typingDelay:0,upgradeToWebSocketInterval:300,webViewConfig:{},width:"375px",actionsLayout:"vertical",globalActionsLayout:"vertical",cardActionsLayout:"vertical",formActionsLayout:"vertical",wcfsEnableEndConversationButtonToClose:!1},Bl=()=>navigator.language.toLowerCase(),Vl=()=>{var o;return((o=navigator.languages)===null||o===void 0?void 0:o.map(e=>e.toLowerCase()))||[]},$l=o=>Nl(o),Nl=o=>{let e;try{e=window[o];const s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(s){return s instanceof DOMException&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}},Hl=I('<path d="M11.007 15.117A1 1 0 0 0 13 15V7l-.005-.176A3 3 0 0 0 7 7v8l.005.217A5 5 0 0 0 17 15V5h2v10a7 7 0 1 1-14 0V7a5 5 0 0 1 10 0v8l-.005.176A3 3 0 0 1 9 15V9h2v6z"/>'),Ul=I('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m7.764 17 1.849-4.87h1.012L12.486 17H11.32l-.32-.998H9.204L8.882 17zm1.722-1.883h1.226l-.617-1.916zm3.278-.415v-2.573h1.045v2.553c0 .531.079.916.235 1.152.156.233.404.349.744.349.344 0 .591-.116.743-.349.157-.236.235-.62.235-1.152v-2.553h1.045v2.573c0 .822-.165 1.427-.496 1.816-.326.384-.835.576-1.527.576s-1.204-.192-1.535-.576c-.326-.389-.489-.994-.489-1.816zM17.686 17v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>'),Wl=I('<path fill="#161513" d="m6 9 5.975 6L18 9H6z"/>'),jl=I('<path d="M6.35 8L5 9.739 12 16l7-6.261L17.65 8 12 13.054z"/>'),Gl=I('<path d="M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z"/>'),ql=I('<path d="M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z"/>'),Yl=I('<path d="M6 11h8v2H6zm0-4h12v2H6z"/><path d="M2 2v20h3.5l3-4H14v-2H7.5l-3 4H4V4h16v6h2V2z"/><path d="M20.3 12.3L19 13.6l-1.3-1.3-1.4 1.4 1.3 1.3-1.3 1.3 1.4 1.4 1.3-1.3 1.3 1.3 1.4-1.4-1.3-1.3 1.3-1.3z"/>'),Ge=I('<path d="M17.524 5 19 6.476 13.475 12 19 17.524 17.524 19 12 13.475 6.476 19 5 17.524 10.525 12 5 6.476 6.476 5 12 10.525z"/>'),Kl=I('<path d="M11 13v9H9v-5.586l-6.293 6.293-1.414-1.414L7.586 15H2v-2zM21.293 1.293l1.414 1.414L16.414 9H22v2h-9V2h2v5.586z"/>'),Xl=I('<path d="M4 15v5h16v-5h2v7H2v-7zm9-13v10.587l3.293-3.294 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414L11 12.585V2z"/>'),ga=I('<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.707 7.293l8 8-1.414 1.414-8-8z"/></svg>'),Zl=I('<path d="M6 12a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0z"fill="#161513"/>'),Jl='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9L11.9746 15L18 9H6Z" fill="#161513"/></svg>',Ql=I('<path class="st0" d="M20 20H4V4h7V2H2v20h20v-9h-2z"/><path xmlns="http://www.w3.org/2000/svg" class="st0" d="M14 2v2h4.6L8.3 14.3l1.4 1.4L20 5.4V10h2V2z"/>'),em=I('<path d="M14.414 2 21 8.584V22H3V2.009zM13 3.999l-8 .007v15.995h14V9.996l-6 .001zm4.585 3.998L15 5.413v2.585z"/>'),sm=I('<path d="M4 2h10.414L20 7.586V22H4zm2 2v16h12V9h-5V4zm9 1.414L16.586 7H15z"/><path d="M16 12a1 1 0 11-2 0 1 1 0 012 0zm-6.143 1L7 19h10l-2.857-4.5L12 16.75z"/>'),tm=I('<path d="M22 5v14H2V5zm-2 2H4v10h16zM7 13v2H5v-2zm12 0v2h-2v-2zm-4 0v2H9v-2zM7 9v2H5V9zm12 0v2h-2V9zm-4 0v2h-2V9zm-4 0v2H9V9z" />'),am=I('<path d="M13 14c-1.5 0-2.9-.4-4-1.1 1.1-2.4 1.7-5 1.9-6.9h9V4H7V2H5v2H2v2h6.9c-.2 1.7-.7 3.7-1.5 5.6C6.5 10.5 6 9.2 6 8H4c0 1.9.9 4 2.5 5.5C5.3 15.5 3.8 17 2 17v2c2.6 0 4.6-1.9 6.1-4.3 1.4.8 3 1.3 4.9 1.3zm7.6 4.6L17 10.5l-3.6 8.1-1.3 3 1.8.8L15 20h4l1.1 2.4 1.8-.8zm-4.7-.6l1.1-2.5 1.1 2.5z"/>'),yo='<svg width="36" height="36" viewBox="0 0 36 36"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.875 8.625a2.25 2.25 0 00-2.25 2.25v16c0 .621.504 1.125 1.125 1.125h.284c.298 0 .585-.119.796-.33l2.761-2.76a2.25 2.25 0 011.59-.66h15.944a2.25 2.25 0 002.25-2.25V10.875a2.25 2.25 0 00-2.25-2.25H7.875zM24.75 18a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm-4.5-2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-9 2.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" fill="#fff"/></svg>',So=I('<path d="M4.014 3C2.911 3 2 3.888 2 4.992v15c0 .6.408 1.008 1.007 1.008h.6a.887.887 0 0 0 .695-.288l3.094-3.12c.407-.384.91-.6 1.415-.6h11.175C21.089 16.992 22 16.104 22 15V4.992C22 3.888 21.089 3 19.986 3zm3.981 7.008A1.986 1.986 0 0 1 6.005 12c-1.103 0-1.99-.888-1.99-1.992s.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.995 0C13.99 11.112 13.103 12 12 12s-1.99-.888-1.99-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.996 0c0 1.104-.888 1.992-1.99 1.992s-1.991-.888-1.991-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016z" fill="#fff"/>'),rm=I('<path d="M7 22v-2h4v-2.062C7.06 17.444 4 14.073 4 10h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V20h4v2h-6zm5-20c2.206 0 4 1.794 4 4v4c0 2.206-1.794 4-4 4s-4-1.794-4-4V6c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2s2-.897 2-2V6c0-1.103-.897-2-2-2z"/>'),om=I('<path d="M19.33 23.02l-7.332-3.666-7.332 3.666 1.418-7.995L1 9.555l7.331-1.222L11.998 1l3.666 7.333 7.332 1.222-5.084 5.47z"/>'),im=I('<path d="M10 2a8 8 0 016.317 12.91l5.383 5.384-1.414 1.414-5.386-5.384A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="rgb(22, 21, 19)"/>'),nm=I('<path d="M13 22V5.414l5.293 5.293 1.414-1.414L12 1.585 4.293 9.293l1.414 1.414L11 5.414V22h2z" fill="#161513"/>'),cm=I('<path d="M22 2v20H2V2zm-2 2H4v16h16zm-3 1.674V14a2 2 0 11-2.15-1.995L15 12V8.326l-5 1.428V16a2 2 0 11-2.15-1.995L8 14V8.246z"/>'),Co=I('<path d="M13.414 2L17 5.586V7h.414L21 10.586V22H7v-4H3V2zM17 9.414V18H9v2h10v-8.586zm-2-3L12.586 4H5v12h10zM13 11v2H7v-2zm-2-4v2H7V7z"/>'),To=I('<path d="M12 2c3.874 0 6.994 3.28 6.99 7.214l.011.285c.008.927-.202 2.23-.787 3.837-.96 2.639-2.73 5.452-5.49 8.353L12 22.45l-.724-.761c-2.76-2.901-4.53-5.714-5.49-8.353-.627-1.722-.823-3.095-.782-4.03l.006-.252C5.134 5.147 8.205 2 12 2zm0 2C9.254 4 7.006 6.362 7.002 9.386L7 9.529c-.004.694.168 1.753.667 3.123.741 2.036 2.038 4.221 4.014 6.507l.32.365.32-.365c1.867-2.159 3.127-4.228 3.886-6.166l.128-.34c.535-1.469.694-2.58.664-3.259l-.008-.32C16.879 6.244 14.676 4 12 4zm0 2a3 3 0 1 1-.001 6A3 3 0 0 1 12 6zm0 2a1 1 0 1 0 .001 2A1 1 0 0 0 12 8z"/>'),pm=I('<path d="M22 2v16h-4v4H2V6h4V2zm-9.036 12.378L6.93 20H16v-2.585zM16 8H4v11.999l9.036-8.377L16 14.585zm4-4H8v2h10v10h2zM7 9a2 2 0 110 4 2 2 0 010-4z"/>'),lm=I('<path fill="#161513" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm15.207-2.793-1.414-1.414L10 13.586l-2.293-2.293-1.414 1.414L10 16.414z"/>'),Eo=I('<path d="M1.707.293l22 22-1.414 1.414L12 13.414V21l-6.35-5.114H1V7.954h4.65l.5-.39L.293 1.707zM19.67 4.446c2.119 1.967 3.302 4.613 3.33 7.452a10.363 10.363 0 01-1.392 5.295l-1.476-1.476c.58-1.18.88-2.472.868-3.8-.023-2.29-.981-4.43-2.697-6.025zM7.583 8.996l-1.232.955H3v3.964h3.351L10 16.875v-5.461zm8.051-1.68C17.15 8.547 17.991 10.21 18 11.999c.003.482-.055.956-.17 1.416l-1.86-1.86c-.133-1.017-.691-1.964-1.604-2.706zM12 3v4.586L9.424 5.01z"/>'),Ao=I('<path d="M13 3v18l-6.35-5.114H2V7.954h4.65zm5.67 1.446c2.119 1.967 3.302 4.613 3.33 7.452.029 2.904-1.15 5.658-3.316 7.75l-1.396-1.421c1.772-1.71 2.735-3.95 2.712-6.31-.023-2.29-.981-4.43-2.697-6.025zM11 7.125L7.351 9.95H4v3.964h3.351L11 16.875zm4.634.19C17.15 8.548 17.991 10.212 18 12c.01 1.806-.828 3.5-2.358 4.771l-1.284-1.519c1.065-.885 1.65-2.037 1.642-3.242-.006-1.187-.587-2.309-1.634-3.16z"/>'),mm=I('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m12.36 17-1.796-4.87h1.18l1.138 3.584 1.153-3.585h1.132L13.37 17zm3.33 0v-4.87h1.046V17zm1.996 0v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>'),vs=I('<path fill="#161513" d="m12 2 10 18H2zm-1 12h2v-4h-2zm0 1v2h2v-2z"/>'),gm=I('<path d="M11 2a9 9 0 017.032 14.617l3.675 3.676-1.414 1.414-3.676-3.675A9 9 0 1111 2zm0 2a7 7 0 100 14 7 7 0 000-14zm1 3v3h3v2h-3v3h-2v-3H7v-2h3V7z"/>'),Io=I('<path fill="#161513" fill-rule="evenodd" d="M21.205 6.707 8.998 18.914l-6.707-6.707 1.414-1.414 5.293 5.293L19.791 5.293l1.414 1.414Z" clip-rule="evenodd"/>'),dm=I('<path fill="#161513" d="M10.998 3c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm0 18c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm11-9c0-.55-.45-1-1-1-.56 0-1 .45-1 1.01 0 .55.45.99 1 .99.56 0 1-.45 1-1Zm-19-1c.55 0 1 .45 1 1s-.44 1-1 1c-.55 0-1-.44-1-.99 0-.56.44-1.01 1-1.01Zm1.93-6.072a1.004 1.004 0 0 0 0 1.415.998.998 0 0 0 1.42-.007.995.995 0 0 0-.007-1.408.997.997 0 0 0-1.414 0Zm12.727 14.143a1.004 1.004 0 0 1 0-1.415.997.997 0 0 1 1.414 0 .995.995 0 0 1 .007 1.408.998.998 0 0 1-1.421.007ZM6.34 17.657a1.003 1.003 0 0 0-1.414 0 .998.998 0 0 0 .007 1.42.994.994 0 0 0 1.407-.005.997.997 0 0 0 0-1.415ZM3.336 9.359a1.004 1.004 0 0 1-.523-1.314.997.997 0 0 1 1.314-.523.995.995 0 0 1 .527 1.305 1 1 0 0 1-1.318.532Zm16.01 5.806a1 1 0 1 0 1.841.782.994.994 0 0 0-.527-1.305.997.997 0 0 0-1.314.523ZM7.52 19.87a1.003 1.003 0 0 1 1.314-.523.996.996 0 0 1 .523 1.314.995.995 0 0 1-1.305.527 1 1 0 0 1-.532-1.318Zm-4.18-5.23a.995.995 0 0 0-.527 1.305 1 1 0 1 0 .527-1.305Zm5.488-9.984a.995.995 0 0 1-1.305-.527.997.997 0 0 1 .523-1.314.999.999 0 1 1 .782 1.841Zm5.814 16.005c.218.505.8.744 1.305.527a.999.999 0 1 0-.782-1.841.997.997 0 0 0-.523 1.314Z"/>'),hm=I('<path fill="#161513" d="M3.47 1.667h14.862v9.166h-4.459l-3.333 7.5h-.542c-1.157 0-2.002-.324-2.566-.846-.551-.511-.767-1.152-.767-1.654V12.5H1.5L3.47 1.667Zm10.695 7.5h2.5V3.333h-2.5v5.834Zm-1.667-5.834H4.86l-1.363 7.5h4.835v5c0 .055.034.247.232.43.143.132.412.298.908.369l3.026-6.809v-6.49Z"/>',"20"),um=I('<path fill="#161513" d="M3.47 18.333h14.862V9.167h-4.459l-3.333-7.5h-.542c-1.157 0-2.002.324-2.566.847-.551.51-.767 1.151-.767 1.653V7.5H1.5l1.97 10.833Zm10.695-7.5h2.5v5.834h-2.5v-5.834Zm-1.667 5.834H4.86l-1.363-7.5h4.835v-5c0-.055.034-.247.232-.43.143-.132.412-.298.908-.369l3.026 6.809v6.49Z"/>',"20"),bm=I('<path fill="#C74634" d="M3.345 2.5c-.92 0-1.679.74-1.679 1.66v12.5c0 .5.34.84.84.84h.499c.26 0 .42-.08.58-.24l2.577-2.6c.34-.32.76-.5 1.18-.5h9.312c.92 0 1.679-.74 1.679-1.66V4.16c0-.92-.76-1.66-1.679-1.66H3.344Zm3.317 5.84c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Z"/>',"20"),fm=I('<path fill="#C74634" d="M2.677 2c-.736 0-1.343.592-1.343 1.328v10c0 .4.272.672.671.672h.4a.591.591 0 0 0 .464-.192l2.062-2.08c.272-.256.608-.4.943-.4h7.45c.736 0 1.343-.592 1.343-1.328V3.328c0-.736-.607-1.328-1.343-1.328H2.677ZM5.33 6.672C5.33 7.408 4.739 8 4.004 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.997 0C9.328 7.408 8.736 8 8 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.996 0c0 .736-.591 1.328-1.326 1.328a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.326.608 1.326 1.344Z"/>',"16"),wm=I('<path fill="#8F520A" d="M1.332 14.667 7.998 1.333l6.667 13.334H1.332Zm6-7.334V10h1.333V7.333H7.332Zm0 4v1.334h1.333v-1.334H7.332Z"/>',"16"),vm=I('<path fill="#211e1c" fill-rule="evenodd" d="M10.364 4c4.665 0 8.492 3.29 8.632 7.747L19 12v1.585l1.293-1.292 1.414 1.414L18 17.414l-3.707-3.707 1.414-1.414L17 13.585V12c0-3.419-2.935-6-6.636-6C6.853 6 4 8.906 4 12.5S6.853 19 10.364 19a6.243 6.243 0 0 0 3.764-1.258l.228-.18 1.272 1.544A8.25 8.25 0 0 1 10.364 21C5.74 21 2 17.19 2 12.5 2 7.81 5.74 4 10.364 4z"/>'),_m=I('<path d="M3 3h18v18H3zm2 2v14h14V5z"/>');function I(o,e){return`<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 ${e||"24"} ${e||"24"}">${o}</svg>`}const Ce="";function Mo(o,e){if(!e||(Array.isArray(e)||(e=[e]),!e.length))return Promise.resolve(!1);const s=e.map(t=>{var a;return(a=t.lang)===null||a===void 0?void 0:a.toLowerCase()});return o.getVoices().then(t=>{let a=!1;const r=t.map(i=>i.lang.toLowerCase());for(const i of s)if(r.includes(i)){a=!0;break}return a})}function Lo(o,e,s,t){return We.fromMessage(s,o,{messagePayload:{type:f.Form,forms:[e]}},t)}function xm(o,e,s,t){const a="none",r=o.createDiv(["wrapper","popup-content-wrapper",a]),i=o.createDiv(["popup-dialog"]),n=We.fromMessage(s,o,{messagePayload:e},Object.assign(Object.assign({},t),{onMessageActionClicked:m=>{(m.type!==R.SubmitForm||n.validateForm())&&(o.addCSSClass(r,a),t.onMessageActionClicked(m))}})),p=n.render(),l=p.querySelector(`.${s.name}-form-message-header:first-child`),c=o.createIconButton({css:["header-button"],icon:s.icons.close||Ge,iconCss:[],title:"close"});if(L(c,"click",()=>o.addCSSClass(r,a)),r.tabIndex=0,L(r,"click",m=>{i.contains(m.target)||o.addCSSClass(r,a)}),L(r,"keyup",m=>{m.code===T.Esc&&(o.addCSSClass(r,a),m.stopPropagation())}),l)l.append(c);else{const m=o.createDiv(["popup-header","flex"]);m.append(c),i.append(m)}return i.append(p),r.append(i),r}function km(o){return o.ratingId!==void 0}const ym=o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o,Do=o=>{const e=o.match(/<svg\s/gi);return e&&e.length>0},Sm=/<br\s*\/?>/g,Po=o=>o.replace(Sm,`
`),Cm=[{match:/<([a-z])/gi,replace:(o,e)=>`&#x3c;${e}`},{match:/<\/([a-z])/gi,replace:(o,e)=>`&#x3c;&#47;${e}`}];function Tm(o){return Cm.forEach(e=>{o=o.replace(Xe(e.match),e.replace)}),o}function as(o,e){for(let s=0;s<o.childElementCount;s++){const t=o.children[s];if(t.tagName.toLowerCase()==="a"){const a=t;a.rel="noreferrer noopener",e.onclick&&(a.onclick=e.onclick.bind(a)),e.target&&(a.target=e.target)}t.hasChildNodes()&&as(t,e)}}function rs(o){for(let e=0;e<o.childElementCount;e++){const s=o.children[e];s.tagName.toLowerCase()==="a"&&(s.onclick=t=>(window.open(s.href,Ce,"height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),t.preventDefault(),t.stopPropagation(),!1)),s.hasChildNodes()&&rs(s)}}const da=(()=>{let o=!1;return(e={hasRecognition:!1,hasSynthesis:!1,isReset:!1,recognitionLocale:Ce,synthesisLocales:[]})=>{var s;e.isReset&&(o=!1);let t=e.synthesisLocales;return Array.isArray(t)||(t=[]),e.hasRecognition&&e.hasSynthesis&&(!((s=e.recognitionLocale)===null||s===void 0)&&s.length)&&(o||!e.synthesisLocales.length)&&(o=!0,t=[{lang:e.recognitionLocale}]),t}})();function Em(o,e){const s=o.toLowerCase();for(const t in e)if(s===t.toLowerCase())return!0;return!1}function Am(o,e){const s=o.toLowerCase().split("-")[0];for(const t in e)if(s===t.toLowerCase())return!0;return!1}function Im(o,e){let s=[o.toLowerCase()],t="en";s=s.concat(Vl()),s.includes(t)||s.push(t);for(const a of s)if(Em(a,e)){t=a;break}else if(Am(a,e)){t=a.split("-")[0];break}return t}function $s(o,e){let s;return function(){const a=this,r=arguments,i=function(){s=null,o.apply(a,r)};clearTimeout(s),s=setTimeout(i,e)}}function zo(o,e){let s=!1;return function(){const a=this;s||(o.apply(a,arguments),s=!0,setTimeout(()=>{s=!1},e))}}function Mm(o,e){const s=document.querySelector(`.${e}-wrapper`);return getComputedStyle(s).getPropertyValue(o)}function Lm(o){let e=Ce;switch(o.type){case f.Card:return o.cards.forEach(r=>{var i;e+=`${(r.title?`${r.title} - `:Ce)+(r.description?`${r.description} - `:Ce)+((i=r.url)!==null&&i!==void 0?i:Ce)}
`}),e;case f.Text:return o.text;case f.Attachment:return o.attachment.url;case f.Location:const s=o.location;return`${s.title?`${s.title} - `:Ce}${s.latitude}, ${s.longitude}`;case f.Table:o.rows.forEach(r=>{r.fields.forEach(i=>{e+=_s(i)})});break;case f.Form:o.forms.forEach(r=>{const i=ha(r);e+=i?`${i} - `:Ce});break;case f.EditForm:const t=o;e=t.title?`${t.title} - `:Ce,It(t)?t.fields.forEach(r=>{e+=_s(r)}):t.formRows.forEach(r=>{r.columns.forEach(i=>{i.fields.forEach(n=>{e+=_s(n)})})});break;case f.TableForm:const a=o;a.rows.forEach((r,i)=>{r.fields.forEach(n=>{e+=_s(n)}),e+=ha(a.forms[i])})}return Fo(e)}function ha(o,e=!1){let s=o.title?`${o.title} - `:Ce;return At(o)?o.fields.forEach(t=>{s+=_s(t)}):o.formRows.forEach(t=>{t.columns.forEach(a=>{a.fields.forEach(r=>{gs(r)&&(s+=_s(r))})})}),e?Fo(s):s}function _s(o){const e=o.value||o.label;return e?`${e} - `:Ce}function Dm(o,e){if(o){const s=["headerBackground","visualizer","ratingStarFill"],t=["botText","userText"],a=Object.assign({},o);s.forEach(r=>{a[r]=o[r]||o.branding}),t.forEach(r=>{a[r]=o[r]||o.text}),Object.keys(a).forEach(r=>{const i=a[r];if(i)if(r==="shareMenuText")e.updateCSSVar("--color-popup-button-text",i);else{const n=`--color-${r.replace(/([A-Z&])/g,"-$1").toLowerCase()}`;e.updateCSSVar(n,i)}})}}function ua(o){const e={};return o&&Object.keys(o).forEach(s=>{var t;e[s]=(t=document.querySelector(`#${o[s]}`))===null||t===void 0?void 0:t.value}),e}function Pm(o,e){e.updateCSSVar("--position-top",o.top||"unset"),e.updateCSSVar("--position-left",o.left||"unset"),e.updateCSSVar("--position-right",o.right||"unset"),e.updateCSSVar("--position-bottom",o.bottom||"unset"),o.bottom&&e.updateCSSVar("--widget-max-height",`calc(100vh - 60px - ${o.bottom})`)}const Ro={avatarAgent:"agentAvatar",avatarBot:"botIcon",avatarUser:"personIcon",fileAudio:"audioIcon",fileImage:"imageIcon",fileGeneric:"fileIcon",fileVideo:"videoIcon",clearHistory:"clearMessageIcon",close:void 0,collapse:"closeIcon",download:"downloadIcon",error:"errorIcon",expandImage:"expandImageIcon",keyboard:"keyboardIcon",logo:"logoIcon",launch:"botButtonIcon",mic:"micIcon",rating:void 0,send:"sendIcon",shareMenu:"attachmentIcon",shareMenuAudio:void 0,shareMenuFile:void 0,shareMenuLocation:void 0,shareMenuVisual:void 0,ttsOff:"audioResponseOffIcon",ttsOn:"audioResponseOnIcon",typingIndicator:"chatBubbleIcon"};function Oo(o){const e={},s=Object.keys(o);for(const t of s)e[t.toLowerCase()]=o[t];return e}function zm(o){const e=o.icons||{};for(const s in Ro){const t=s,a=Ro[t];a in o&&(e[t]=o[a])}return e}function Rm(o,e){o=Oo(o),e=Oo(e);const s=new Set;Object.keys(o).forEach(a=>{s.add(a)}),Object.keys(e).forEach(a=>{s.add(a)});const t={};return s.forEach(a=>{t[a]=Object.assign(Object.assign(Object.assign({},o.en),o[a]),e[a])}),t}function Om(o){const e=Object.assign(Object.assign({},Vs),o);return o.i18n&&Object.keys(o.i18n).length&&(e.i18n=Rm(Vs.i18n,o.i18n)),e.colors=Object.assign(Object.assign({},Vs.colors),o.colors),e.userId=o.userId||ls({prefix:"user"}),e.icons=zm(e),e.locale=Im(e.locale,e.i18n),o.typingStatusInterval&&o.typingStatusInterval<Vs.typingStatusInterval&&(e.typingStatusInterval=Vs.typingStatusInterval),e.enableVoiceOnlyMode&&(e.enableBotAudioResponse=!0,e.initBotAudioMuted=!1,e.enableSpeech=!0),e.position||(window.getComputedStyle(document.body).direction==="rtl"?e.position={left:"20px",bottom:"20px"}:e.position={right:"20px",bottom:"20px"}),e}function Fo(o){return o.length?o.slice(0,o.length-3):o}function ut(o,e){for(const[s,t]of Object.entries(e))o.setAttribute(s,t)}const Fm=o=>o.type===R.Client&&o.actionType===Ts.COPY_MESSAGE_TEXT,Bm=o=>"messageComponent"in o,Vm=(o,e)=>{o.querySelectorAll("a").forEach(t=>{t.title=e})},xs="aria-expanded",ba="aria-activedescendant",Bo="expand",Ns=!0;class Vo{get cssPrefix(){return this._cssPrefix}constructor(e){this._cssVars={},this._openPopupList=[],this._cssPrefix=e.name}insertStyleSheet(e,s){if(!document.head){console.warn("Cannot apply stylesheet, document.head is not available.");return}const t=e.replace(/(\.)([a-zA-Z_-]+)(?=[^}]+{)/ig,`$1${this._cssPrefix}-$2`),a=document.createElement("style");a.id=s,a.append(document.createTextNode(t));const r=document.querySelector(`style[id="${s}"]`);if(r){r.replaceWith(a);return}const i=document.head.querySelector("style");i?document.head.insertBefore(a,i):document.head.append(a)}addCSSClass(e,...s){s=s.filter(t=>!!t),e.classList?s.forEach(t=>e.classList.add(`${this._cssPrefix}-${t}`)):e.setAttribute("class",s.reduce((t,a)=>`${t} ${this._cssPrefix}-${a}`,""))}createAnchor(e,s,t=[],a=!1,r){const i=this.createElement("a",t,Ns);i.rel="noreferrer noopener";let n=!1;return i.href=e,i.innerText=s,r&&(r.onclick&&(i.onclick=r.onclick.bind(i),n=!0),r.target&&(i.target=r.target,n=!0)),n||(a?i.addEventListener("click",p=>(window.open(e,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),p.preventDefault(),p.stopPropagation(),!1)):i.target="_blank"),i}createButton(e=[]){const s="button",t=this.createElement(s,["flex","widget-button",...e],Ns);return t.type=s,t}createDiv(e=[]){return this.createElement("div",e)}createElement(e,s=[],t=!1){const a=document.createElement(e);return this._addClasses(a,s),t&&(a.dir="auto"),a}createElementFromString(e,s=[]){const t=this.createDiv();t.innerHTML=e.trim();const a=t.firstElementChild;return s&&this._addClasses(t.firstElementChild,s),a}createIconButton({css:e,icon:s,title:t,iconCss:a}){const r=this.createButton(["icon",...e]);r.innerHTML="",r.title=t;const i=this.createImageIcon({icon:s,iconCss:a});return r.append(i),r}createImage(e,s=[],t=""){const a=this.createElement("img",s);return e&&(a.src=e),a.alt=t,a.setAttribute("draggable","false"),a}createImageIcon({icon:e,iconCss:s}){if(Do(e)){const t=this.createElementFromString(e,s);return t.setAttribute("role","presentation"),t.setAttribute("focusable","false"),t}return this.createImage(e,s)}createInputElement(e,s=[]){const t=this.createElement("input",["input",...s],!0);return this.setAttributes(t,e),t}createLabel(e=[]){return this.createElement("label",["label",...e],Ns)}createTextDiv(e=[]){return this.createElement("div",e,Ns)}createTextSpan(e=[]){return this.createElement("span",e,Ns)}setAttributes(e,s){const t=["valueOn","valueOff"];Object.keys(s).forEach(a=>{const r=s[a];r&&(a==="errorMsg"?e.setAttribute("data-error",r):t.includes(a)?e.setAttribute(a,r):e[a]=r)})}createListItem(e,s,t,a,r,i,n=!1,p=!0){const l=["li",r,...n?["with-sub-menu"]:[]],c=this.createElement("li",l,!0);if(c.id=e,c.tabIndex=-1,c.setAttribute("role","menuitem"),t&&c.setAttribute("data-value",t),a){const h=this.createImageIcon({icon:a,iconCss:["icon",`${r}-icon`]});c.append(h)}const m=this.createTextSpan(["text",`${r}-text`,...p?["ellipsis"]:[]]);return m.innerText=s,c.append(m),i&&L(c,"click",i),c}createMedia(e,s,t=[]){const a=this.createElement(e,t,!0);return s&&(a.src=s),a.autoplay=!1,a}getMenu(e){const s=this.createElement("ul",["popup",...e.menuClassList]);s.id=e.menuId,s.tabIndex=-1,s.setAttribute("role","menu"),s.setAttribute("aria-labelledby",e.buttonId),s.ariaHidden="true";const t=e.menuItems;if(t.forEach(a=>s.append(a)),e.defaultValue){const a=s.querySelector(`[data-value="${e.defaultValue}"]`);this.addCSSClass(a,"active")}return L(s,"click",()=>this._popupClose(s,e.menuButton)),L(s,"keydown",a=>{let r=!1;if(!(a.ctrlKey||a.altKey||a.metaKey)){if(a.shiftKey&&a.code===T.Tab)this._popupClose(e.menuButton,s);else switch(a.code){case T.Return:case T.Space:const i=a.target;i.ariaDisabled!=="true"&&(i.click(),r=!0);break;case T.Esc:case T.Tab:this._popupClose(e.menuButton,s),a.code===T.Esc&&(e.menuButton.focus(),r=!0);break;case T.Up:this._popupFocusPreviousItem(s),r=!0;break;case T.Down:this._popupFocusNextItem(s),r=!0;break;case T.Home:case T.PageUp:this._popupFocusFirstItem(s,t),r=!0;break;case T.End:case T.PageDown:this._popupFocusLastItem(s,t),r=!0;break}r&&(a.stopPropagation(),a.preventDefault())}}),s}getMenuButton(e){const s=e.button,t=e.menu,a=s.classList.contains(`${this._cssPrefix}-with-sub-menu`),r=e.widget;return s.setAttribute("role","button"),s.setAttribute("aria-haspopup","true"),s.setAttribute(xs,"false"),s.setAttribute("aria-controls",e.menuId),L(s,"click",()=>{const i=document.querySelector(`#${e.menuId}`);s.getAttribute(xs)==="true"?this._popupClose(s,i):this._popupOpen(s,i,r,a)}),L(s,"keydown",i=>{const n=t.querySelectorAll("li");let p=!1;switch(i.code){case T.Return:case T.Down:case T.Space:this._popupOpen(s,t,r,a),this._popupFocusFirstItem(t,n),p=!0;break;case T.Up:this._popupOpen(s,t,r,a),this._popupFocusLastItem(t,n),p=!0;break}p&&(i.stopPropagation(),i.preventDefault())}),s}getMessage(e,s=!1){const t="message",a=this.createDiv([t]),r=this.createDiv([`${t}-wrapper`]),i=this.createDiv([`${t}-bubble`,...s?["error"]:[]]);return i.append(e),r.append(i),a.append(r),a}wrapMessageBlock(e,s,t=Z.LEFT){const a="message",r=this.createDiv([`${a}-block`,"flex",t]),i=this.createDiv([`${a}s-wrapper`]),n=this.createDiv([`${a}-list`,"flex","col"]);if(s){const p=this.createImageIcon({icon:s,iconCss:["message-icon"]}),l=this.createDiv(["icon-wrapper"]);l.append(p),r.append(l)}return n.append(e),i.append(n),r.append(i),r}getMessageBlock(e,s,t,a=!1){return this.wrapMessageBlock(this.getMessage(s,a),t,e)}removeCSSClass(e,...s){var t,a;if(e.classList)s.forEach(r=>e.classList.remove(`${this._cssPrefix}-${r}`));else{const r="class",i=(a=(t=e.getAttribute(r))===null||t===void 0?void 0:t.split(" "))!==null&&a!==void 0?a:[];if(i.length){const n=i.filter(p=>!i.includes(`${this._cssPrefix}-${p}`)).join(" ");e.setAttribute(r,n)}}}setChatWidgetWrapper(e){this._chatWidgetWrapper=e;for(const[s,t]of Object.entries(this._cssVars))this.updateCSSVar(s,t)}updateCSSVar(e,s){this._cssVars[e]=s,this._chatWidgetWrapper&&this._chatWidgetWrapper.style.setProperty(e,s)}_addClasses(e,s=[]){return s&&this.addCSSClass(e,...s),e}_popupClose(e,s){e.getAttribute(xs)&&(this.removeCSSClass(s,Bo),s.ariaHidden="true",e.setAttribute(xs,"false"))}_popupFocusFirstItem(e,s){this._popupFocusItem(s[0],e)}_popupFocusLastItem(e,s){this._popupFocusItem(s[s.length-1],e)}_popupFocusPreviousItem(e){const s=e.getAttribute(ba),t=e.querySelector(`#${s}`);this._popupFocusItem(t.previousSibling||e.lastChild,e)}_popupFocusNextItem(e){const s=e.getAttribute(ba),t=e.querySelector(`#${s}`);this._popupFocusItem(t.nextSibling||e.firstChild,e)}_popupFocusItem(e,s){e.focus(),s.setAttribute(ba,e.id)}_popupOpen(e,s,t,a=!1){if(e.getAttribute(xs)==="false"){this.addCSSClass(s,Bo),e.setAttribute(xs,"true");const r=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=window.getComputedStyle(s).direction==="rtl";if(a)s.style.top=`${e.offsetTop+e.offsetHeight+60}px`,n?s.style.left="48px":s.style.right="48px",s.style.maxWidth=`${t.offsetWidth-48}px`;else{let p=r.right-i.right;n?(p=i.left-r.left,s.style.left=`${p}px`):s.style.right=`${p}px`,s.style.maxWidth=`${t.offsetWidth-p}px`}setTimeout(()=>{s.ariaHidden="false";const p=document.querySelectorAll(`.${this._cssPrefix}-with-sub-menu`);document.addEventListener("click",l=>{let c=!1;p.forEach(m=>{m.contains(l.target)&&(c=!0)}),c?this._openPopupList.push({menu:s,menuButton:e}):(this._openPopupList.length&&(this._openPopupList.forEach(m=>{this._popupClose(m.menuButton,m.menu)}),this._openPopupList=[]),this._popupClose(e,s))},{once:!0})},400)}}}function L(o,e,s,t){o.addEventListener(e,s,t)}function $o(o,e,s,t){o.removeEventListener(e,s,t)}const $m=500,fe=100;class No{constructor(e,s,t){this._utils=e,this.handle=s,this.moveElement=t,this.active=!1,this.dragged=!1,this.currentX=0,this.currentY=0,this.initialX=0,this.initialY=0,this.pointerEventsDefault=null,this.dragBound=this.drag.bind(this),this.dragEndBound=this.dragEnd.bind(this)}makeElementDraggable(){this.moveElement===void 0&&(this.moveElement=this.handle),this.handle.style.userSelect="none";const e=$s(()=>{if(!document.body.contains(this.moveElement)){window.removeEventListener("resize",e);return}this.moveBackInScreen(0,0),this.moveElement.style.transform=`translate(${this.currentX}px, ${this.currentY}px)`},$m);window.addEventListener("resize",e),this.handle.addEventListener("touchstart",this.dragStart.bind(this)),this.handle.addEventListener("mousedown",this.dragStart.bind(this))}moveBackInScreen(e,s){const t=this.handle.getBoundingClientRect(),a=t.width>fe?t.width:fe,r=t.height>fe?t.height:fe;t.left-e+(a-fe)<0&&(this.currentX=this.currentX-(t.left-e)-(a-fe)),t.right-e-(a-fe)>document.body.clientWidth&&(this.currentX=this.currentX-(t.right-document.body.clientWidth)+e+(a-fe)),t.top-s+(r-fe)<0&&(this.currentY=this.currentY-(t.top-s)-(r-fe)),t.bottom-s-(r-fe)>window.innerHeight&&(this.currentY=this.currentY-(t.bottom-window.innerHeight)+s+(r-fe))}dragStart(e){let s,t;e.type==="touchstart"?(s=e.touches[0].clientX,t=e.touches[0].clientY):(s=e.clientX,t=e.clientY),this.initialX=s-this.currentX,this.initialY=t-this.currentY,this.active=!0,document.addEventListener("touchmove",this.dragBound),document.addEventListener("mousemove",this.dragBound),document.addEventListener("touchend",this.dragEndBound),document.addEventListener("mouseup",this.dragEndBound)}drag(e){let s,t;if(this.active){e.type==="touchmove"?(s=e.touches[0].clientX,t=e.touches[0].clientY):(s=e.clientX,t=e.clientY);const r=s-this.currentX,i=t-this.currentY,n=this.currentX-(s-this.initialX),p=this.currentY-(t-this.initialY);this.currentX=s-this.initialX,this.currentY=t-this.initialY,(r>=5||i>=5||r<=-5||i<=-5)&&(this.moveBackInScreen(n,p),this._utils.addCSSClass(this.moveElement,"drag"),this.moveElement.style.transform=`translate(${this.currentX}px, ${this.currentY}px)`,this.dragged||(this.pointerEventsDefault=this.handle.style.pointerEvents,this.handle.style.pointerEvents="none"),this.dragged=!0)}}dragEnd(){this.dragged&&(this.handle.style.pointerEvents=this.pointerEventsDefault,this.handle.focus(),this.dragged=!1),this.active=!1,document.removeEventListener("touchmove",this.dragBound),document.removeEventListener("mousemove",this.dragBound),document.removeEventListener("touchend",this.dragEndBound),document.removeEventListener("mouseup",this.dragEndBound)}}var Nm=function(o,e,s,t){function a(r){return r instanceof s?r:new s(function(i){i(r)})}return new(s||(s=Promise))(function(r,i){function n(c){try{l(t.next(c))}catch(m){i(m)}}function p(c){try{l(t.throw(c))}catch(m){i(m)}}function l(c){c.done?r(c.value):a(c.value).then(n,p)}l((t=t.apply(o,e||[])).next())})};const Hm=/\b(?:(?:https?|ftp):\/\/|(www\.))[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]/gim,qe=(o,e,s)=>{const a=Um(o).replace(Xe(Hm),Ym(s,e)),r=tg(a,e);return Gm(r)},Um=o=>{let e;try{e=xt(o)}catch(s){return o}return Wm(e),jm(e),za(e.innerHTML)},Wm=o=>(o.querySelectorAll("a").forEach(s=>{s.outerHTML=Ho(s.outerHTML)}),o),jm=o=>{o.querySelectorAll("*").forEach(s=>{if(s.tagName!=="A"){const t=s.attributes;for(let a=0;a<t.length;a++){const r=t[a];r.value=Ho(r.value)}}})},Ho=o=>o.replace(/(https?|www)/gim,qm),Gm=o=>{let e=o;return fa.forEach((s,t)=>{e=e.replace(new RegExp(t,"g"),s)}),fa.clear(),e},fa=new Map,Uo=36,qm=o=>{const e=performance.now().toString(Uo).replace(".","_")+Math.random().toString(Uo).substring(2);return fa.set(e,o),e},Ym=(o,e)=>(s,t)=>{if(o){const r=wa(s,e);if(r)return r}return`<a href="${t?`https://${s}`:s}" target="_blank" rel="noreferrer">${s}</a>`},wa=(o,e)=>{let s,t;try{s=(o.toLowerCase().startsWith("https")?new URL(o):new URL(`https://${o}`)).hostname.toLowerCase()}catch(a){return t}return sg.some(a=>{const r=s.includes(a.name);if(r){const i=ls();a.name!=="videohub"&&Km(a.url,o,e,i),t=a.getEmbed(a.getId(o),i,e)}return r}),t},Km=(o,e,s,t)=>Nm(void 0,void 0,void 0,function*(){const a=`${o}?url=${e}`;try{const r=yield fetch(a);if(!r.ok)return;const i=yield r.json();if(i!=null&&i.html){const n=i.html.replace("<iframe",`<iframe class="${s}-video-wrapper"`),p=document.querySelector(`#${t}`);p==null||p.replaceWith(pi(n))}}catch(r){}}),Xm=/(?:youtu.*be.*)\/(?:watch\?v=|embed\/|v\/|shorts|)(.*?((?=[&#?])|$))/gm,Zm=/(?:https?:\/\/)?videohub\.oracle\.com\/media\/\S+\/([\w]+)/gim,Jm=/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)(?:|\/\?)/gim,Qm=/^(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com\/(?:video|embed)|dai.ly)\/([a-z0-9]+)/gim,le="allow",eg=`${le}="autoplay *; fullscreen *; encrypted-media *" sandbox="${le}-downloads ${le}-forms ${le}-same-origin ${le}-scripts ${le}-top-navigation ${le}-pointer-lock ${le}-popups ${le}-modals ${le}-orientation-lock ${le}-popups-to-escape-sandbox ${le}-presentation ${le}-top-navigation-by-user-activation" height="auto"`,sg=[{name:"youtu",url:"https://www.youtube.com/oembed",getEmbed:(o,e,s)=>ft(`src="https://www.youtube.com/embed/${o}" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"`,e,s,"youtube"),getId:o=>bt(o,Xm)},{name:"videohub",url:"",getEmbed:(o,e,s)=>{const t="flashvars";return ft(`src="https://cdnapisec.kaltura.com/p/2171811/sp/217181100/embedIframeJs/uiconf_id/35965902/partner_id/2171811?iframeembed=true&playerId=kaltura_player&entry_id=${o}&${t}[streamerType]=auto&amp;${t}[localizationCode]=en&amp;${t}[sideBarContainer.plugin]=true&amp;${t}[sideBarContainer.position]=left&amp;${t}[sideBarContainer.clickToClose]=true&amp;${t}[chapters.plugin]=true&amp;${t}[chapters.layout]=vertical&amp;${t}[chapters.thumbnailRotator]=false&amp;${t}[streamSelector.plugin]=true&amp;${t}[EmbedPlayer.SpinnerTarget]=videoHolder&amp;${t}[dualScreen.plugin]=true&amp;${t}[hotspots.plugin]=1&amp;${t}[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_yz4xoltb" ${eg}`,e,s,"ovh")},getId:o=>bt(o,Zm)},{name:"vimeo",url:"https://vimeo.com/api/oembed.json",getEmbed:(o,e,s)=>ft(`src="https://player.vimeo.com/video/${o}" allow="fullscreen; picture-in-picture"`,e,s,"vimeo"),getId:o=>bt(o,Jm)},{name:"dai",url:"https://www.dailymotion.com/services/oembed",getEmbed:(o,e,s)=>ft(`src="https://geo.dailymotion.com/player.html?video=${o}" allow="fullscreen; picture-in-picture; web-share"`,e,s,"dailymotion"),getId:o=>bt(o,Qm)}],bt=(o,e)=>{let s;return o.replace(Xe(e),(t,a)=>(a!=null&&a.length&&(s=a),t)),s},tg=(o,e)=>{const s=xt(o);if(!s)return o;const t=s.querySelectorAll("video"),a=`${e}-video-wrapper`;return t.forEach(r=>{r.classList.add(a)}),za(s.innerHTML)},ft=(o,e,s,t)=>`<div class="${s}-${t}-wrapper"><iframe id="${e}" class="${s}-video-wrapper" ${o} allowfullscreen frameborder="0"></iframe></div>`,q="resize",ag=[`nw-${q}`,`se-${q}`,`nwse-${q}`,`w-${q}`,`e-${q}`],rg=[`ne-${q}`,`sw-${q}`,`nesw-${q}`,`e-${q}`,`w-${q}`];class og{constructor(e,s,t){this._element=e,this._updateWidth=s,this._utils=t,this._minHeight=200,this._minWidth=375,this._isMinHeight=!1,this._isMaxHeight=!1}makeWidgetResizable(){const e=this._element,s=this._utils,t="mousedown",a=s.createDiv(["resizable",`top-${q}`]);L(a,t,this._resizeY());const r=s.createDiv(["resizable",`left-${q}`]);L(r,t,this._resizeX());const i=s.createDiv(["resizable",`right-${q}`]);L(i,t,this._resizeX(!1));const n=s.createDiv(["resizable",`left-${q}`,"corner"]);L(n,t,this._resizeX(!0,!0)),L(n,t,this._resizeY(!0));const p=s.createDiv(["resizable",`right-${q}`,"corner"]);L(p,t,this._resizeX(!1,!0)),L(p,t,this._resizeY(!0)),e.append(a,r,i,n,p)}_resizeX(e=!0,s=!1){const t=this._element,a=e?ag:rg;let r;const i=l=>{l.preventDefault(),r=l.x,document.addEventListener("mouseup",p,!1),document.addEventListener("mousemove",n,!1)},n=l=>{const c=parseInt(getComputedStyle(t).maxWidth),m=t.offsetWidth;let h=r-l.x;e||(h=-h);const d=m+h;if(m<this._minWidth&&(this._minWidth=m),r=l.x,d<=this._minWidth?document.body.style.cursor=s?this._isMinHeight?a[0]:a[2]:a[3]:d>=c?document.body.style.cursor=s?this._isMaxHeight?a[1]:a[2]:a[4]:document.body.style.cursor=s?a[2]:`col-${q}`,d>=this._minWidth&&d<=c){const u=`${d}px`;t.style.width=u,this._updateWidth(u)}l.preventDefault()},p=()=>{document.removeEventListener("mouseup",p,!1),document.removeEventListener("mousemove",n,!1),document.body.style.removeProperty("cursor")};return i}_resizeY(e=!1){const s=this._element;let t;const a=n=>{n.preventDefault(),t=n.y,document.addEventListener("mouseup",i,!1),document.addEventListener("mousemove",r,!1)},r=n=>{const p=t-n.y,l=parseInt(getComputedStyle(s).maxHeight),c=s.offsetHeight,m=c+p;c<this._minHeight&&(this._minHeight=c),t=n.y,m<=this._minHeight?(this._isMinHeight=!0,e||(document.body.style.cursor=`n-${q}`)):m>=l?(this._isMaxHeight=!0,e||(document.body.style.cursor=`s-${q}`)):(this._isMinHeight=!1,this._isMaxHeight=!1,e||(document.body.style.cursor=`row-${q}`)),m>=this._minHeight&&m<=l&&(s.style.height=`${m}px`),n.preventDefault()},i=()=>{document.removeEventListener("mouseup",i,!1),document.removeEventListener("mousemove",r,!1),document.body.style.removeProperty("cursor")};return a}}Object.values(E),Object.values(Ts);const va={};function ig(o){return o&&H(o.speak)&&H(o.cancel)&&H(o.getVoice)&&H(o.getVoices)&&H(o.setVoice)}function Ye(o,e){let s;const t=Om(o);let a;const r=ps();let i=!1;const n=new Vo(t);O.logLevel=t.isDebugMode?O.LOG_LEVEL.DEBUG:O.LOG_LEVEL.ERROR,O.appName=t.name,O.appVersion=G;const p=new O("main"),l=new Sr({URI:t.URI,channelId:t.channelId,userId:t.userId,isTLS:t.enableSecureConnection,channel:t.channel,enableAttachment:t.enableAttachment,enableAttachmentSecurity:t.enableAttachmentSecurity,isLongPoll:t.enableLongPolling,isTTS:t.enableBotAudioResponse,TTSService:t.ttsService,tokenGenerator:t.clientAuthEnabled?e:null,recognitionLocale:t.speechLocale,retryInterval:t.reconnectInterval,retryMaxAttempts:t.reconnectMaxAttempts,enableCancelResponse:t.enableCancelResponse});if(t.skillVoices&&(!t.ttsVoice||Array.isArray(t.ttsVoice)&&!t.ttsVoice.length)&&(t.ttsVoice=t.skillVoices),t.enableBotAudioResponse)try{t.ttsVoice&&l.setTTSVoice(t.ttsVoice)}catch(g){p.error("Failed to initialize TTS")}const c=Object.values(Ee),m=(g,...w)=>{w.length===1?p.error(`Parameter ${w} was not passed for ${g} call. No action processed.`):p.error(`Parameters ${w.join(", ")} were not passed for ${g} call. No action processed.`)},h=g=>{r.trigger(U.MESSAGE_SENT,g),r.trigger(U.MESSAGE,g)},d=g=>{r.trigger(U.MESSAGE_RECEIVED,g),r.trigger(U.MESSAGE,g)},u=g=>{r.trigger(U.NETWORK,g)},b=()=>{p.debug("onLoad","load chat widget"),k()},v=(g,w,y)=>{typeof g=="string"&&g.length&&(t.URI=g),typeof w=="string"&&w.length&&(t.channelId=w),typeof y=="string"&&y.length&&(t.userId=y,s.configureStorage())},k=()=>{s=new Rl(l,t,{connect:this.connect.bind(this),openChat:this.openChat.bind(this),closeChat:this.closeChat.bind(this),handleSessionEnd:_.bind(this),receivedMessage:d.bind(this),sentMessage:h.bind(this),getUnreadMessagesCount:this.getUnreadMessagesCount.bind(this),onConnectionStatusChange:u.bind(this),util:n,eventDispatcher:r}),s.contextWidgetMap=va,s.render()};let x=()=>{r.trigger(U.READY),x=()=>{}};this.configureWidget=(g,w,y=!0)=>{const D=new Fl(t,n,g,w,y,va,l,s,r);return this.isConnected()||this.connect(),va[D.threadId]=D,D},this.updateChatContext=(g,w,y,D,{event:Y,semanticObject:N}={})=>(g||m("updateChatContext","appContext"),l.updateChatContext(g,{properties:vt(vt({},ua(w)),y),event:Y,semanticObject:N},D,t.sdkMetadata?vt({version:G},t.sdkMetadata):{version:G})),this.connect=({URI:g,channelId:w,userId:y}={})=>{let D;return g||w||y?(v(g,w,y),D=l.connect(t)):D=l.connect(),D.then(()=>{p.debug("Connection ready")},()=>{p.debug("Connection timeout"),s.showConnectionError()}).finally(()=>{x()}),D},this.disconnect=()=>(t.enableSpeech&&this.stopVoiceRecording(),t.enableBotAudioResponse&&this.cancelTTS(),l.disconnect()),this.isConnected=()=>l.isConnected(),this.openChat=()=>{s.isOpen()||(s.showChat(),i&&(this.connect(),i=!1)),r.trigger(U.WIDGET_OPENED)},this.closeChat=()=>{s.isOpen()&&s.close(),r.trigger(U.WIDGET_CLOSED)},this.endChat=()=>{this.isConnected()&&s.sendExitEvent()},this.showWidget=()=>{s==null||s.showWidget()},this.hideWidget=()=>{s==null||s.hideWidget()};const _=()=>{s.isOpen&&this.closeChat(),this.disconnect(),this.clearConversationHistory(),i=!0,r.trigger(U.CHAT_END)};this.isChatOpened=()=>s.isOpen(),this.destroy=()=>{if(this.disconnect(),this.closeChat(),s.remove(),document){const g=s.styleSheet;g&&g.remove()}r.trigger(U.DESTROY),this.off();for(const g in this)this[g]&&delete this[g]},this.on=(g,w)=>{switch(g){case ge.TTSStart:case ge.TTSStop:l.on(g,w);break;default:r.bind(g,w)}},this.off=(g,w)=>{switch(g){case ge.TTSStart:case ge.TTSStop:l.off(g,w);break;default:r.unbind(g,w)}},this.sendAttachment=g=>g?s.uploadFile(g):(m("sendAttachment","file"),Promise.reject(new Error("Invalid Parameter"))),this.sendMessage=(g,w)=>g?s.sendMessage(g,w):(m("sendMessage","message"),Promise.reject(new Error("Invalid Parameter"))),this.sendUserTypingStatus=(g,w)=>g?l.sendUserTypingStatus(g,w):(m("sendUserTypingStatus","status"),Promise.reject(new Error("Invalid Parameter"))),this.updateUser=g=>g?l.updateUser(g,{sdkMetadata:{version:G}}).then(w=>h(w)):(m("updateUser","userDetails"),Promise.reject(new Error("Invalid Parameter"))),this.setUserAvatar=g=>{if(!g){m("setUserAvatar","userAvatar");return}s.setUserAvatar(g)},this.setAgentDetails=g=>{if(!g){m("setAgentDetails","agentDetails");return}s.setAgentDetails(g)},this.getAgentDetails=()=>s.getAgentDetails(),this.setSkillVoices=g=>{if(!l.getTTSService())return _a();let y=[];return g&&!Array.isArray(g)&&typeof(g==null?void 0:g.lang)=="string"?y=[g]:Array.isArray(g)&&(y=g),this.setTTSVoice(y)},this.setTTSService=g=>{const w=l.getTTSService();w&&w.cancel(),typeof g=="string"?l.setTTSService(g):l.setTTSService(ig(g)?g:null);const y=l.getTTSService();t.ttsService=y,s&&s.refreshTTS(),y&&(t.enableBotAudioResponse=!0,Mo(y,t.ttsVoice).then(D=>{D||(t.ttsVoice=[]);const Y=da({hasRecognition:t.enableSpeech,hasSynthesis:t.enableBotAudioResponse,recognitionLocale:t.speechLocale,synthesisLocales:t.ttsVoice});Y&&y.setVoice(Y).catch(N=>{p.error(N)}),t.ttsVoice=Y}))},this.getTTSVoices=()=>l.getTTSVoices(),this.setTTSVoice=g=>{const w=l.getTTSService();return w?Mo(w,t.ttsVoice).then(y=>(t.ttsVoice=da({hasRecognition:t.enableSpeech,hasSynthesis:t.enableBotAudioResponse,isReset:y,recognitionLocale:t.speechLocale,synthesisLocales:g}),l.setTTSVoice(g).catch(()=>_a()))):_a()},this.getTTSVoice=()=>{try{return l.getTTSVoice()}catch(g){throw Error(Wo)}},this.speakTTS=g=>{l.speakTTS(g,t.i18n[t.locale])},this.cancelTTS=()=>{l.cancelTTS()},this.setPrimaryChatLanguage=g=>{if(g===null||typeof g=="string")this.isConnected()?s.setPrimaryChatLanguage(g):p.error("Not connected. Can not call setPrimaryChatLanguage.");else throw Error("Please pass a language string or null as argument")},this.setDelegate=g=>{t.delegate=g},this.getConversationHistory=()=>{const g=s.getMessages();return{messages:g,messagesCount:g.length,unreadCount:this.getUnreadMessagesCount(),userId:t.userId}},this.clearConversationHistory=(g,w=!0)=>{if(g&&typeof g!="string"){p.error("Argument passed in clearConversationHistory() is not of type string. Returning without execution.");return}(!g||g.length===0)&&(g=t.userId),w&&g===t.userId?s.clearConversationHistory():s.clearMessages(g,Fe.LOCAL)},this.clearAllConversationsHistory=(g=!0)=>{s.clearAllMessage(),g&&s.clearConversationHistory()},this.getSuggestions=g=>t.enableAutocomplete?g?typeof g!="string"&&typeof g!="number"?Promise.reject("Invalid query parameter type passed for the getSuggestions call."):s.getSuggestions(g):Promise.reject("No query parameter passed for the getSuggestions call."):Promise.reject("Autocomplete suggestions not enabled."),this.startVoiceRecording=(g,w)=>t.enableSpeech?l.startRecognition({onRecognitionText:y=>{g==null||g(y.message)},onVisualData:w==null?void 0:w.onAnalyserFrequencies}):Promise.reject(new Error("Speech-to-text feature is not enabled. Initialize the widget with enableSpeech: true to use the service.")),this.stopVoiceRecording=()=>{if(!t.enableSpeech)throw new Error("Speech-to-text feature is not enabled. Speech recognition service is not running.");return l.stopRecognition()},this.setSpeechLocale=g=>{if(!t.enableSpeech)return!1;g=g.toLowerCase();const w=c.includes(g);if(t.speechLocale=g,l.setRecognitionLocale(g),s.setVoiceRecognitionService(w),w&&t.enableBotAudioResponse){const y=da({hasRecognition:t.enableSpeech,hasSynthesis:t.enableBotAudioResponse,recognitionLocale:t.speechLocale,synthesisLocales:t.ttsVoice});y!==t.ttsVoice&&(t.ttsVoice=y,y.length&&l.setTTSVoice(y))}return w},this.getUnreadMessagesCount=()=>{if(t.enableHeadless)return 0;const g=s.getUnreadMsgsCount();return g!==a&&(a=g,r.trigger(U.UNREAD,g)),g},this.setAllMessagesAsRead=()=>{t.enableHeadless||(this.getUnreadMessagesCount(),s.updateNotificationBadge(0))},this.showTypingIndicator=()=>{if(t.showTypingIndicator){if(t.enableHeadless)throw new Error("Typing indicator cannot be shown in headless mode.");this.isConnected()&&s.showTypingIndicator()}else throw new Error("Typing indicator is configured not to be shown.")},this.setWebViewConfig=g=>{if(t.enableHeadless)throw new Error("WebView cannot be configured in headless mode.");s.refreshWebView(g)},this.setUserInputMessage=g=>{if(t.enableHeadless)throw new Error("User input cannot be set in headless mode.");s.setUserInputMessage(g)},this.setUserInputPlaceholder=g=>{if(t.enableHeadless)throw new Error("Placeholder cannot be set in headless mode.");if(!g){m("setUserInputPlaceholder","placeholder text");return}s.setUserInputPlaceholder(g)},this.setHeight=g=>{if(!g){m("setHeight","height");return}s==null||s.setHeight(g)},this.setWidth=g=>{if(!g){m("setWidth","width");return}s==null||s.setWidth(g)},this.setSize=(g,w)=>{if(!g&&!w){m("setSize","width","height");return}s==null||s.setSize(g,w)},this.setMessagePadding=g=>{if(!g){m("setMessagePadding","padding");return}s==null||s.setMessagePadding(g)},this.setChatBubbleIconHeight=g=>{if(!g){m("setChatBubbleIconHeight","height");return}s==null||s.setChatBubbleIconHeight(g)},this.setChatBubbleIconWidth=g=>{if(!g){m("setChatBubbleIconWidth","width");return}s==null||s.setChatBubbleIconWidth(g)},this.setChatBubbleIconSize=(g,w)=>{if(!g&&w){m("setChatBubbleIconSize","width","height");return}s==null||s.setChatBubbleIconSize(g,w)},this.setFont=g=>{if(!g){m("setFont","font");return}n.updateCSSVar("font",g),t.font=g},this.setFontFamily=g=>{if(!g){m("setFontFamily","fontFamily");return}n.updateCSSVar("font-family",g),t.fontFamily=g},this.setFontSize=g=>{if(!g){m("setFontSize","fontSize");return}n.updateCSSVar("font-size",g)},this.setTextColor=g=>{if(!g){m("setTextColor","color");return}n.updateCSSVar("--color-bot-text",g),n.updateCSSVar("--color-user-text",g)},this.setTextColorLight=g=>{if(!g){m("setTextColorLight","color");return}n.updateCSSVar("--color-text-light",g),t.colors.textLight=g},b(),Qo(this);const C=window;C&&typeof C.define=="function"&&C.define.amd&&(C.WebSDK=Ye)}const Wo="Text-to-speech is not available.";function _a(){return ng(Wo)}function ng(o){return Promise.reject(Error(o))}return Ye.EVENT=U,Ye.SPEECH_LOCALE=Ee,Ye.THEME=io,Ye.TTS=Ds,Ye.Version=G,Ta(Ye),Ye});
